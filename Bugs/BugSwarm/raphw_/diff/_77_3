[<Line: +import net.bytebuddy.asm.ClassVisitorWrapper;
>, <Line: +import org.mockito.invocation.InvocationOnMock;
>, <Line: +import org.mockito.stubbing.Answer;
>, <Line: +import org.objectweb.asm.*;
>, <Line: +import static org.mockito.Matchers.any;
>, <Line: +import static org.mockito.Mockito.*;
>, <Line: +    @Test
>, <Line: +    public void testWriterHint() throws Exception {
>, <Line: +        ClassVisitorWrapper classVisitorWrapper = mock(ClassVisitorWrapper.class);
>, <Line: +        when(classVisitorWrapper.wrap(any(ClassVisitor.class))).then(new Answer<ClassVisitor>() {
>, <Line: +            @Override
>, <Line: +            public ClassVisitor answer(InvocationOnMock invocationOnMock) throws Throwable {
>, <Line: +                return new ClassVisitor(Opcodes.ASM5, (ClassVisitor) invocationOnMock.getArguments()[0]) {
>, <Line: +                    @Override
>, <Line: +                    public void visitEnd() {
>, <Line: +                        MethodVisitor mv = visitMethod(Opcodes.ACC_PUBLIC, FOO, "()Ljava/lang/String;", null, null);
>, <Line: +                        mv.visitCode();
>, <Line: +                        mv.visitLdcInsn(FOO);
>, <Line: +                        mv.visitInsn(Opcodes.ARETURN);
>, <Line: +                        mv.visitMaxs(-1, -1);
>, <Line: +                        mv.visitEnd();
>, <Line: +                    }
>, <Line: +                };
>, <Line: +            }
>, <Line: +        });
>, <Line: +        when(classVisitorWrapper.wrapWriter(0)).thenReturn(ClassWriter.COMPUTE_MAXS);
>, <Line: +        Class<?> type = createPlain()
>, <Line: +                .classVisitor(classVisitorWrapper)
>, <Line: +                .make()
>, <Line: +                .load(null, ClassLoadingStrategy.Default.WRAPPER)
>, <Line: +                .getLoaded();
>, <Line: +        assertThat(type.getDeclaredMethod(FOO).invoke(type.newInstance()), is((Object) FOO));
>, <Line: +        verify(classVisitorWrapper).wrapWriter(0);
>, <Line: +        verify(classVisitorWrapper, atMost(1)).wrapReader(0);
>, <Line: +        verify(classVisitorWrapper).wrap(any(ClassVisitor.class));
>, <Line: +        verifyNoMoreInteractions(classVisitorWrapper);
>, <Line: +    }
>]
[<Line: -import org.objectweb.asm.Opcodes;
>]