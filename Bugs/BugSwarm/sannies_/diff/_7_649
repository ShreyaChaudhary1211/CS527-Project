[<Line: +package org.mp4parser.streaming.input.aac;
>, <Line: +import org.junit.Test;
>, <Line: +import org.mp4parser.IsoFile;
>, <Line: +import org.mp4parser.muxer.InMemRandomAccessSourceImpl;
>, <Line: +import org.mp4parser.muxer.Sample;
>, <Line: +import org.mp4parser.muxer.samples.SampleList;
>, <Line: +import org.mp4parser.streaming.StreamingTrack;
>, <Line: +import org.mp4parser.streaming.input.h264.Walk;
>, <Line: +import org.mp4parser.streaming.output.mp4.FragmentedMp4Writer;
>, <Line: +import java.io.ByteArrayInputStream;
>, <Line: +import java.io.ByteArrayOutputStream;
>, <Line: +import java.io.FileOutputStream;
>, <Line: +import java.nio.channels.Channels;
>, <Line: +import java.util.Collections;
>, <Line: +import java.util.List;
>, <Line: +import java.util.concurrent.ExecutorService;
>, <Line: +import java.util.concurrent.Executors;
>, <Line: +/**
>, <Line: + * Created by sannies on 02.09.2015.
>, <Line: + */
>, <Line: +public class AdtsAacStreamingTrackTest {
>, <Line: +    ExecutorService es = Executors.newCachedThreadPool();
>, <Line: +    @Test
>, <Line: +    public void testMuxing() throws Exception {
>, <Line: +        AdtsAacStreamingTrack b = new AdtsAacStreamingTrack(AdtsAacStreamingTrackTest.class.getResourceAsStream("/org/mp4parser/streaming/input/aac/somesound.aac"), 65000, 80000);
>, <Line: +        ByteArrayOutputStream baos = new ByteArrayOutputStream();
>, <Line: +        new FragmentedMp4Writer(Collections.<StreamingTrack>singletonList(b), Channels.newChannel(baos));
>, <Line: +        //MultiTrackFragmentedMp4Writer writer = new MultiTrackFragmentedMp4Writer(new StreamingTrack[]{b}, new ByteArrayOutputStream());
>, <Line: +        b.call();
>, <Line: +        IsoFile isoFile = new IsoFile(Channels.newChannel(new ByteArrayInputStream(baos.toByteArray())));
>, <Line: +        new FileOutputStream("output.mp4").write(baos.toByteArray());
>, <Line: +        Walk.through(isoFile);
>, <Line: +        List<Sample> s = new SampleList(1, isoFile, new InMemRandomAccessSourceImpl(baos.toByteArray()));
>, <Line: +        for (Sample sample : s) {
>, <Line: +            //System.err.println("s: " + sample.getSize());
>, <Line: +            sample.asByteBuffer();
>, <Line: +        }
>, <Line: +    }
>, <Line: +}
>]
[]