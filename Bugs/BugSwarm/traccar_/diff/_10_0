[<Line: +    private void updateDeviceCache(boolean force) throws SQLException {
>, <Line: +        if (System.currentTimeMillis() - devicesLastUpdate > devicesRefreshDelay || force) {
>, <Line: +    }
>, <Line: +    @Override
>, <Line: +    public Device getDeviceById(long id) {
>, <Line: +        try {
>, <Line: +            updateDeviceCache(!devicesById.containsKey(id));
>, <Line: +        } catch (SQLException e) {
>, <Line: +            Log.warning(e);
>, <Line: +        }
>, <Line: +        return devicesById.get(id);
>, <Line: +    }
>, <Line: +    @Override
>, <Line: +    public Device getDeviceByUniqueId(String uniqueId) throws SQLException {
>, <Line: +        updateDeviceCache(!devicesByUniqueId.containsKey(uniqueId));
>]
[<Line: -    @Override
>, <Line: -    public Device getDeviceById(long id) {
>, <Line: -        return devicesById.get(id);
>, <Line: -    }
>, <Line: -    @Override
>, <Line: -    public Device getDeviceByUniqueId(String uniqueId) throws SQLException {
>, <Line: -        if (System.currentTimeMillis() - devicesLastUpdate > devicesRefreshDelay
>, <Line: -                || !devicesByUniqueId.containsKey(uniqueId)) {
>]