[<Line: +    static final class DEFAULT implements Serializable {
>, <Line: +    }
>, <Line: +        final int pos = output.position();
>, <Line: +        try {
>, <Line: +        } catch (RuntimeException e) {
>, <Line: +            if (PRINT_WARNINGS_ON_UNSERIALIZABLE_THREAD_LOCAL)
>, <Line: +                System.err.println("WARNING: Cannot serialize ThreadLocal (" + tl + " = " + val + "), it will be restored as null.");
>, <Line: +            output.setPosition(pos);
>, <Line: +            kryo.writeObject(output, new DEFAULT());
>, <Line: +        }
>, <Line: +        final Object val = kryo.readClassAndObject(input);
>, <Line: +        if (!(val instanceof DEFAULT))
>, <Line: +            tl.set(val);
>]
[<Line: -        final boolean serializable = canSerialize(kryo, tl, val);
>, <Line: -        output.writeBoolean(serializable);
>, <Line: -        if (serializable)
>, <Line: -        final boolean serializable = input.readBoolean();
>, <Line: -        if (serializable)
>, <Line: -            tl.set(kryo.readClassAndObject(input));
>]