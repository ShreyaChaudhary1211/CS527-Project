[<Line: +package backend.json;
>, <Line: +import backend.interfaces.RepoStore;
>, <Line: +import backend.interfaces.StoreTask;
>, <Line: +import backend.resource.serialization.SerializableModel;
>, <Line: +import com.google.gson.Gson;
>, <Line: +import org.apache.logging.log4j.Logger;
>, <Line: +import util.HTLog;
>, <Line: +class WriteTask extends StoreTask {
>, <Line: +	private static final Logger logger = HTLog.get(WriteTask.class);
>, <Line: +	public final SerializableModel toSave;
>, <Line: +	public WriteTask(String repoName, SerializableModel toSave) {
>, <Line: +		super(repoName);
>, <Line: +		this.toSave = toSave;
>, <Line: +	}
>, <Line: +	@Override
>, <Line: +	public void run() {
>, <Line: +		save(repoId, toSave);
>, <Line: +	}
>, <Line: +	private void save(String repoId, SerializableModel model) {
>, <Line: +		String output = new Gson().toJson(model);
>, <Line: +		RepoStore.write(repoId, output);
>, <Line: +		logger.info(HTLog.format(repoId, "Written to JSON store"));
>, <Line: +	}
>, <Line: +}
>]
[]