[<Line: +import java.io.UncheckedIOException;
>, <Line: +import java.util.function.Function;
>, <Line: +    /**
>, <Line: +     * Executes a {@link HttpRequest}, logs the request and returns back the
>, <Line: +     * response.
>, <Line: +     *
>, <Line: +     * @param <R> return value from responseAction function
>, <Line: +     * @param request request object
>, <Line: +     * @param responseAction action to perform against the response before it is closed
>, <Line: +     * @param logMessage log message associated with request that must contain
>, <Line: +     *                   a substitution placeholder for status code and
>, <Line: +     *                   status message
>, <Line: +     * @param logParameters additional log placeholders
>, <Line: +     * @return response object
>, <Line: +     * @throws IOException thrown when we are unable to process the request on the network
>, <Line: +     */
>, <Line: +    protected <R> R executeAndCloseRequest(final HttpRequest request,
>, <Line: +                                           final Function<HttpResponse, R> responseAction,
>, <Line: +                                           final String logMessage,
>, <Line: +                                           final Object... logParameters)
>, <Line: +            throws IOException {
>, <Line: +        HttpResponse response = null;
>, <Line: +        try {
>, <Line: +            response = request.execute();
>, <Line: +            LOG.debug(logMessage, logParameters, response.getStatusCode(),
>, <Line: +                    response.getStatusMessage());
>, <Line: +            return responseAction.apply(response);
>, <Line: +        } catch (final UncheckedIOException e) {
>, <Line: +            throw e.getCause();
>, <Line: +        } catch (final HttpResponseException e) {
>, <Line: +            throw new MantaClientHttpResponseException(e);
>, <Line: +        } finally {
>, <Line: +            if (response != null) {
>, <Line: +                response.disconnect();
>, <Line: +            }
>, <Line: +        }
>, <Line: +    }
>]
[]