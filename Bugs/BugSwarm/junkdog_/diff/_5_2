[<Line: +import com.artemis.Component;
>, <Line: +import com.esotericsoftware.jsonbeans.*;
>, <Line: +	private final EntitySerializer entitySerializer;
>, <Line: +		entitySerializer = new EntitySerializer(world, referenceTracker);
>, <Line: +		json.setSerializer(Entity.class, entitySerializer);
>, <Line: +		updateLookupMap(is); // this isn't the nices solution, but what the hell
>, <Line: +	private void updateLookupMap(InputStream is) {
>, <Line: +		try {
>, <Line: +			JsonValue jsonData = new JsonReader().parse(is);
>, <Line: +			SaveFileFormat save = new SaveFileFormat((IntBag)null);
>, <Line: +			json.readField(save, "componentIdentifiers", jsonData);
>, <Line: +			is.reset();
>, <Line: +			entitySerializer.types = save.readLookupMap();
>, <Line: +		} catch (IOException e) {
>, <Line: +			throw new RuntimeException(e);
>, <Line: +		}
>, <Line: +	}
>]
[<Line: -import com.esotericsoftware.jsonbeans.Json;
>, <Line: -import com.esotericsoftware.jsonbeans.JsonSerializer;
>, <Line: -import com.esotericsoftware.jsonbeans.OutputType;
>, <Line: -		json.setSerializer(Entity.class, new EntitySerializer(world, referenceTracker));
>]