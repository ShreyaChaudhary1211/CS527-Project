diff --git a/bears_new/Bears-137/Buggy-Version/src/org/traccar/protocol/TotemFrameDecoder.java b/bears_new/Bears-137/Fixed-Version/src/org/traccar/protocol/TotemFrameDecoder.java
index 6c9b145..6940d7b 100644
--- a/bears_new/Bears-137/Buggy-Version/src/org/traccar/protocol/TotemFrameDecoder.java
+++ b/bears_new/Bears-137/Fixed-Version/src/org/traccar/protocol/TotemFrameDecoder.java
@@ -42,8 +42,8 @@ public class TotemFrameDecoder extends FrameDecoder {
 
         int length;
 
-        int separatorIndex = buf.indexOf(buf.readerIndex(), buf.writerIndex(), (byte) '|');
-        if (separatorIndex > 0 && separatorIndex - beginIndex > 19) {
+        int flagIndex = buf.indexOf(buf.readerIndex(), buf.writerIndex(), new StringFinder("AA"));
+        if (flagIndex != -1 && flagIndex - beginIndex == 6) {
             length = Integer.parseInt(buf.toString(buf.readerIndex() + 2, 4, StandardCharsets.US_ASCII));
         } else {
             length = Integer.parseInt(buf.toString(buf.readerIndex() + 2, 2, StandardCharsets.US_ASCII), 16);
