diff --git a/JxPath_19/buggy/.defects4j.config b/JxPath_19/fixed/.defects4j.config
index 5e08627..a2c847b 100644
--- a/JxPath_19/buggy/.defects4j.config
+++ b/JxPath_19/fixed/.defects4j.config
@@ -1,3 +1,3 @@
 #File automatically generated by Defects4J
 pid=JxPath
-vid=19b
+vid=19f
diff --git a/JxPath_19/buggy/.git/HEAD b/JxPath_19/fixed/.git/HEAD
index 8911883..3a6f130 100644
--- a/JxPath_19/buggy/.git/HEAD
+++ b/JxPath_19/fixed/.git/HEAD
@@ -1 +1 @@
-85c835c785faacb3adcdf336b8371452bfa0807f
+2eb994e358050c78d17b8ae18b74a8c2e734600f
diff --git a/JxPath_19/buggy/.git/index b/JxPath_19/fixed/.git/index
index 25cde53..2c50597 100644
Binary files a/JxPath_19/buggy/.git/index and b/JxPath_19/fixed/.git/index differ
diff --git a/JxPath_19/buggy/.git/logs/HEAD b/JxPath_19/fixed/.git/logs/HEAD
index 1e50db8..28805d9 100644
--- a/JxPath_19/buggy/.git/logs/HEAD
+++ b/JxPath_19/fixed/.git/logs/HEAD
@@ -7,3 +7,4 @@ e07f36855a709c4238fe30d151c5f3a8da7214c3 2eb994e358050c78d17b8ae18b74a8c2e734600
 85c835c785faacb3adcdf336b8371452bfa0807f 88f150e730294a1264ea6a29e304687040f4e988 defects4j <defects4j@localhost> 1709004544 -0800	checkout: moving from 85c835c785faacb3adcdf336b8371452bfa0807f to D4J_JxPath_19_POST_FIX_REVISION
 88f150e730294a1264ea6a29e304687040f4e988 75f1204d27df7ca303b3fb382e38d1f2c75aa1a6 defects4j <defects4j@localhost> 1709004544 -0800	commit: D4J_JxPath_19_PRE_FIX_REVISION
 75f1204d27df7ca303b3fb382e38d1f2c75aa1a6 85c835c785faacb3adcdf336b8371452bfa0807f defects4j <defects4j@localhost> 1709004544 -0800	checkout: moving from 75f1204d27df7ca303b3fb382e38d1f2c75aa1a6 to D4J_JxPath_19_BUGGY_VERSION
+85c835c785faacb3adcdf336b8371452bfa0807f 2eb994e358050c78d17b8ae18b74a8c2e734600f defects4j <defects4j@localhost> 1709004544 -0800	checkout: moving from 85c835c785faacb3adcdf336b8371452bfa0807f to D4J_JxPath_19_FIXED_VERSION
diff --git a/JxPath_19/buggy/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java b/JxPath_19/fixed/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java
index 3300d03..8e3b775 100644
--- a/JxPath_19/buggy/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java
+++ b/JxPath_19/fixed/src/java/org/apache/commons/jxpath/ri/model/dom/DOMNodePointer.java
@@ -557,17 +557,21 @@ public class DOMNodePointer extends NodePointer {
         int count = 1;
         Node n = node.getPreviousSibling();
         while (n != null) {
-            if (n.getNodeType() == Node.ELEMENT_NODE) {
-                String nm = n.getNodeName();
-                if (nm.equals(node.getNodeName())) {
+            if (n.getNodeType() == Node.ELEMENT_NODE && matchesQName(n)) {
                 count++;
-                }
             }
             n = n.getPreviousSibling();
         }
         return count;
     }
 
+    private boolean matchesQName(Node n) {
+        if (getNamespaceURI() != null) {
+            return equalStrings(getNamespaceURI(n), getNamespaceURI())
+                    && equalStrings(node.getLocalName(), n.getLocalName());
+        }
+        return equalStrings(node.getNodeName(), n.getNodeName());
+    }
 
     /**
      * Get relative position of this among all siblings.
diff --git a/JxPath_19/buggy/src/java/org/apache/commons/jxpath/ri/model/jdom/JDOMNodePointer.java b/JxPath_19/fixed/src/java/org/apache/commons/jxpath/ri/model/jdom/JDOMNodePointer.java
index 7df3ace..4b40a39 100644
--- a/JxPath_19/buggy/src/java/org/apache/commons/jxpath/ri/model/jdom/JDOMNodePointer.java
+++ b/JxPath_19/fixed/src/java/org/apache/commons/jxpath/ri/model/jdom/JDOMNodePointer.java
@@ -693,8 +693,7 @@ public class JDOMNodePointer extends NodePointer {
             String name = ((Element) node).getQualifiedName();
             for (int i = 0; i < children.size(); i++) {
                 Object child = children.get(i);
-                if ((child instanceof Element)
-                    && ((Element) child).getQualifiedName().equals(name)) {
+                if (child instanceof Element && matchesQName(((Element) child))) {
                     count++;
                 }
                 if (child == node) {
@@ -706,6 +705,15 @@ public class JDOMNodePointer extends NodePointer {
         return 1;
     }
 
+    private boolean matchesQName(Element element) {
+        if (getNamespaceURI() != null) {
+            String ns = getNamespaceURI(element);
+            if (ns == null || !ns.equals(getNamespaceURI())) {
+                return false;
+            }
+        }
+        return element.getName().equals(((Element) node).getName());
+    }
 
     /**
      * Get relative position of this among all siblings.
