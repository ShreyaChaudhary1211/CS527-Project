


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > SimpleDateFormatX</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.alibaba.fastjson2.benchmark.fastcode</a>
</div>

<h1>Coverage Summary for Class: SimpleDateFormatX (com.alibaba.fastjson2.benchmark.fastcode)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">SimpleDateFormatX</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/91)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.alibaba.fastjson2.benchmark.fastcode;
&nbsp;
&nbsp;import java.text.FieldPosition;
&nbsp;import java.text.ParseException;
&nbsp;import java.text.SimpleDateFormat;
&nbsp;import java.util.Calendar;
&nbsp;import java.util.Date;
&nbsp;
&nbsp;public class SimpleDateFormatX
&nbsp;        extends SimpleDateFormat {
&nbsp;    transient boolean format19;
&nbsp;    transient boolean format10;
&nbsp;
&nbsp;    public SimpleDateFormatX(String pattern) {
<b class="nc">&nbsp;        super(pattern);</b>
<b class="nc">&nbsp;        switch (pattern) {</b>
&nbsp;            case &quot;yyyy-MM-dd HH:mm:ss&quot;:
<b class="nc">&nbsp;                format19 = true;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case &quot;yyyy-MM-dd&quot;:
<b class="nc">&nbsp;                format10 = true;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public StringBuffer format(
&nbsp;            Date date,
&nbsp;            StringBuffer toAppendTo,
&nbsp;            FieldPosition pos
&nbsp;    ) {
<b class="nc">&nbsp;        if (format19 || format10) {</b>
<b class="nc">&nbsp;            calendar.setTime(date);</b>
&nbsp;
<b class="nc">&nbsp;            int year = calendar.get(Calendar.YEAR);</b>
<b class="nc">&nbsp;            int month = calendar.get(Calendar.MONTH) + 1;</b>
<b class="nc">&nbsp;            int dayOfMonth = calendar.get(Calendar.DAY_OF_MONTH);</b>
&nbsp;
<b class="nc">&nbsp;            toAppendTo.append(year).append(&#39;-&#39;);</b>
<b class="nc">&nbsp;            if (month &lt; 10) {</b>
<b class="nc">&nbsp;                toAppendTo.append(&#39;0&#39;);</b>
&nbsp;            }
<b class="nc">&nbsp;            toAppendTo.append(month).append(&#39;-&#39;);</b>
<b class="nc">&nbsp;            if (dayOfMonth &lt; 10) {</b>
<b class="nc">&nbsp;                toAppendTo.append(&#39;0&#39;);</b>
&nbsp;            }
<b class="nc">&nbsp;            toAppendTo.append(dayOfMonth);</b>
<b class="nc">&nbsp;            if (format10) {</b>
<b class="nc">&nbsp;                return toAppendTo;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            int hour = calendar.get(Calendar.HOUR_OF_DAY);</b>
<b class="nc">&nbsp;            int minute = calendar.get(Calendar.MINUTE);</b>
<b class="nc">&nbsp;            int second = calendar.get(Calendar.SECOND);</b>
&nbsp;
<b class="nc">&nbsp;            toAppendTo.append(&#39; &#39;);</b>
<b class="nc">&nbsp;            if (hour &lt; 10) {</b>
<b class="nc">&nbsp;                toAppendTo.append(&#39;0&#39;);</b>
&nbsp;            }
<b class="nc">&nbsp;            toAppendTo.append(hour).append(&#39;:&#39;);</b>
<b class="nc">&nbsp;            if (minute &lt; 10) {</b>
<b class="nc">&nbsp;                toAppendTo.append(&#39;0&#39;);</b>
&nbsp;            }
<b class="nc">&nbsp;            toAppendTo.append(minute).append(&#39;:&#39;);</b>
<b class="nc">&nbsp;            if (second &lt; 10) {</b>
<b class="nc">&nbsp;                toAppendTo.append(&#39;0&#39;);</b>
&nbsp;            }
<b class="nc">&nbsp;            toAppendTo.append(second);</b>
<b class="nc">&nbsp;            return toAppendTo;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return super.format(date, toAppendTo, pos);</b>
&nbsp;    }
&nbsp;
&nbsp;    public Date parse(String text) throws ParseException {
<b class="nc">&nbsp;        if (text != null) {</b>
<b class="nc">&nbsp;            final int textLength = text.length();</b>
<b class="nc">&nbsp;            if ((format10 &amp;&amp; textLength == 10) || (format19 &amp;&amp; textLength == 19)) {</b>
<b class="nc">&nbsp;                char c0 = text.charAt(0);</b>
<b class="nc">&nbsp;                char c1 = text.charAt(1);</b>
<b class="nc">&nbsp;                char c2 = text.charAt(2);</b>
<b class="nc">&nbsp;                char c3 = text.charAt(3);</b>
<b class="nc">&nbsp;                char c4 = text.charAt(4);</b>
<b class="nc">&nbsp;                char c5 = text.charAt(5);</b>
<b class="nc">&nbsp;                char c6 = text.charAt(6);</b>
<b class="nc">&nbsp;                char c7 = text.charAt(7);</b>
<b class="nc">&nbsp;                char c8 = text.charAt(8);</b>
<b class="nc">&nbsp;                char c9 = text.charAt(9);</b>
&nbsp;
&nbsp;                int year, month, dayOfMonth;
<b class="nc">&nbsp;                if (c0 &gt;= &#39;0&#39; &amp;&amp; c0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; c1 &gt;= &#39;0&#39; &amp;&amp; c1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c2 &gt;= &#39;0&#39; &amp;&amp; c2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c3 &gt;= &#39;0&#39; &amp;&amp; c3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c4 == &#39;-&#39;
&nbsp;                        &amp;&amp; c5 &gt;= &#39;0&#39; &amp;&amp; c5 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c6 &gt;= &#39;0&#39; &amp;&amp; c6 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c7 == &#39;-&#39;
&nbsp;                        &amp;&amp; c8 &gt;= &#39;0&#39; &amp;&amp; c8 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c9 &gt;= &#39;0&#39; &amp;&amp; c9 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    year = (c0 - &#39;0&#39;) * 1000 + (c1 - &#39;0&#39;) * 100 + (c2 - &#39;0&#39;) * 10 + (c3 - &#39;0&#39;);</b>
<b class="nc">&nbsp;                    month = (c5 - &#39;0&#39;) * 10 + (c6 - &#39;0&#39;);</b>
<b class="nc">&nbsp;                    dayOfMonth = (c8 - &#39;0&#39;) * 10 + (c9 - &#39;0&#39;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return super.parse(text);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                int dom = 31;</b>
<b class="nc">&nbsp;                switch (month) {</b>
&nbsp;                    case 2:
<b class="nc">&nbsp;                        boolean isLeapYear = ((year &amp; 3) == 0) &amp;&amp; ((year % 100) != 0 || (year % 400) == 0);</b>
<b class="nc">&nbsp;                        dom = isLeapYear ? 29 : 28;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case 4:
&nbsp;                    case 6:
&nbsp;                    case 9:
&nbsp;                    case 11:
<b class="nc">&nbsp;                        dom = 30;</b>
&nbsp;                        break;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if (year &gt;= -999999999 &amp;&amp; year &lt;= 999999999</b>
&nbsp;                        &amp;&amp; month &gt;= 1 &amp;&amp; month &lt;= 12
&nbsp;                        &amp;&amp; dayOfMonth &gt;= 1 &amp;&amp; dayOfMonth &lt;= dom
&nbsp;                ) {
<b class="nc">&nbsp;                    calendar.set(Calendar.YEAR, year);</b>
<b class="nc">&nbsp;                    calendar.set(Calendar.MONTH, month - 1);</b>
<b class="nc">&nbsp;                    calendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);</b>
&nbsp;
<b class="nc">&nbsp;                    if (format10) {</b>
<b class="nc">&nbsp;                        calendar.set(Calendar.HOUR_OF_DAY, 0);</b>
<b class="nc">&nbsp;                        calendar.set(Calendar.MINUTE, 0);</b>
<b class="nc">&nbsp;                        calendar.set(Calendar.SECOND, 0);</b>
<b class="nc">&nbsp;                        calendar.set(Calendar.MILLISECOND, 0);</b>
&nbsp;
<b class="nc">&nbsp;                        return calendar.getTime();</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    return super.parse(text);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                char c10 = text.charAt(10);</b>
<b class="nc">&nbsp;                char c11 = text.charAt(11);</b>
<b class="nc">&nbsp;                char c12 = text.charAt(12);</b>
<b class="nc">&nbsp;                char c13 = text.charAt(13);</b>
<b class="nc">&nbsp;                char c14 = text.charAt(14);</b>
<b class="nc">&nbsp;                char c15 = text.charAt(15);</b>
<b class="nc">&nbsp;                char c16 = text.charAt(16);</b>
<b class="nc">&nbsp;                char c17 = text.charAt(17);</b>
<b class="nc">&nbsp;                char c18 = text.charAt(18);</b>
&nbsp;
&nbsp;                int hour, minute, second;
<b class="nc">&nbsp;                if (c10 == &#39; &#39;</b>
&nbsp;                        &amp;&amp; c11 &gt;= &#39;0&#39; &amp;&amp; c11 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c12 &gt;= &#39;0&#39; &amp;&amp; c12 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c13 == &#39;:&#39;
&nbsp;                        &amp;&amp; c14 &gt;= &#39;0&#39; &amp;&amp; c14 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c15 &gt;= &#39;0&#39; &amp;&amp; c15 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c16 == &#39;:&#39;
&nbsp;                        &amp;&amp; c17 &gt;= &#39;0&#39; &amp;&amp; c17 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; c18 &gt;= &#39;0&#39; &amp;&amp; c18 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    hour = (c11 - &#39;0&#39;) * 10 + (c12 - &#39;0&#39;);</b>
<b class="nc">&nbsp;                    minute = (c14 - &#39;0&#39;) * 10 + (c15 - &#39;0&#39;);</b>
<b class="nc">&nbsp;                    second = (c17 - &#39;0&#39;) * 10 + (c18 - &#39;0&#39;);</b>
&nbsp;
<b class="nc">&nbsp;                    if (hour &gt;= 0 &amp;&amp; hour &lt;= 23</b>
&nbsp;                            &amp;&amp; minute &gt;= 0 &amp;&amp; minute &lt;= 59
&nbsp;                            &amp;&amp; second &gt;= 0 &amp;&amp; second &lt;= 59
&nbsp;                    ) {
<b class="nc">&nbsp;                        calendar.set(Calendar.HOUR_OF_DAY, hour);</b>
<b class="nc">&nbsp;                        calendar.set(Calendar.MINUTE, minute);</b>
<b class="nc">&nbsp;                        calendar.set(Calendar.SECOND, second);</b>
<b class="nc">&nbsp;                        calendar.set(Calendar.MILLISECOND, 0);</b>
&nbsp;
<b class="nc">&nbsp;                        return calendar.getTime();</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    return super.parse(text);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return super.parse(text);</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-09 21:33</div>
</div>
</body>
</html>
