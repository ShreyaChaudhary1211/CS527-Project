


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > Type</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.alibaba.fastjson2.internal.asm</a>
</div>

<h1>Coverage Summary for Class: Type (com.alibaba.fastjson2.internal.asm)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Type</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/8)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/215)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/181)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;// ASM: a very small and fast Java bytecode manipulation framework
&nbsp;// Copyright (c) 2000-2011 INRIA, France Telecom
&nbsp;// All rights reserved.
&nbsp;//
&nbsp;// Redistribution and use in source and binary forms, with or without
&nbsp;// modification, are permitted provided that the following conditions
&nbsp;// are met:
&nbsp;// 1. Redistributions of source code must retain the above copyright
&nbsp;//    notice, this list of conditions and the following disclaimer.
&nbsp;// 2. Redistributions in binary form must reproduce the above copyright
&nbsp;//    notice, this list of conditions and the following disclaimer in the
&nbsp;//    documentation and/or other materials provided with the distribution.
&nbsp;// 3. Neither the name of the copyright holders nor the names of its
&nbsp;//    contributors may be used to endorse or promote products derived from
&nbsp;//    this software without specific prior written permission.
&nbsp;//
&nbsp;// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;
&nbsp;// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
&nbsp;// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
&nbsp;// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
&nbsp;// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
&nbsp;// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
&nbsp;// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
&nbsp;// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
&nbsp;// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
&nbsp;// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
&nbsp;// THE POSSIBILITY OF SUCH DAMAGE.
&nbsp;package com.alibaba.fastjson2.internal.asm;
&nbsp;
&nbsp;/**
&nbsp; * A Java field or method type. This class can be used to make it easier to manipulate type and
&nbsp; * method descriptors.
&nbsp; *
&nbsp; * @author Eric Bruneton
&nbsp; * @author Chris Nokleberg
&nbsp; */
&nbsp;public final class Type {
&nbsp;    static final int VOID = 0;
&nbsp;    static final int BOOLEAN = 1;
&nbsp;    static final int CHAR = 2;
&nbsp;    static final int BYTE = 3;
&nbsp;    static final int SHORT = 4;
&nbsp;    static final int INT = 5;
&nbsp;    static final int FLOAT = 6;
&nbsp;    static final int LONG = 7;
&nbsp;    static final int DOUBLE = 8;
&nbsp;    static final int ARRAY = 9;
&nbsp;    static final int OBJECT = 10;
&nbsp;    static final int METHOD = 11;
&nbsp;    static final int INTERNAL = 12;
&nbsp;
<b class="nc">&nbsp;    static final Type VOID_TYPE = new Type(VOID, &quot;VZCBSIFJD&quot;, VOID, VOID + 1);</b>
<b class="nc">&nbsp;    static final Type BOOLEAN_TYPE = new Type(BOOLEAN, &quot;VZCBSIFJD&quot;, BOOLEAN, BOOLEAN + 1);</b>
<b class="nc">&nbsp;    static final Type CHAR_TYPE = new Type(CHAR, &quot;VZCBSIFJD&quot;, CHAR, CHAR + 1);</b>
<b class="nc">&nbsp;    static final Type BYTE_TYPE = new Type(BYTE, &quot;VZCBSIFJD&quot;, BYTE, BYTE + 1);</b>
<b class="nc">&nbsp;    static final Type SHORT_TYPE = new Type(SHORT, &quot;VZCBSIFJD&quot;, SHORT, SHORT + 1);</b>
<b class="nc">&nbsp;    static final Type INT_TYPE = new Type(INT, &quot;VZCBSIFJD&quot;, INT, INT + 1);</b>
<b class="nc">&nbsp;    static final Type FLOAT_TYPE = new Type(FLOAT, &quot;VZCBSIFJD&quot;, FLOAT, FLOAT + 1);</b>
<b class="nc">&nbsp;    static final Type LONG_TYPE = new Type(LONG, &quot;VZCBSIFJD&quot;, LONG, LONG + 1);</b>
<b class="nc">&nbsp;    static final Type DOUBLE_TYPE = new Type(DOUBLE, &quot;VZCBSIFJD&quot;, DOUBLE, DOUBLE + 1);</b>
&nbsp;
<b class="nc">&nbsp;    static final Type TYPE_CLASS = new Type(10, &quot;Ljava/lang/Class;&quot;, 1, 16);</b>
<b class="nc">&nbsp;    static final Type TYPE_TYPE = new Type(10, &quot;Ljava/lang/reflect/Type;&quot;, 1, 23);</b>
<b class="nc">&nbsp;    static final Type TYPE_OBJECT = new Type(10, &quot;Ljava/lang/Object;&quot;, 1, 17);</b>
<b class="nc">&nbsp;    static final Type TYPE_STRING = new Type(10, &quot;Ljava/lang/String;&quot;, 1, 17);</b>
<b class="nc">&nbsp;    static final Type TYPE_LIST = new Type(10, &quot;Ljava/util/List;&quot;, 1, 15);</b>
<b class="nc">&nbsp;    static final Type TYPE_JSON_READER = new Type(10, &quot;Lcom/alibaba/fastjson2/JSONReader;&quot;, 1, 33);</b>
<b class="nc">&nbsp;    static final Type TYPE_JSON_WRITER = new Type(10, &quot;Lcom/alibaba/fastjson2/JSONWriter;&quot;, 1, 33);</b>
<b class="nc">&nbsp;    static final Type TYPE_SUPPLIER = new Type(10, &quot;Ljava/util/function/Supplier;&quot;, 1, 28);</b>
&nbsp;
<b class="nc">&nbsp;    static final Type[] TYPES_0 = new Type[] {TYPE_CLASS, TYPE_STRING, TYPE_STRING, LONG_TYPE, TYPE_LIST};</b>
<b class="nc">&nbsp;    static final Type[] TYPES_1 = new Type[] {TYPE_JSON_WRITER, TYPE_OBJECT, TYPE_OBJECT, TYPE_TYPE, LONG_TYPE};</b>
<b class="nc">&nbsp;    static final Type[] TYPES_2 = new Type[] {TYPE_CLASS, TYPE_SUPPLIER, TYPE_JSON_READER};</b>
<b class="nc">&nbsp;    static final Type[] TYPES_3 = new Type[] {LONG_TYPE};</b>
<b class="nc">&nbsp;    static final Type[] TYPES_4 = new Type[] {TYPE_JSON_READER, TYPE_TYPE, TYPE_OBJECT, LONG_TYPE};</b>
&nbsp;
&nbsp;    final int sort;
&nbsp;    final String valueBuffer;
&nbsp;    final int valueBegin;
&nbsp;    final int valueEnd;
&nbsp;
<b class="nc">&nbsp;    private Type(final int sort, final String valueBuffer, final int valueBegin, final int valueEnd) {</b>
<b class="nc">&nbsp;        this.sort = sort;</b>
<b class="nc">&nbsp;        this.valueBuffer = valueBuffer;</b>
<b class="nc">&nbsp;        this.valueBegin = valueBegin;</b>
<b class="nc">&nbsp;        this.valueEnd = valueEnd;</b>
&nbsp;    }
&nbsp;
&nbsp;    // -----------------------------------------------------------------------------------------------
&nbsp;    // Methods to get Type(s) from a descriptor, a reflected Method or Constructor, other types, etc.
&nbsp;    // -----------------------------------------------------------------------------------------------
&nbsp;//
&nbsp;//    /**
&nbsp;//     * Returns the {@link Type} corresponding to the given type descriptor.
&nbsp;//     *
&nbsp;//     * @param typeDescriptor a field or method type descriptor.
&nbsp;//     * @return the {@link Type} corresponding to the given type descriptor.
&nbsp;//     */
&nbsp;//    public static Type getType(final String typeDescriptor) {
&nbsp;//        return getTypeInternal(typeDescriptor, 0, typeDescriptor.length());
&nbsp;//    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the {@link Type} values corresponding to the argument types of the given method
&nbsp;     * descriptor.
&nbsp;     *
&nbsp;     * @param methodDescriptor a method descriptor.
&nbsp;     * @return the {@link Type} values corresponding to the argument types of the given method
&nbsp;     * descriptor.
&nbsp;     */
&nbsp;    static Type[] getArgumentTypes(final String methodDescriptor) {
<b class="nc">&nbsp;        switch (methodDescriptor) {</b>
&nbsp;            case &quot;()V&quot;:
<b class="nc">&nbsp;                return new Type[0];</b>
&nbsp;            case &quot;(J)Lcom/alibaba/fastjson2/reader/FieldReader;&quot;:
&nbsp;            case &quot;(J)Ljava/lang/Object;&quot;:
<b class="nc">&nbsp;                return TYPES_3;</b>
&nbsp;            case &quot;(Ljava/lang/Class;Ljava/lang/String;Ljava/lang/String;JLjava/util/List;)V&quot;:
<b class="nc">&nbsp;                return TYPES_0;</b>
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/reflect/Type;J)V&quot;:
<b class="nc">&nbsp;                return TYPES_1;</b>
&nbsp;            case &quot;(Ljava/lang/Class;Ljava/util/function/Supplier;[Lcom/alibaba/fastjson2/reader/FieldReader;)V&quot;:
<b class="nc">&nbsp;                return TYPES_2;</b>
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONReader;Ljava/lang/reflect/Type;Ljava/lang/Object;J)Ljava/lang/Object;&quot;:
<b class="nc">&nbsp;                return TYPES_4;</b>
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
&nbsp;        // First step: compute the number of argument types in methodDescriptor.
<b class="nc">&nbsp;        int numArgumentTypes = 0;</b>
&nbsp;        // Skip the first character, which is always a &#39;(&#39;.
<b class="nc">&nbsp;        int currentOffset = 1;</b>
&nbsp;        // Parse the argument types, one at a each loop iteration.
<b class="nc">&nbsp;        while (methodDescriptor.charAt(currentOffset) != &#39;)&#39;) {</b>
<b class="nc">&nbsp;            while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {</b>
<b class="nc">&nbsp;                currentOffset++;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (methodDescriptor.charAt(currentOffset++) == &#39;L&#39;) {</b>
&nbsp;                // Skip the argument descriptor content.
<b class="nc">&nbsp;                int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);</b>
<b class="nc">&nbsp;                currentOffset = Math.max(currentOffset, semiColumnOffset + 1);</b>
&nbsp;            }
<b class="nc">&nbsp;            ++numArgumentTypes;</b>
&nbsp;        }
&nbsp;
&nbsp;        // Second step: create a Type instance for each argument type.
<b class="nc">&nbsp;        Type[] argumentTypes = new Type[numArgumentTypes];</b>
&nbsp;        // Skip the first character, which is always a &#39;(&#39;.
<b class="nc">&nbsp;        currentOffset = 1;</b>
&nbsp;        // Parse and create the argument types, one at each loop iteration.
<b class="nc">&nbsp;        int currentArgumentTypeIndex = 0;</b>
<b class="nc">&nbsp;        while (methodDescriptor.charAt(currentOffset) != &#39;)&#39;) {</b>
<b class="nc">&nbsp;            final int currentArgumentTypeOffset = currentOffset;</b>
<b class="nc">&nbsp;            while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {</b>
<b class="nc">&nbsp;                currentOffset++;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (methodDescriptor.charAt(currentOffset++) == &#39;L&#39;) {</b>
&nbsp;                // Skip the argument descriptor content.
<b class="nc">&nbsp;                int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);</b>
<b class="nc">&nbsp;                currentOffset = Math.max(currentOffset, semiColumnOffset + 1);</b>
&nbsp;            }
<b class="nc">&nbsp;            argumentTypes[currentArgumentTypeIndex++] =</b>
<b class="nc">&nbsp;                    getTypeInternal(methodDescriptor, currentArgumentTypeOffset, currentOffset);</b>
&nbsp;        }
<b class="nc">&nbsp;        return argumentTypes;</b>
&nbsp;    }
&nbsp;//
&nbsp;//    /**
&nbsp;//     * Returns the start index of the return type of the given method descriptor.
&nbsp;//     *
&nbsp;//     * @param descriptor a method descriptor.
&nbsp;//     * @return the start index of the return type of the given method descriptor.
&nbsp;//     */
&nbsp;//    static int getReturnTypeOffset(final String descriptor) {
&nbsp;//        // Skip the first character, which is always a &#39;(&#39;.
&nbsp;//        int currentOffset = 1;
&nbsp;//        // Skip the argument types, one at a each loop iteration.
&nbsp;//        while (descriptor.charAt(currentOffset) != &#39;)&#39;) {
&nbsp;//            while (descriptor.charAt(currentOffset) == &#39;[&#39;) {
&nbsp;//                currentOffset++;
&nbsp;//            }
&nbsp;//            if (descriptor.charAt(currentOffset++) == &#39;L&#39;) {
&nbsp;//                // Skip the argument descriptor content.
&nbsp;//                int semiColumnOffset = descriptor.indexOf(&#39;;&#39;, currentOffset);
&nbsp;//                currentOffset = Math.max(currentOffset, semiColumnOffset + 1);
&nbsp;//            }
&nbsp;//        }
&nbsp;//        return currentOffset + 1;
&nbsp;//    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the {@link Type} corresponding to the given field or method descriptor.
&nbsp;     *
&nbsp;     * @param descriptorBuffer a buffer containing the field or method descriptor.
&nbsp;     * @param descriptorBegin  the beginning index, inclusive, of the field or method descriptor in
&nbsp;     *                         descriptorBuffer.
&nbsp;     * @param descriptorEnd    the end index, exclusive, of the field or method descriptor in
&nbsp;     *                         descriptorBuffer.
&nbsp;     * @return the {@link Type} corresponding to the given type descriptor.
&nbsp;     */
&nbsp;    static Type getTypeInternal(
&nbsp;            final String descriptorBuffer, final int descriptorBegin, final int descriptorEnd) {
<b class="nc">&nbsp;        switch (descriptorBuffer.charAt(descriptorBegin)) {</b>
&nbsp;            case &#39;V&#39;:
<b class="nc">&nbsp;                return VOID_TYPE;</b>
&nbsp;            case &#39;Z&#39;:
<b class="nc">&nbsp;                return BOOLEAN_TYPE;</b>
&nbsp;            case &#39;C&#39;:
<b class="nc">&nbsp;                return CHAR_TYPE;</b>
&nbsp;            case &#39;B&#39;:
<b class="nc">&nbsp;                return BYTE_TYPE;</b>
&nbsp;            case &#39;S&#39;:
<b class="nc">&nbsp;                return SHORT_TYPE;</b>
&nbsp;            case &#39;I&#39;:
<b class="nc">&nbsp;                return INT_TYPE;</b>
&nbsp;            case &#39;F&#39;:
<b class="nc">&nbsp;                return FLOAT_TYPE;</b>
&nbsp;            case &#39;J&#39;:
<b class="nc">&nbsp;                return LONG_TYPE;</b>
&nbsp;            case &#39;D&#39;:
<b class="nc">&nbsp;                return DOUBLE_TYPE;</b>
&nbsp;            case &#39;[&#39;:
<b class="nc">&nbsp;                return new Type(ARRAY, descriptorBuffer, descriptorBegin, descriptorEnd);</b>
&nbsp;            case &#39;L&#39;:
<b class="nc">&nbsp;                int len = descriptorEnd - descriptorBegin;</b>
<b class="nc">&nbsp;                switch (len) {</b>
&nbsp;                    case 16:
<b class="nc">&nbsp;                        if (descriptorBuffer.regionMatches(descriptorBegin, TYPE_LIST.valueBuffer, 0, len)) {</b>
<b class="nc">&nbsp;                            return TYPE_LIST;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 17:
<b class="nc">&nbsp;                        if (descriptorBuffer.regionMatches(descriptorBegin, TYPE_CLASS.valueBuffer, 0, len)) {</b>
<b class="nc">&nbsp;                            return TYPE_CLASS;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 18:
<b class="nc">&nbsp;                        if (descriptorBuffer.regionMatches(descriptorBegin, TYPE_STRING.valueBuffer, 0, len)) {</b>
<b class="nc">&nbsp;                            return TYPE_STRING;</b>
&nbsp;                        }
<b class="nc">&nbsp;                        if (descriptorBuffer.regionMatches(descriptorBegin, TYPE_OBJECT.valueBuffer, 0, len)) {</b>
<b class="nc">&nbsp;                            return TYPE_OBJECT;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 24:
<b class="nc">&nbsp;                        if (descriptorBuffer.regionMatches(descriptorBegin, TYPE_TYPE.valueBuffer, 0, len)) {</b>
<b class="nc">&nbsp;                            return TYPE_TYPE;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 29:
<b class="nc">&nbsp;                        if (descriptorBuffer.regionMatches(descriptorBegin, TYPE_SUPPLIER.valueBuffer, 0, len)) {</b>
<b class="nc">&nbsp;                            return TYPE_SUPPLIER;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 34:
<b class="nc">&nbsp;                        if (descriptorBuffer.regionMatches(descriptorBegin, TYPE_JSON_WRITER.valueBuffer, 0, len)) {</b>
<b class="nc">&nbsp;                            return TYPE_JSON_WRITER;</b>
&nbsp;                        }
<b class="nc">&nbsp;                        if (descriptorBuffer.regionMatches(descriptorBegin, TYPE_JSON_READER.valueBuffer, 0, len)) {</b>
<b class="nc">&nbsp;                            return TYPE_JSON_READER;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    default:
&nbsp;                        break;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                return new Type(OBJECT, descriptorBuffer, descriptorBegin + 1, descriptorEnd - 1);</b>
&nbsp;            case &#39;(&#39;:
<b class="nc">&nbsp;                return new Type(METHOD, descriptorBuffer, descriptorBegin, descriptorEnd);</b>
&nbsp;            default:
<b class="nc">&nbsp;                throw new IllegalArgumentException();</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    // -----------------------------------------------------------------------------------------------
&nbsp;    // Methods to get class names, internal names or descriptors.
&nbsp;    // -----------------------------------------------------------------------------------------------
&nbsp;//
&nbsp;//    /**
&nbsp;//     * Returns the internal name of the class corresponding to this object or array type. The internal
&nbsp;//     * name of a class is its fully qualified name (as returned by Class.getName(), where &#39;.&#39; are
&nbsp;//     * replaced by &#39;/&#39;). This method should only be used for an object or array type.
&nbsp;//     *
&nbsp;//     * @return the internal name of the class corresponding to this object type.
&nbsp;//     */
&nbsp;//    public String getInternalName() {
&nbsp;//        return valueBuffer.substring(valueBegin, valueEnd);
&nbsp;//    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the descriptor corresponding to this type.
&nbsp;     *
&nbsp;     * @return the descriptor corresponding to this type.
&nbsp;     */
&nbsp;    public String getDescriptor() {
<b class="nc">&nbsp;        if (sort == OBJECT) {</b>
<b class="nc">&nbsp;            switch (valueBuffer) {</b>
&nbsp;                case &quot;(Ljava/lang/Class;Ljava/util/function/Supplier;[Lcom/alibaba/fastjson2/reader/FieldReader;)V&quot;:
<b class="nc">&nbsp;                    if (valueBegin == 2 &amp;&amp; valueEnd == 17) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/lang/Class;&quot;;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (valueBegin == 19 &amp;&amp; valueEnd == 46) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/util/function/Supplier;&quot;;</b>
&nbsp;                    }
&nbsp;                    break;
&nbsp;                case &quot;(Lcom/alibaba/fastjson2/JSONReader;Ljava/lang/reflect/Type;Ljava/lang/Object;J)Ljava/lang/Object;&quot;:
<b class="nc">&nbsp;                    if (valueBegin == 2 &amp;&amp; valueEnd == 34) {</b>
<b class="nc">&nbsp;                        return &quot;Lcom/alibaba/fastjson2/JSONReader;&quot;;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (valueBegin == 36 &amp;&amp; valueEnd == 58) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/lang/reflect/Type;&quot;;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (valueBegin == 60 &amp;&amp; valueEnd == 76) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/lang/Object;&quot;;</b>
&nbsp;                    }
&nbsp;                    break;
&nbsp;                case &quot;(Ljava/lang/Class;Ljava/lang/String;Ljava/lang/String;JLjava/util/List;)V&quot;:
<b class="nc">&nbsp;                    if (valueBegin == 2 &amp;&amp; valueEnd == 17) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/lang/Class;&quot;;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (valueBegin == 19 &amp;&amp; valueEnd == 35) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/lang/String;&quot;;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (valueBegin == 37 &amp;&amp; valueEnd == 53) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/lang/String;&quot;;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (valueBegin == 56 &amp;&amp; valueEnd == 70) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/util/List;&quot;;</b>
&nbsp;                    }
&nbsp;                    break;
&nbsp;                case &quot;(Lcom/alibaba/fastjson2/JSONWriter;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/reflect/Type;J)V&quot;:
<b class="nc">&nbsp;                    if (valueBegin == 2 &amp;&amp; valueEnd == 34) {</b>
<b class="nc">&nbsp;                        return &quot;Lcom/alibaba/fastjson2/JSONWriter;&quot;;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (valueBegin == 36 &amp;&amp; valueEnd == 52) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/lang/Object;&quot;;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (valueBegin == 54 &amp;&amp; valueEnd == 70) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/lang/Object;&quot;;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    if (valueBegin == 72 &amp;&amp; valueEnd == 94) {</b>
<b class="nc">&nbsp;                        return &quot;Ljava/lang/reflect/Type;&quot;;</b>
&nbsp;                    }
&nbsp;                    break;
&nbsp;                default:
&nbsp;                    break;
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (valueBegin == 1 &amp;&amp; valueEnd + 1 == valueBuffer.length()) {</b>
<b class="nc">&nbsp;                return valueBuffer;</b>
&nbsp;            }
<b class="nc">&nbsp;            return valueBuffer.substring(valueBegin - 1, valueEnd + 1);</b>
<b class="nc">&nbsp;        } else if (sort == INTERNAL) {</b>
<b class="nc">&nbsp;            return &#39;L&#39; + valueBuffer.substring(valueBegin, valueEnd) + &#39;;&#39;;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            switch (valueBuffer) {</b>
&nbsp;                case &quot;VZCBSIFJD&quot;:
<b class="nc">&nbsp;                    if (valueBegin == 7 &amp;&amp; valueEnd == 8) {</b>
<b class="nc">&nbsp;                        return &quot;J&quot;;</b>
&nbsp;                    }
&nbsp;                    break;
&nbsp;                case &quot;(Ljava/lang/Class;Ljava/util/function/Supplier;[Lcom/alibaba/fastjson2/reader/FieldReader;)V&quot;:
<b class="nc">&nbsp;                    if (valueBegin == 47 &amp;&amp; valueEnd == 90) {</b>
<b class="nc">&nbsp;                        return &quot;[Lcom/alibaba/fastjson2/reader/FieldReader;&quot;;</b>
&nbsp;                    }
&nbsp;                    break;
&nbsp;                default:
&nbsp;                    break;
&nbsp;            }
<b class="nc">&nbsp;            return valueBuffer.substring(valueBegin, valueEnd);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    // -----------------------------------------------------------------------------------------------
&nbsp;    // Methods to get the sort, dimension, size, and opcodes corresponding to a Type or descriptor.
&nbsp;    // -----------------------------------------------------------------------------------------------
&nbsp;//
&nbsp;//    public int getSort() {
&nbsp;//        return sort == INTERNAL ? OBJECT : sort;
&nbsp;//    }
&nbsp;
&nbsp;    /**
&nbsp;     * Computes the size of the arguments and of the return value of a method.
&nbsp;     *
&nbsp;     * @param methodDescriptor a method descriptor.
&nbsp;     * @return the size of the arguments of the method (plus one for the implicit this argument),
&nbsp;     * argumentsSize, and the size of its return value, returnSize, packed into a single int i =
&nbsp;     * {@code (argumentsSize &amp;lt;&amp;lt; 2) | returnSize} (argumentsSize is therefore equal to {@code
&nbsp;     * i &amp;gt;&amp;gt; 2}, and returnSize to {@code i &amp;amp; 0x03}).
&nbsp;     */
&nbsp;    public static int getArgumentsAndReturnSizes(final String methodDescriptor) {
<b class="nc">&nbsp;        switch (methodDescriptor) {</b>
&nbsp;            case &quot;()V&quot;:
<b class="nc">&nbsp;                return 4;</b>
&nbsp;            case &quot;()I&quot;:
&nbsp;            case &quot;()Z&quot;:
&nbsp;            case &quot;()Ljava/lang/String;&quot;:
&nbsp;            case &quot;()Ljava/lang/Class;&quot;:
<b class="nc">&nbsp;                return 5;</b>
&nbsp;            case &quot;()J&quot;:
<b class="nc">&nbsp;                return 6;</b>
&nbsp;            case &quot;(I)V&quot;:
&nbsp;            case &quot;(Ljava/lang/String;)V&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;)V&quot;:
&nbsp;            case &quot;(Ljava/lang/Object;)V&quot;:
&nbsp;            case &quot;(Ljava/lang/Enum;)V&quot;:
<b class="nc">&nbsp;                return 8;</b>
&nbsp;            case &quot;(C)Z&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONReader;)Lcom/alibaba/fastjson2/reader/ObjectReader;&quot;:
&nbsp;            case &quot;(Ljava/lang/Object;)Z&quot;:
&nbsp;            case &quot;(I)Ljava/lang/Object;&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONReader;)Ljava/lang/Object;&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;)Z&quot;:
&nbsp;            case &quot;(I)Ljava/lang/Integer;&quot;:
<b class="nc">&nbsp;                return 9;</b>
&nbsp;            case &quot;(J)V&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONReader;Ljava/lang/Object;)V&quot;:
&nbsp;            case &quot;(Ljava/util/List;Ljava/lang/reflect/Type;)V&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;Ljava/lang/Enum;)V&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;I)V&quot;:
<b class="nc">&nbsp;                return 12;</b>
&nbsp;            case &quot;(J)Z&quot;:
&nbsp;            case &quot;(J)Ljava/lang/Object;&quot;:
&nbsp;            case &quot;(J)Lcom/alibaba/fastjson2/reader/FieldReader;&quot;:
&nbsp;            case &quot;(Ljava/lang/Object;Ljava/lang/reflect/Type;)Z&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/writer/FieldWriter;Ljava/lang/Object;)Ljava/lang/String;&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;Ljava/lang/Class;)Lcom/alibaba/fastjson2/writer/ObjectWriter;&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;Ljava/lang/reflect/Type;)Lcom/alibaba/fastjson2/writer/ObjectWriter;&quot;:
<b class="nc">&nbsp;                return 13;</b>
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONReader;Ljava/lang/Object;Ljava/lang/String;)V&quot;:
&nbsp;            case &quot;(Ljava/lang/Class;Ljava/util/function/Supplier;[Lcom/alibaba/fastjson2/reader/FieldReader;)V&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;ZLjava/util/List;)V&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;J)V&quot;:
<b class="nc">&nbsp;                return 16;</b>
&nbsp;            case &quot;(Ljava/lang/Object;JLjava/lang/Object;)V&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONReader;Ljava/util/List;ILjava/lang/String;)V&quot;:
<b class="nc">&nbsp;                return 20;</b>
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONReader;Ljava/lang/Class;J)Ljava/lang/Object;&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONReader;Ljava/lang/Class;J)Lcom/alibaba/fastjson2/reader/ObjectReader;&quot;:
<b class="nc">&nbsp;                return 21;</b>
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONReader;Ljava/lang/reflect/Type;Ljava/lang/Object;J)Ljava/lang/Object;&quot;:
<b class="nc">&nbsp;                return 25;</b>
&nbsp;            case &quot;(Ljava/lang/Class;Ljava/lang/String;Ljava/lang/String;JLjava/util/List;)V&quot;:
&nbsp;            case &quot;(Lcom/alibaba/fastjson2/JSONWriter;Ljava/lang/Object;Ljava/lang/Object;Ljava/lang/reflect/Type;J)V&quot;:
<b class="nc">&nbsp;                return 28;</b>
&nbsp;            case &quot;(Ljava/lang/Class;Ljava/lang/String;Ljava/lang/String;JLcom/alibaba/fastjson2/schema/JSONSchema;Ljava/util/function/Supplier;Ljava/util/function/Function;[Lcom/alibaba/fastjson2/reader/FieldReader;)V&quot;:
<b class="nc">&nbsp;                return 40;</b>
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        int argumentsSize = 1;</b>
&nbsp;        // Skip the first character, which is always a &#39;(&#39;.
<b class="nc">&nbsp;        int currentOffset = 1;</b>
<b class="nc">&nbsp;        int currentChar = methodDescriptor.charAt(currentOffset);</b>
&nbsp;        // Parse the argument types and compute their size, one at a each loop iteration.
<b class="nc">&nbsp;        while (currentChar != &#39;)&#39;) {</b>
<b class="nc">&nbsp;            if (currentChar == &#39;J&#39; || currentChar == &#39;D&#39;) {</b>
<b class="nc">&nbsp;                currentOffset++;</b>
<b class="nc">&nbsp;                argumentsSize += 2;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                while (methodDescriptor.charAt(currentOffset) == &#39;[&#39;) {</b>
<b class="nc">&nbsp;                    currentOffset++;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (methodDescriptor.charAt(currentOffset++) == &#39;L&#39;) {</b>
&nbsp;                    // Skip the argument descriptor content.
<b class="nc">&nbsp;                    int semiColumnOffset = methodDescriptor.indexOf(&#39;;&#39;, currentOffset);</b>
<b class="nc">&nbsp;                    currentOffset = Math.max(currentOffset, semiColumnOffset + 1);</b>
&nbsp;                }
<b class="nc">&nbsp;                argumentsSize += 1;</b>
&nbsp;            }
<b class="nc">&nbsp;            currentChar = methodDescriptor.charAt(currentOffset);</b>
&nbsp;        }
<b class="nc">&nbsp;        currentChar = methodDescriptor.charAt(currentOffset + 1);</b>
<b class="nc">&nbsp;        if (currentChar == &#39;V&#39;) {</b>
<b class="nc">&nbsp;            return argumentsSize &lt;&lt; 2;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            int returnSize = (currentChar == &#39;J&#39; || currentChar == &#39;D&#39;) ? 2 : 1;</b>
<b class="nc">&nbsp;            return argumentsSize &lt;&lt; 2 | returnSize;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public String getClassName() {
<b class="nc">&nbsp;        switch (sort) {</b>
&nbsp;            case VOID:
<b class="nc">&nbsp;                return &quot;void&quot;;</b>
&nbsp;            case BOOLEAN:
<b class="nc">&nbsp;                return &quot;boolean&quot;;</b>
&nbsp;            case CHAR:
<b class="nc">&nbsp;                return &quot;char&quot;;</b>
&nbsp;            case BYTE:
<b class="nc">&nbsp;                return &quot;byte&quot;;</b>
&nbsp;            case SHORT:
<b class="nc">&nbsp;                return &quot;short&quot;;</b>
&nbsp;            case INT:
<b class="nc">&nbsp;                return &quot;int&quot;;</b>
&nbsp;            case FLOAT:
<b class="nc">&nbsp;                return &quot;float&quot;;</b>
&nbsp;            case LONG:
<b class="nc">&nbsp;                return &quot;long&quot;;</b>
&nbsp;            case DOUBLE:
<b class="nc">&nbsp;                return &quot;double&quot;;</b>
&nbsp;            case ARRAY:
<b class="nc">&nbsp;                Type elementType = getTypeInternal(valueBuffer, valueBegin + getDimensions(), valueEnd);</b>
<b class="nc">&nbsp;                StringBuilder stringBuilder = new StringBuilder(elementType.getClassName());</b>
<b class="nc">&nbsp;                for (int i = getDimensions(); i &gt; 0; --i) {</b>
<b class="nc">&nbsp;                    stringBuilder.append(&quot;[]&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                return stringBuilder.toString();</b>
&nbsp;            case OBJECT:
&nbsp;            case INTERNAL:
<b class="nc">&nbsp;                return valueBuffer.substring(valueBegin, valueEnd).replace(&#39;/&#39;, &#39;.&#39;);</b>
&nbsp;            default:
<b class="nc">&nbsp;                throw new AssertionError();</b>
&nbsp;        }
&nbsp;    }
&nbsp;//
&nbsp;//    public Type getElementType() {
&nbsp;//        return getTypeInternal(valueBuffer, valueBegin + getDimensions(), valueEnd);
&nbsp;//    }
&nbsp;
&nbsp;    public int getDimensions() {
<b class="nc">&nbsp;        int numDimensions = 1;</b>
<b class="nc">&nbsp;        while (valueBuffer.charAt(valueBegin + numDimensions) == &#39;[&#39;) {</b>
<b class="nc">&nbsp;            numDimensions++;</b>
&nbsp;        }
<b class="nc">&nbsp;        return numDimensions;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-09 23:20</div>
</div>
</body>
</html>
