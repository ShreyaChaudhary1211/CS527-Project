


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > TypeUtils</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.alibaba.fastjson.util</a>
</div>

<h1>Coverage Summary for Class: TypeUtils (com.alibaba.fastjson.util)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">TypeUtils</td>
<td class="coverageStat">
  <span class="percent">
    47.1%
  </span>
  <span class="absValue">
    (48/102)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    21.3%
  </span>
  <span class="absValue">
    (376/1765)
  </span>
</td>
</tr>
  <tr>
    <td class="name">TypeUtils$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$2</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    3.4%
  </span>
  <span class="absValue">
    (1/29)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$3</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    3.3%
  </span>
  <span class="absValue">
    (1/30)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$4</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    76.8%
  </span>
  <span class="absValue">
    (53/69)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$5</td>
<td class="coverageStat">
  <span class="percent">
    50%
  </span>
  <span class="absValue">
    (1/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    12.5%
  </span>
  <span class="absValue">
    (1/8)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$6</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    85.7%
  </span>
  <span class="absValue">
    (6/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$7</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (9/9)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$8</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (7/7)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$MethodInheritanceComparator</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (2/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    61.5%
  </span>
  <span class="absValue">
    (8/13)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    51.7%
  </span>
  <span class="absValue">
    (61/118)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    23.9%
  </span>
  <span class="absValue">
    (464/1939)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * Copyright 1999-2017 Alibaba Group.
&nbsp; *
&nbsp; * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
&nbsp; * you may not use this file except in compliance with the License.
&nbsp; * You may obtain a copy of the License at
&nbsp; *
&nbsp; *      http://www.apache.org/licenses/LICENSE-2.0
&nbsp; *
&nbsp; * Unless required by applicable law or agreed to in writing, software
&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
&nbsp; * See the License for the specific language governing permissions and
&nbsp; * limitations under the License.
&nbsp; */
&nbsp;package com.alibaba.fastjson.util;
&nbsp;
&nbsp;import com.alibaba.fastjson.JSON;
&nbsp;import com.alibaba.fastjson.JSONException;
&nbsp;import com.alibaba.fastjson.JSONObject;
&nbsp;import com.alibaba.fastjson.PropertyNamingStrategy;
&nbsp;import com.alibaba.fastjson.annotation.JSONField;
&nbsp;import com.alibaba.fastjson.annotation.JSONType;
&nbsp;import com.alibaba.fastjson.parser.Feature;
&nbsp;import com.alibaba.fastjson.parser.ParserConfig;
&nbsp;import com.alibaba.fastjson.serializer.SerializerFeature;
&nbsp;import com.alibaba.fastjson2.JSONFactory;
&nbsp;import com.alibaba.fastjson2.reader.ObjectReader;
&nbsp;
&nbsp;import java.io.InputStream;
&nbsp;import java.io.Reader;
&nbsp;import java.lang.annotation.Annotation;
&nbsp;import java.lang.reflect.*;
&nbsp;import java.math.BigDecimal;
&nbsp;import java.math.BigInteger;
&nbsp;import java.sql.Timestamp;
&nbsp;import java.util.*;
&nbsp;import java.util.concurrent.ConcurrentHashMap;
&nbsp;import java.util.concurrent.ConcurrentMap;
&nbsp;
&nbsp;/**
&nbsp; * @author wenshao[szujobs@hotmail.com]
&nbsp; */
&nbsp;public class TypeUtils {
&nbsp;    static final long FNV1A_64_MAGIC_HASHCODE = 0xcbf29ce484222325L;
&nbsp;    static final long FNV1A_64_MAGIC_PRIME = 0x100000001b3L;
&nbsp;
&nbsp;    private static boolean setAccessibleEnable = true;
&nbsp;    public static boolean compatibleWithJavaBean;
&nbsp;    public static boolean compatibleWithFieldName;
&nbsp;
&nbsp;    private static volatile Class kotlin_metadata;
&nbsp;    private static volatile boolean kotlin_metadata_error;
<b class="nc">&nbsp;    private static volatile boolean kotlin_class_klass_error;</b>
<b class="fc">&nbsp;    private static volatile Constructor kotlin_kclass_constructor;</b>
&nbsp;    private static volatile Method kotlin_kclass_getConstructors;
<b class="fc">&nbsp;    private static volatile Method kotlin_kfunction_getParameters;</b>
&nbsp;    private static volatile Method kotlin_kparameter_getName;
&nbsp;    private static volatile boolean kotlin_error;
&nbsp;    private static volatile Map&lt;Class, String[]&gt; kotlinIgnores;
<b class="fc">&nbsp;    private static volatile boolean kotlinIgnores_error;</b>
<b class="fc">&nbsp;    private static ConcurrentMap&lt;String, Class&lt;?&gt;&gt; mappings = new ConcurrentHashMap&lt;String, Class&lt;?&gt;&gt;(256, 0.75f, 1);</b>
<b class="fc">&nbsp;    private static Class&lt;?&gt; pathClass;</b>
&nbsp;    private static boolean PATH_CLASS_ERROR;
<b class="fc">&nbsp;</b>
&nbsp;    private static boolean transientClassInited;
<b class="fc">&nbsp;    private static Class&lt;? extends Annotation&gt; transientClass;</b>
&nbsp;
<b class="fc">&nbsp;    @SuppressWarnings({&quot;unchecked&quot;, &quot;rawtypes&quot;})</b>
&nbsp;    public static &lt;T&gt; T cast(Object obj, Class&lt;T&gt; clazz, ParserConfig config) {
&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.cast(obj, clazz, config.getProvider());
<b class="fc">&nbsp;    }</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)</b>
<b class="fc">&nbsp;    public static &lt;T&gt; T cast(Object obj, Type type, ParserConfig mapping) {</b>
&nbsp;        if (obj == null) {
<b class="fc">&nbsp;            return null;</b>
<b class="fc">&nbsp;        }</b>
&nbsp;
&nbsp;        if (obj instanceof String) {
&nbsp;            String strVal = (String) obj;
&nbsp;            if (strVal.length() == 0 //
&nbsp;                    || &quot;null&quot;.equals(strVal) //
&nbsp;                    || &quot;NULL&quot;.equals(strVal)) {
&nbsp;                return null;
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type instanceof Class) {</b>
&nbsp;            return cast(obj, (Class&lt;T&gt;) type, mapping);
<b class="fc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        if (type instanceof ParameterizedType) {</b>
<b class="fc">&nbsp;            return cast(obj, (ParameterizedType) type, mapping);</b>
&nbsp;        }
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;        if (type instanceof TypeVariable) {</b>
<b class="fc">&nbsp;            return (T) obj;</b>
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to : &quot; + type);</b>
<b class="fc">&nbsp;    }</b>
&nbsp;
<b class="fc">&nbsp;    @SuppressWarnings({&quot;rawtypes&quot;, &quot;unchecked&quot;})</b>
&nbsp;    public static &lt;T&gt; T cast(Object obj, ParameterizedType type, ParserConfig mapping) {
&nbsp;        Type rawTye = type.getRawType();
&nbsp;
<b class="fc">&nbsp;        if (rawTye == List.class || rawTye == ArrayList.class) {</b>
<b class="fc">&nbsp;            Type itemType = type.getActualTypeArguments()[0];</b>
<b class="nc">&nbsp;            if (obj instanceof List) {</b>
&nbsp;                List listObj = (List) obj;
<b class="fc">&nbsp;                List arrayList = new ArrayList(listObj.size());</b>
&nbsp;
&nbsp;                for (int i = 0; i &lt; listObj.size(); i++) {
<b class="fc">&nbsp;                    Object item = listObj.get(i);</b>
<b class="nc">&nbsp;</b>
&nbsp;                    Object itemValue;
<b class="fc">&nbsp;                    if (itemType instanceof Class) {</b>
&nbsp;                        if (item != null &amp;&amp; item.getClass() == JSONObject.class) {
&nbsp;                            itemValue = ((JSONObject) item).toJavaObject((Class&lt;T&gt;) itemType, mapping, 0);
&nbsp;                        } else {
<b class="fc">&nbsp;                            itemValue = cast(item, (Class&lt;T&gt;) itemType, mapping);</b>
&nbsp;                        }
<b class="fc">&nbsp;                    } else {</b>
<b class="nc">&nbsp;                        itemValue = cast(item, itemType, mapping);</b>
<b class="nc">&nbsp;                    }</b>
<b class="fc">&nbsp;</b>
&nbsp;                    arrayList.add(itemValue);
&nbsp;                }
<b class="fc">&nbsp;                return (T) arrayList;</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (rawTye == Set.class || rawTye == HashSet.class //</b>
<b class="fc">&nbsp;                || rawTye == TreeSet.class //</b>
<b class="fc">&nbsp;                || rawTye == Collection.class //</b>
&nbsp;                || rawTye == List.class //
&nbsp;                || rawTye == ArrayList.class) {
<b class="nc">&nbsp;            Type itemType = type.getActualTypeArguments()[0];</b>
&nbsp;            if (obj instanceof Iterable) {
<b class="nc">&nbsp;                Collection collection;</b>
<b class="nc">&nbsp;                if (rawTye == Set.class || rawTye == HashSet.class) {</b>
<b class="nc">&nbsp;                    collection = new HashSet();</b>
<b class="nc">&nbsp;                } else if (rawTye == TreeSet.class) {</b>
&nbsp;                    collection = new TreeSet();
&nbsp;                } else {
<b class="nc">&nbsp;                    collection = new ArrayList();</b>
<b class="nc">&nbsp;                }</b>
&nbsp;                for (Iterator it = ((Iterable) obj).iterator(); it.hasNext(); ) {
&nbsp;                    Object item = it.next();
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;                    Object itemValue;</b>
&nbsp;                    if (itemType instanceof Class) {
<b class="nc">&nbsp;                        if (item != null &amp;&amp; item.getClass() == JSONObject.class) {</b>
<b class="nc">&nbsp;                            itemValue = ((JSONObject) item).toJavaObject((Class&lt;T&gt;) itemType, mapping, 0);</b>
<b class="nc">&nbsp;                        } else {</b>
<b class="nc">&nbsp;                            itemValue = cast(item, (Class&lt;T&gt;) itemType, mapping);</b>
&nbsp;                        }
<b class="nc">&nbsp;                    } else {</b>
<b class="nc">&nbsp;                        itemValue = cast(item, itemType, mapping);</b>
&nbsp;                    }
&nbsp;
<b class="nc">&nbsp;                    collection.add(itemValue);</b>
&nbsp;                }
<b class="nc">&nbsp;                return (T) collection;</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        if (rawTye == Map.class || rawTye == HashMap.class) {</b>
<b class="nc">&nbsp;            Type keyType = type.getActualTypeArguments()[0];</b>
&nbsp;            Type valueType = type.getActualTypeArguments()[1];
&nbsp;            if (obj instanceof Map) {
<b class="nc">&nbsp;                Map map = new HashMap();</b>
&nbsp;                for (Map.Entry entry : ((Map&lt;?, ?&gt;) obj).entrySet()) {
&nbsp;                    Object key = cast(entry.getKey(), keyType, mapping);
&nbsp;                    Object value = cast(entry.getValue(), valueType, mapping);
<b class="nc">&nbsp;                    map.put(key, value);</b>
&nbsp;                }
&nbsp;                return (T) map;
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if (obj instanceof String) {</b>
<b class="nc">&nbsp;            String strVal = (String) obj;</b>
&nbsp;            if (strVal.length() == 0) {
&nbsp;                return null;
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
&nbsp;        if (type.getActualTypeArguments().length == 1) {
&nbsp;            Type argType = type.getActualTypeArguments()[0];
<b class="nc">&nbsp;            if (argType instanceof WildcardType) {</b>
&nbsp;                return cast(obj, rawTye, mapping);
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        if (rawTye == Map.Entry.class &amp;&amp; obj instanceof Map &amp;&amp; ((Map) obj).size() == 1) {
&nbsp;            Map.Entry entry = (Map.Entry) ((Map) obj).entrySet().iterator().next();
&nbsp;            return (T) entry;
&nbsp;        }
&nbsp;
&nbsp;        if (rawTye instanceof Class) {
&nbsp;            if (mapping == null) {
&nbsp;                mapping = ParserConfig.global;
&nbsp;            }
&nbsp;//            ObjectDeserializer deserializer = mapping.getDeserializer(rawTye);
&nbsp;//            if (deserializer != null) {
&nbsp;//                String str = JSON.toJSONString(obj);
&nbsp;//                DefaultJSONParser parser = new DefaultJSONParser(str, mapping);
&nbsp;//                return (T) deserializer.deserialze(parser, type, null);
&nbsp;//            }
&nbsp;
<b class="fc">&nbsp;            throw new JSONException(&quot;TODO : &quot; + type); // TOD: cast</b>
&nbsp;        }
<b class="fc">&nbsp;</b>
&nbsp;        throw new JSONException(&quot;can not cast to : &quot; + type);
&nbsp;    }
&nbsp;
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
<b class="fc">&nbsp;    public static &lt;T&gt; T castToJavaBean(Map&lt;String, Object&gt; map, Class&lt;T&gt; clazz, ParserConfig config) {</b>
&nbsp;        try {
<b class="fc">&nbsp;            if (clazz == StackTraceElement.class) {</b>
&nbsp;                String declaringClass = (String) map.get(&quot;className&quot;);
&nbsp;                String methodName = (String) map.get(&quot;methodName&quot;);
&nbsp;                String fileName = (String) map.get(&quot;fileName&quot;);
<b class="fc">&nbsp;                int lineNumber;</b>
<b class="nc">&nbsp;                {</b>
&nbsp;                    Number value = (Number) map.get(&quot;lineNumber&quot;);
<b class="fc">&nbsp;                    if (value == null) {</b>
&nbsp;                        lineNumber = 0;
&nbsp;                    } else if (value instanceof BigDecimal) {
&nbsp;                        lineNumber = ((BigDecimal) value).intValueExact();
<b class="nc">&nbsp;                    } else {</b>
<b class="nc">&nbsp;                        lineNumber = value.intValue();</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                return (T) new StackTraceElement(declaringClass, methodName, fileName, lineNumber);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            {
<b class="nc">&nbsp;                Object iClassObject = map.get(JSON.DEFAULT_TYPE_KEY);</b>
<b class="nc">&nbsp;                if (iClassObject instanceof String) {</b>
&nbsp;                    String className = (String) iClassObject;
&nbsp;                    Class&lt;?&gt; loadClazz;
<b class="nc">&nbsp;                    if (config == null) {</b>
<b class="nc">&nbsp;                        config = ParserConfig.global;</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;//                    loadClazz = config.checkAutoType(className, null);</b>
<b class="nc">&nbsp;//                    if(loadClazz == null){</b>
<b class="nc">&nbsp;//                        throw new ClassNotFoundException(className + &quot; not found&quot;);</b>
&nbsp;//                    }
<b class="nc">&nbsp;//                    if(!loadClazz.equals(clazz)){</b>
&nbsp;//                        return (T) castToJavaBean(map, loadClazz, config);
&nbsp;//                    }
<b class="nc">&nbsp;                    throw new JSONException(&quot;TODO&quot;); // TODO : castToJavaBean</b>
<b class="nc">&nbsp;                }</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (clazz.isInterface()) {</b>
&nbsp;                JSONObject object;
&nbsp;                if (map instanceof JSONObject) {
&nbsp;                    object = (JSONObject) map;
<b class="nc">&nbsp;                } else {</b>
<b class="nc">&nbsp;                    object = new JSONObject(map);</b>
&nbsp;                }
<b class="nc">&nbsp;                if (config == null) {</b>
<b class="nc">&nbsp;                    config = ParserConfig.getGlobalInstance();</b>
&nbsp;                }
<b class="nc">&nbsp;//                ObjectDeserializer deserializer = config.getDeserializers().get(clazz);</b>
<b class="nc">&nbsp;//                if(deserializer != null){</b>
<b class="nc">&nbsp;//                    String json = JSON.toJSONString(object);</b>
<b class="nc">&nbsp;//                    return (T) JSON.parseObject(json, clazz);</b>
&nbsp;//                }
<b class="nc">&nbsp;//                return (T) Proxy.newProxyInstance(Thread.currentThread().getContextClassLoader(),</b>
<b class="nc">&nbsp;//                        new Class&lt;?&gt;[]{clazz}, object);</b>
&nbsp;                throw new JSONException(&quot;TODO&quot;); // TODO : castToJavaBean
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            if (clazz == Locale.class) {</b>
&nbsp;                Object arg0 = map.get(&quot;language&quot;);
&nbsp;                Object arg1 = map.get(&quot;country&quot;);
&nbsp;                if (arg0 instanceof String) {
<b class="nc">&nbsp;                    String language = (String) arg0;</b>
<b class="nc">&nbsp;                    if (arg1 instanceof String) {</b>
&nbsp;                        String country = (String) arg1;
&nbsp;                        return (T) new Locale(language, country);
<b class="nc">&nbsp;                    } else if (arg1 == null) {</b>
<b class="nc">&nbsp;                        return (T) new Locale(language);</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;</b>
&nbsp;            if (clazz == String.class &amp;&amp; map instanceof JSONObject) {
&nbsp;                return (T) map.toString();
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            if (clazz == LinkedHashMap.class &amp;&amp; map instanceof JSONObject) {</b>
<b class="nc">&nbsp;                JSONObject jsonObject = (JSONObject) map;</b>
<b class="nc">&nbsp;                Map innerMap = jsonObject.getInnerMap();</b>
<b class="nc">&nbsp;                if (innerMap instanceof LinkedHashMap) {</b>
&nbsp;                    return (T) innerMap;
<b class="nc">&nbsp;                } else {</b>
&nbsp;                    LinkedHashMap linkedHashMap = new LinkedHashMap();
&nbsp;                    linkedHashMap.putAll(innerMap);
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            ObjectReader objectReader = JSONFactory.getDefaultObjectReaderProvider().getObjectReader(clazz);
<b class="nc">&nbsp;            return (T) objectReader.createInstance(map, 0L);</b>
&nbsp;        } catch (Exception e) {
&nbsp;            throw new JSONException(e.getMessage(), e);
&nbsp;        }
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
&nbsp;    public static Type checkPrimitiveArray(GenericArrayType genericArrayType) {
&nbsp;        Type clz = genericArrayType;
<b class="nc">&nbsp;        Type genericComponentType = genericArrayType.getGenericComponentType();</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        String prefix = &quot;[&quot;;</b>
&nbsp;        while (genericComponentType instanceof GenericArrayType) {
<b class="nc">&nbsp;            genericComponentType = ((GenericArrayType) genericComponentType)</b>
<b class="nc">&nbsp;                    .getGenericComponentType();</b>
<b class="nc">&nbsp;            prefix += prefix;</b>
&nbsp;        }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        if (genericComponentType instanceof Class&lt;?&gt;) {</b>
<b class="nc">&nbsp;            Class&lt;?&gt; ck = (Class&lt;?&gt;) genericComponentType;</b>
<b class="nc">&nbsp;            if (ck.isPrimitive()) {</b>
<b class="nc">&nbsp;                try {</b>
<b class="nc">&nbsp;                    if (ck == boolean.class) {</b>
&nbsp;                        clz = Class.forName(prefix + &quot;Z&quot;);
&nbsp;                    } else if (ck == char.class) {
<b class="nc">&nbsp;                        clz = Class.forName(prefix + &quot;C&quot;);</b>
&nbsp;                    } else if (ck == byte.class) {
<b class="nc">&nbsp;                        clz = Class.forName(prefix + &quot;B&quot;);</b>
<b class="nc">&nbsp;                    } else if (ck == short.class) {</b>
<b class="nc">&nbsp;                        clz = Class.forName(prefix + &quot;S&quot;);</b>
&nbsp;                    } else if (ck == int.class) {
&nbsp;                        clz = Class.forName(prefix + &quot;I&quot;);
<b class="nc">&nbsp;                    } else if (ck == long.class) {</b>
<b class="nc">&nbsp;                        clz = Class.forName(prefix + &quot;J&quot;);</b>
&nbsp;                    } else if (ck == float.class) {
<b class="nc">&nbsp;                        clz = Class.forName(prefix + &quot;F&quot;);</b>
&nbsp;                    } else if (ck == double.class) {
&nbsp;                        clz = Class.forName(prefix + &quot;D&quot;);
&nbsp;                    }
<b class="nc">&nbsp;                } catch (ClassNotFoundException e) {</b>
<b class="nc">&nbsp;                }</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        return clz;</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
&nbsp;    public static boolean isProxy(Class&lt;?&gt; clazz) {
<b class="nc">&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.isProxy(clazz);</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static boolean isGenericParamType(Type type) {</b>
<b class="nc">&nbsp;        if (type instanceof ParameterizedType) {</b>
&nbsp;            return true;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if (type instanceof Class) {</b>
<b class="nc">&nbsp;            Type superType = ((Class&lt;?&gt;) type).getGenericSuperclass();</b>
<b class="nc">&nbsp;            return superType != Object.class &amp;&amp; isGenericParamType(superType);</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
&nbsp;    public static Type getGenericParamType(Type type) {
&nbsp;        if (type instanceof ParameterizedType) {
&nbsp;            return type;
<b class="nc">&nbsp;        }</b>
&nbsp;        if (type instanceof Class) {
<b class="nc">&nbsp;            return getGenericParamType(((Class&lt;?&gt;) type).getGenericSuperclass());</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return type;</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public static boolean isTransient(Method method) {</b>
<b class="nc">&nbsp;        if (method == null) {</b>
&nbsp;            return false;
<b class="nc">&nbsp;        }</b>
&nbsp;        if (!transientClassInited) {
&nbsp;            try {
&nbsp;                transientClass = (Class&lt;? extends Annotation&gt;) Class.forName(&quot;java.beans.Transient&quot;);
<b class="nc">&nbsp;            } catch (Exception e) {</b>
<b class="nc">&nbsp;                // skip</b>
&nbsp;            } finally {
<b class="nc">&nbsp;                transientClassInited = true;</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        if (transientClass != null) {</b>
<b class="nc">&nbsp;            Annotation annotation = TypeUtils.getAnnotation(method, transientClass);</b>
<b class="nc">&nbsp;            return annotation != null;</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static String castToString(Object value) {</b>
<b class="nc">&nbsp;        if (value == null) {</b>
&nbsp;            return null;
<b class="nc">&nbsp;        }</b>
&nbsp;        return value.toString();
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static long fnv1a_64_lower(String key) {</b>
&nbsp;        long hashCode = FNV1A_64_MAGIC_HASHCODE;
&nbsp;        for (int i = 0; i &lt; key.length(); ++i) {
<b class="nc">&nbsp;            char ch = key.charAt(i);</b>
&nbsp;            if (ch &gt;= &#39;A&#39; &amp;&amp; ch &lt;= &#39;Z&#39;) {
&nbsp;                ch = (char) (ch + 32);
&nbsp;            }
<b class="nc">&nbsp;            hashCode ^= ch;</b>
<b class="nc">&nbsp;            hashCode *= FNV1A_64_MAGIC_PRIME;</b>
&nbsp;        }
<b class="nc">&nbsp;        return hashCode;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static long fnv1a_64(String key) {</b>
<b class="nc">&nbsp;        long hashCode = FNV1A_64_MAGIC_HASHCODE;</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; key.length(); ++i) {</b>
<b class="nc">&nbsp;            char ch = key.charAt(i);</b>
<b class="nc">&nbsp;            hashCode ^= ch;</b>
<b class="nc">&nbsp;            hashCode *= FNV1A_64_MAGIC_PRIME;</b>
&nbsp;        }
<b class="nc">&nbsp;        return hashCode;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static long fnv1a_64_extract(String key) {</b>
&nbsp;        long hashCode = FNV1A_64_MAGIC_HASHCODE;
&nbsp;        for (int i = 0; i &lt; key.length(); ++i) {
<b class="nc">&nbsp;            char ch = key.charAt(i);</b>
<b class="nc">&nbsp;            if (ch == &#39;_&#39; || ch == &#39;-&#39; || ch == &#39; &#39;) {</b>
&nbsp;                continue;
&nbsp;            }
<b class="nc">&nbsp;            if (ch &gt;= &#39;A&#39; &amp;&amp; ch &lt;= &#39;Z&#39;) {</b>
&nbsp;                ch = (char) (ch + 32);
&nbsp;            }
&nbsp;            hashCode ^= ch;
<b class="nc">&nbsp;            hashCode *= FNV1A_64_MAGIC_PRIME;</b>
&nbsp;        }
&nbsp;        return hashCode;
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static Long castToLong(Object value) {</b>
&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toLong(value);
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static Integer castToInt(Object value) {</b>
&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toInteger(value);
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static Boolean castToBoolean(Object value) {</b>
&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toBoolean(value);
&nbsp;    }
<b class="nc">&nbsp;</b>
&nbsp;    public static long longExtractValue(Number number) {
<b class="nc">&nbsp;        if (number == null) {</b>
<b class="nc">&nbsp;            return 0;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        if (number instanceof BigDecimal) {
<b class="nc">&nbsp;            return ((BigDecimal) number).longValueExact();</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        return number.longValue();</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
&nbsp;    public static &lt;A extends Annotation&gt; A getAnnotation(Class&lt;?&gt; targetClass, Class&lt;A&gt; annotationClass) {
&nbsp;        A targetAnnotation = targetClass.getAnnotation(annotationClass);
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        Class&lt;?&gt; mixInClass = null;</b>
<b class="nc">&nbsp;        Type type = JSON.getMixInAnnotations(targetClass);</b>
&nbsp;        if (type instanceof Class&lt;?&gt;) {
<b class="nc">&nbsp;            mixInClass = (Class&lt;?&gt;) type;</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
&nbsp;        if (mixInClass != null) {
&nbsp;            A mixInAnnotation = mixInClass.getAnnotation(annotationClass);
<b class="nc">&nbsp;            Annotation[] annotations = mixInClass.getAnnotations();</b>
<b class="nc">&nbsp;            if (mixInAnnotation == null &amp;&amp; annotations.length &gt; 0) {</b>
&nbsp;                for (Annotation annotation : annotations) {
<b class="nc">&nbsp;                    mixInAnnotation = annotation.annotationType().getAnnotation(annotationClass);</b>
<b class="nc">&nbsp;                    if (mixInAnnotation != null) {</b>
&nbsp;                        break;
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (mixInAnnotation != null) {</b>
<b class="nc">&nbsp;                return mixInAnnotation;</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        Annotation[] targetClassAnnotations = targetClass.getAnnotations();</b>
<b class="nc">&nbsp;        if (targetAnnotation == null &amp;&amp; targetClassAnnotations.length &gt; 0) {</b>
<b class="nc">&nbsp;            for (Annotation annotation : targetClassAnnotations) {</b>
<b class="nc">&nbsp;                targetAnnotation = annotation.annotationType().getAnnotation(annotationClass);</b>
<b class="nc">&nbsp;                if (targetAnnotation != null) {</b>
<b class="nc">&nbsp;                    break;</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
&nbsp;        return targetAnnotation;
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static &lt;A extends Annotation&gt; A getAnnotation(Field field, Class&lt;A&gt; annotationClass) {
&nbsp;        A targetAnnotation = field.getAnnotation(annotationClass);
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        Class&lt;?&gt; clazz = field.getDeclaringClass();</b>
&nbsp;        A mixInAnnotation;
<b class="nc">&nbsp;        Class&lt;?&gt; mixInClass = null;</b>
<b class="nc">&nbsp;        Type type = JSON.getMixInAnnotations(clazz);</b>
<b class="nc">&nbsp;        if (type instanceof Class&lt;?&gt;) {</b>
&nbsp;            mixInClass = (Class&lt;?&gt;) type;
&nbsp;        }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        if (mixInClass != null) {</b>
&nbsp;            Field mixInField = null;
<b class="nc">&nbsp;            String fieldName = field.getName();</b>
&nbsp;            // 递归从MixIn类的父类中查找注解（如果有父类的话）
&nbsp;            for (Class&lt;?&gt; currClass = mixInClass; currClass != null &amp;&amp; currClass != Object.class; currClass = currClass.getSuperclass()) {
<b class="nc">&nbsp;                try {</b>
<b class="nc">&nbsp;                    mixInField = currClass.getDeclaredField(fieldName);</b>
<b class="nc">&nbsp;                    break;</b>
<b class="nc">&nbsp;                } catch (NoSuchFieldException e) {</b>
&nbsp;                    // skip
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            if (mixInField == null) {
&nbsp;                return targetAnnotation;
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            mixInAnnotation = mixInField.getAnnotation(annotationClass);</b>
&nbsp;            if (mixInAnnotation != null) {
&nbsp;                return mixInAnnotation;
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return targetAnnotation;</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static &lt;A extends Annotation&gt; A getAnnotation(Method method, Class&lt;A&gt; annotationClass) {</b>
&nbsp;        A targetAnnotation = method.getAnnotation(annotationClass);
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        Class&lt;?&gt; clazz = method.getDeclaringClass();</b>
&nbsp;        A mixInAnnotation;
<b class="nc">&nbsp;        Class&lt;?&gt; mixInClass = null;</b>
<b class="nc">&nbsp;        Type type = JSON.getMixInAnnotations(clazz);</b>
&nbsp;        if (type instanceof Class&lt;?&gt;) {
&nbsp;            mixInClass = (Class&lt;?&gt;) type;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
&nbsp;        if (mixInClass != null) {
&nbsp;            Method mixInMethod = null;
&nbsp;            String methodName = method.getName();
<b class="nc">&nbsp;            Class&lt;?&gt;[] parameterTypes = method.getParameterTypes();</b>
<b class="nc">&nbsp;            // 递归从MixIn类的父类中查找注解（如果有父类的话）</b>
<b class="nc">&nbsp;            for (Class&lt;?&gt; currClass = mixInClass; currClass != null &amp;&amp; currClass != Object.class; currClass = currClass.getSuperclass()) {</b>
<b class="nc">&nbsp;                try {</b>
<b class="nc">&nbsp;                    mixInMethod = currClass.getDeclaredMethod(methodName, parameterTypes);</b>
&nbsp;                    break;
&nbsp;                } catch (NoSuchMethodException e) {
<b class="nc">&nbsp;                    // skip</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            if (mixInMethod == null) {</b>
&nbsp;                return targetAnnotation;
&nbsp;            }
<b class="fc">&nbsp;            mixInAnnotation = mixInMethod.getAnnotation(annotationClass);</b>
&nbsp;            if (mixInAnnotation != null) {
<b class="nc">&nbsp;                return mixInAnnotation;</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return targetAnnotation;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static Double castToDouble(Object value) {</b>
<b class="nc">&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toDouble(value);</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static &lt;T&gt; T castToJavaBean(Object obj, Class&lt;T&gt; clazz) {</b>
&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.cast(obj, clazz);
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static Class&lt;?&gt; getClass(Type type) {</b>
<b class="nc">&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.getClass(type);</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
&nbsp;    public static BigDecimal castToBigDecimal(Object value) {
&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toBigDecimal(value);
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static BigInteger castToBigInteger(Object value) {</b>
<b class="nc">&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toBigInteger(value);</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
&nbsp;    public static Timestamp castToTimestamp(final Object value) {
<b class="nc">&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.cast(value, Timestamp.class);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static java.sql.Date castToSqlDate(final Object value) {</b>
<b class="nc">&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.cast(value, java.sql.Date.class);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static byte byteValue(BigDecimal decimal) {</b>
&nbsp;        if (decimal == null) {
&nbsp;            return 0;
&nbsp;        }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        int scale = decimal.scale();</b>
&nbsp;        if (scale &gt;= -100 &amp;&amp; scale &lt;= 100) {
<b class="nc">&nbsp;            return decimal.byteValue();</b>
&nbsp;        }
&nbsp;
&nbsp;        return decimal.byteValueExact();
&nbsp;    }
<b class="nc">&nbsp;</b>
&nbsp;    public static short shortValue(BigDecimal decimal) {
&nbsp;        if (decimal == null) {
&nbsp;            return 0;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
&nbsp;        int scale = decimal.scale();
&nbsp;        if (scale &gt;= -100 &amp;&amp; scale &lt;= 100) {
<b class="nc">&nbsp;            return decimal.shortValue();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return decimal.shortValueExact();</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static int intValue(BigDecimal decimal) {</b>
&nbsp;        if (decimal == null) {
<b class="nc">&nbsp;            return 0;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        int scale = decimal.scale();</b>
<b class="nc">&nbsp;        if (scale &gt;= -100 &amp;&amp; scale &lt;= 100) {</b>
&nbsp;            return decimal.intValue();
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
&nbsp;        return decimal.intValueExact();
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static long longValue(BigDecimal decimal) {</b>
<b class="nc">&nbsp;        if (decimal == null) {</b>
<b class="nc">&nbsp;            return 0;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        int scale = decimal.scale();
<b class="nc">&nbsp;        if (scale &gt;= -100 &amp;&amp; scale &lt;= 100) {</b>
<b class="nc">&nbsp;            return decimal.longValue();</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        return decimal.longValueExact();</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public static Character castToChar(Object value) {</b>
<b class="nc">&nbsp;        if (value == null) {</b>
&nbsp;            return null;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if (value instanceof Character) {</b>
&nbsp;            return (Character) value;
&nbsp;        }
<b class="nc">&nbsp;        if (value instanceof String) {</b>
<b class="nc">&nbsp;            String strVal = (String) value;</b>
<b class="nc">&nbsp;            if (strVal.length() == 0) {</b>
&nbsp;                return null;
<b class="nc">&nbsp;            }</b>
&nbsp;            if (strVal.length() != 1) {
&nbsp;                throw new JSONException(&quot;can not cast to char, value : &quot; + value);
&nbsp;            }
&nbsp;            return strVal.charAt(0);
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        throw new JSONException(&quot;can not cast to char, value : &quot; + value);</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
&nbsp;    public static Short castToShort(Object value) {
&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toShort(value);
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public static Byte castToByte(Object value) {</b>
&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toByte(value);
&nbsp;    }
<b class="fc">&nbsp;</b>
&nbsp;    public static Float castToFloat(Object value) {
<b class="fc">&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toFloat(value);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="fc">&nbsp;    public static Date castToDate(Object value) {</b>
<b class="nc">&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toDate(value);</b>
&nbsp;    }
<b class="fc">&nbsp;</b>
<b class="nc">&nbsp;    public static Date castToDate(Object value, String format) {</b>
&nbsp;        if (value == null) {
<b class="fc">&nbsp;            return null;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="nc">&nbsp;            return com.alibaba.fastjson2.util.DateUtils.parseDate(str, format, null);</b>
<b class="fc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
&nbsp;        return com.alibaba.fastjson2.util.TypeUtils.toDate(value);
<b class="fc">&nbsp;    }</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;    public static byte[] castToBytes(Object value) {</b>
<b class="fc">&nbsp;        if (value instanceof byte[]) {</b>
<b class="fc">&nbsp;            return (byte[]) value;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;        if (value instanceof String) {
<b class="fc">&nbsp;            return IOUtils.decodeBase64((String) value);</b>
<b class="nc">&nbsp;        }</b>
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to byte[], value : &quot; + value);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static List&lt;FieldInfo&gt; computeGetters(Class&lt;?&gt; clazz, Map&lt;String, String&gt; aliasMap) {
<b class="fc">&nbsp;        return computeGetters(clazz, aliasMap, true);</b>
<b class="fc">&nbsp;    }</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;    public static List&lt;FieldInfo&gt; computeGetters(Class&lt;?&gt; clazz, Map&lt;String, String&gt; aliasMap, boolean sorted) {</b>
<b class="fc">&nbsp;        JSONType jsonType = TypeUtils.getAnnotation(clazz, JSONType.class);</b>
<b class="fc">&nbsp;        Map&lt;String, Field&gt; fieldCacheMap = new HashMap&lt;String, Field&gt;();</b>
<b class="fc">&nbsp;        ParserConfig.parserAllFieldToCache(clazz, fieldCacheMap);</b>
<b class="fc">&nbsp;        return computeGetters(clazz, jsonType, aliasMap, fieldCacheMap, sorted, PropertyNamingStrategy.CamelCase);</b>
<b class="fc">&nbsp;    }</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;    public static List&lt;FieldInfo&gt; computeGetters(Class&lt;?&gt; clazz, //</b>
<b class="fc">&nbsp;                                                 JSONType jsonType, //</b>
<b class="fc">&nbsp;                                                 Map&lt;String, String&gt; aliasMap, //</b>
<b class="fc">&nbsp;                                                 Map&lt;String, Field&gt; fieldCacheMap, //</b>
<b class="fc">&nbsp;                                                 boolean sorted, //</b>
<b class="fc">&nbsp;                                                 PropertyNamingStrategy propertyNamingStrategy //</b>
<b class="fc">&nbsp;    ) {</b>
<b class="fc">&nbsp;        Map&lt;String, FieldInfo&gt; fieldInfoMap = new LinkedHashMap&lt;String, FieldInfo&gt;();</b>
<b class="fc">&nbsp;        boolean kotlin = TypeUtils.isKotlin(clazz);</b>
<b class="fc">&nbsp;        // for kotlin</b>
<b class="fc">&nbsp;        Constructor[] constructors = null;</b>
<b class="fc">&nbsp;        Annotation[][] paramAnnotationArrays = null;</b>
<b class="fc">&nbsp;        String[] paramNames = null;</b>
<b class="fc">&nbsp;        short[] paramNameMapping = null;</b>
<b class="fc">&nbsp;        Method[] methods = clazz.getMethods();</b>
<b class="fc">&nbsp;        try {</b>
<b class="fc">&nbsp;            Arrays.sort(methods, new MethodInheritanceComparator());</b>
<b class="fc">&nbsp;        } catch (Throwable ignored) {</b>
<b class="fc">&nbsp;            // ignored</b>
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;        for (Method method : methods) {</b>
<b class="fc">&nbsp;            String methodName = method.getName();</b>
<b class="fc">&nbsp;            int ordinal = 0, serialzeFeatures = 0, parserFeatures = 0;</b>
<b class="fc">&nbsp;            String label = null;</b>
<b class="fc">&nbsp;            if (Modifier.isStatic(method.getModifiers())) {</b>
<b class="fc">&nbsp;                continue;</b>
<b class="fc">&nbsp;            }</b>
&nbsp;
&nbsp;            Class&lt;?&gt; returnType = method.getReturnType();
<b class="nc">&nbsp;            if (returnType.equals(Void.TYPE)) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            if (method.getParameterTypes().length != 0) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
<b class="nc">&nbsp;</b>
&nbsp;            if (returnType == ClassLoader.class
&nbsp;                    || returnType == InputStream.class
&nbsp;                    || returnType == Reader.class) {
&nbsp;                continue;
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            if (methodName.equals(&quot;getMetaClass&quot;)
&nbsp;                    &amp;&amp; returnType.getName().equals(&quot;groovy.lang.MetaClass&quot;)) {
&nbsp;                continue;
<b class="fc">&nbsp;            }</b>
&nbsp;            if (methodName.equals(&quot;getSuppressed&quot;)
&nbsp;                    &amp;&amp; method.getDeclaringClass() == Throwable.class) {
&nbsp;                continue;
<b class="fc">&nbsp;            }</b>
&nbsp;
&nbsp;            if (kotlin &amp;&amp; isKotlinIgnore(clazz, methodName)) {
&nbsp;                continue;
&nbsp;            }
<b class="fc">&nbsp;            /**</b>
&nbsp;             *  如果在属性或者方法上存在JSONField注解，并且定制了name属性，不以类上的propertyNamingStrategy设置为准，以此字段的JSONField的name定制为准。
&nbsp;             */
&nbsp;            Boolean fieldAnnotationAndNameExists = false;
<b class="nc">&nbsp;            JSONField annotation = TypeUtils.getAnnotation(method, JSONField.class);</b>
&nbsp;            if (annotation == null) {
&nbsp;                annotation = getSuperMethodAnnotation(clazz, method);
&nbsp;            }
<b class="fc">&nbsp;            if (annotation == null &amp;&amp; kotlin) {</b>
&nbsp;                if (constructors == null) {
&nbsp;                    constructors = clazz.getDeclaredConstructors();
&nbsp;                    Constructor creatorConstructor = TypeUtils.getKotlinConstructor(constructors);
&nbsp;                    if (creatorConstructor != null) {
&nbsp;                        paramAnnotationArrays = TypeUtils.getParameterAnnotations(creatorConstructor);
&nbsp;                        paramNames = TypeUtils.getKoltinConstructorParameters(clazz);
&nbsp;                        if (paramNames != null) {
&nbsp;                            String[] paramNames_sorted = new String[paramNames.length];
<b class="fc">&nbsp;                            System.arraycopy(paramNames, 0, paramNames_sorted, 0, paramNames.length);</b>
&nbsp;
&nbsp;                            Arrays.sort(paramNames_sorted);
&nbsp;                            paramNameMapping = new short[paramNames.length];
&nbsp;                            for (short p = 0; p &lt; paramNames.length; p++) {
&nbsp;                                int index = Arrays.binarySearch(paramNames_sorted, paramNames[p]);
<b class="nc">&nbsp;                                paramNameMapping[index] = p;</b>
&nbsp;                            }
&nbsp;                            paramNames = paramNames_sorted;
&nbsp;                        }
<b class="fc">&nbsp;                    }</b>
&nbsp;                }
&nbsp;                if (paramNames != null &amp;&amp; paramNameMapping != null &amp;&amp; methodName.startsWith(&quot;get&quot;)) {
&nbsp;                    String propertyName = decapitalize(methodName.substring(3));
&nbsp;                    int p = Arrays.binarySearch(paramNames, propertyName);
&nbsp;                    if (p &lt; 0) {
&nbsp;                        for (int i = 0; i &lt; paramNames.length; i++) {
&nbsp;                            if (propertyName.equalsIgnoreCase(paramNames[i])) {
&nbsp;                                p = i;
&nbsp;                                break;
&nbsp;                            }
&nbsp;                        }
&nbsp;                    }
&nbsp;                    if (p &gt;= 0) {
&nbsp;                        short index = paramNameMapping[p];
&nbsp;                        Annotation[] paramAnnotations = paramAnnotationArrays[index];
&nbsp;                        if (paramAnnotations != null) {
&nbsp;                            for (Annotation paramAnnotation : paramAnnotations) {
&nbsp;                                if (paramAnnotation instanceof JSONField) {
<b class="fc">&nbsp;                                    annotation = (JSONField) paramAnnotation;</b>
&nbsp;                                    break;
&nbsp;                                }
&nbsp;                            }
&nbsp;                        }
&nbsp;                        if (annotation == null) {
&nbsp;                            Field field = ParserConfig.getFieldFromCache(propertyName, fieldCacheMap);
&nbsp;                            if (field != null) {
&nbsp;                                annotation = TypeUtils.getAnnotation(field, JSONField.class);
&nbsp;                            }
&nbsp;                        }
<b class="nc">&nbsp;                    }</b>
&nbsp;                }
&nbsp;            }
&nbsp;            if (annotation != null) {
<b class="fc">&nbsp;                if (!annotation.serialize()) {</b>
<b class="fc">&nbsp;                    continue;</b>
<b class="fc">&nbsp;                }</b>
<b class="nc">&nbsp;                ordinal = annotation.ordinal();</b>
<b class="nc">&nbsp;                serialzeFeatures = SerializerFeature.of(annotation.serialzeFeatures());</b>
&nbsp;                parserFeatures = Feature.of(annotation.parseFeatures());
<b class="fc">&nbsp;                if (annotation.name().length() != 0) {</b>
<b class="nc">&nbsp;                    String propertyName = annotation.name();</b>
&nbsp;                    if (aliasMap != null) {
&nbsp;                        propertyName = aliasMap.get(propertyName);
<b class="fc">&nbsp;                        if (propertyName == null) {</b>
&nbsp;                            continue;
&nbsp;                        }
&nbsp;                    }
<b class="nc">&nbsp;                    FieldInfo fieldInfo = new FieldInfo(propertyName, method, null, clazz, null, ordinal,</b>
<b class="nc">&nbsp;                            serialzeFeatures, parserFeatures, annotation, null, label);</b>
&nbsp;                    fieldInfoMap.put(propertyName, fieldInfo);
&nbsp;                    continue;
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                if (annotation.label().length() != 0) {</b>
&nbsp;                    label = annotation.label();
&nbsp;                }
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (methodName.startsWith(&quot;get&quot;)) {</b>
&nbsp;                if (methodName.length() &lt; 4) {
&nbsp;                    continue;
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                if (methodName.equals(&quot;getClass&quot;)) {</b>
<b class="nc">&nbsp;                    continue;</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                if (methodName.equals(&quot;getDeclaringClass&quot;) &amp;&amp; clazz.isEnum()) {</b>
<b class="nc">&nbsp;                    continue;</b>
&nbsp;                }
<b class="nc">&nbsp;                char c3 = methodName.charAt(3);</b>
<b class="nc">&nbsp;                String propertyName;</b>
&nbsp;                Field field = null;
&nbsp;                if (Character.isUpperCase(c3) //
<b class="nc">&nbsp;                        || c3 &gt; 512 // for unicode method name</b>
<b class="nc">&nbsp;                ) {</b>
&nbsp;                    if (compatibleWithJavaBean) {
&nbsp;                        propertyName = decapitalize(methodName.substring(3));
<b class="nc">&nbsp;                    } else {</b>
<b class="nc">&nbsp;                        propertyName = TypeUtils.getPropertyNameByMethodName(methodName);</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                    propertyName = getPropertyNameByCompatibleFieldName(fieldCacheMap, methodName, propertyName, 3);</b>
&nbsp;                } else if (c3 == &#39;_&#39;) {
<b class="nc">&nbsp;                    propertyName = methodName.substring(3);</b>
<b class="nc">&nbsp;                    field = fieldCacheMap.get(propertyName);</b>
<b class="nc">&nbsp;                    if (field == null) {</b>
&nbsp;                        String temp = propertyName;
&nbsp;                        propertyName = methodName.substring(4);
&nbsp;                        field = ParserConfig.getFieldFromCache(propertyName, fieldCacheMap);
<b class="nc">&nbsp;                        if (field == null) {</b>
<b class="nc">&nbsp;                            propertyName = temp; //减少修改代码带来的影响</b>
<b class="nc">&nbsp;                        }</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                } else if (c3 == &#39;f&#39;) {</b>
<b class="nc">&nbsp;                    propertyName = methodName.substring(3);</b>
<b class="nc">&nbsp;                } else if (methodName.length() &gt;= 5 &amp;&amp; Character.isUpperCase(methodName.charAt(4))) {</b>
<b class="nc">&nbsp;                    propertyName = decapitalize(methodName.substring(3));</b>
<b class="nc">&nbsp;                } else {</b>
&nbsp;                    propertyName = methodName.substring(3);
&nbsp;                    field = ParserConfig.getFieldFromCache(propertyName, fieldCacheMap);
&nbsp;                    if (field == null) {
<b class="nc">&nbsp;                        continue;</b>
<b class="nc">&nbsp;                    }</b>
&nbsp;                }
&nbsp;                boolean ignore = isJSONTypeIgnore(clazz, propertyName);
<b class="nc">&nbsp;                if (ignore) {</b>
&nbsp;                    continue;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if (field == null) {</b>
<b class="nc">&nbsp;                    // 假如bean的field很多的情况一下，轮询时将大大降低效率</b>
&nbsp;                    field = ParserConfig.getFieldFromCache(propertyName, fieldCacheMap);
&nbsp;                }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;                if (field == null &amp;&amp; propertyName.length() &gt; 1) {</b>
<b class="nc">&nbsp;                    char ch = propertyName.charAt(1);</b>
&nbsp;                    if (ch &gt;= &#39;A&#39; &amp;&amp; ch &lt;= &#39;Z&#39;) {
&nbsp;                        String javaBeanCompatiblePropertyName = decapitalize(methodName.substring(3));
<b class="nc">&nbsp;                        field = ParserConfig.getFieldFromCache(javaBeanCompatiblePropertyName, fieldCacheMap);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;                JSONField fieldAnnotation = null;
<b class="nc">&nbsp;                if (field != null) {</b>
<b class="nc">&nbsp;                    fieldAnnotation = TypeUtils.getAnnotation(field, JSONField.class);</b>
&nbsp;                    if (fieldAnnotation != null) {
&nbsp;                        if (!fieldAnnotation.serialize()) {
<b class="nc">&nbsp;                            continue;</b>
<b class="nc">&nbsp;                        }</b>
<b class="nc">&nbsp;                        ordinal = fieldAnnotation.ordinal();</b>
&nbsp;                        serialzeFeatures = SerializerFeature.of(fieldAnnotation.serialzeFeatures());
&nbsp;                        parserFeatures = Feature.of(fieldAnnotation.parseFeatures());
<b class="nc">&nbsp;                        if (fieldAnnotation.name().length() != 0) {</b>
&nbsp;                            fieldAnnotationAndNameExists = true;
&nbsp;                            propertyName = fieldAnnotation.name();
&nbsp;                            if (aliasMap != null) {
<b class="nc">&nbsp;                                propertyName = aliasMap.get(propertyName);</b>
<b class="nc">&nbsp;                                if (propertyName == null) {</b>
&nbsp;                                    continue;
&nbsp;                                }
<b class="nc">&nbsp;                            }</b>
<b class="nc">&nbsp;                        }</b>
<b class="nc">&nbsp;                        if (fieldAnnotation.label().length() != 0) {</b>
&nbsp;                            label = fieldAnnotation.label();
&nbsp;                        }
<b class="nc">&nbsp;                    }</b>
&nbsp;                }
&nbsp;                if (aliasMap != null) {
&nbsp;                    propertyName = aliasMap.get(propertyName);
<b class="nc">&nbsp;                    if (propertyName == null) {</b>
<b class="nc">&nbsp;                        continue;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                if (propertyNamingStrategy != null &amp;&amp; !fieldAnnotationAndNameExists) {</b>
<b class="nc">&nbsp;                    propertyName = propertyNamingStrategy.translate(propertyName);</b>
<b class="nc">&nbsp;                }</b>
&nbsp;                FieldInfo fieldInfo = new FieldInfo(propertyName, method, field, clazz, null, ordinal, serialzeFeatures, parserFeatures,
&nbsp;                        annotation, fieldAnnotation, label);
<b class="nc">&nbsp;                fieldInfoMap.put(propertyName, fieldInfo);</b>
&nbsp;            }
&nbsp;            if (methodName.startsWith(&quot;is&quot;)) {
&nbsp;                if (methodName.length() &lt; 3) {
<b class="nc">&nbsp;                    continue;</b>
<b class="nc">&nbsp;                }</b>
&nbsp;                if (returnType != Boolean.TYPE
&nbsp;                        &amp;&amp; returnType != Boolean.class) {
<b class="nc">&nbsp;                    continue;</b>
<b class="nc">&nbsp;                }</b>
&nbsp;                char c2 = methodName.charAt(2);
&nbsp;                String propertyName;
<b class="nc">&nbsp;                Field field = null;</b>
<b class="nc">&nbsp;                if (Character.isUpperCase(c2)) {</b>
&nbsp;                    if (compatibleWithJavaBean) {
&nbsp;                        propertyName = decapitalize(methodName.substring(2));
<b class="nc">&nbsp;                    } else {</b>
<b class="nc">&nbsp;                        propertyName = Character.toLowerCase(methodName.charAt(2)) + methodName.substring(3);</b>
&nbsp;                    }
&nbsp;                    propertyName = getPropertyNameByCompatibleFieldName(fieldCacheMap, methodName, propertyName, 2);
<b class="nc">&nbsp;                } else if (c2 == &#39;_&#39;) {</b>
<b class="nc">&nbsp;                    propertyName = methodName.substring(3);</b>
<b class="nc">&nbsp;                    field = fieldCacheMap.get(propertyName);</b>
<b class="nc">&nbsp;                    if (field == null) {</b>
<b class="nc">&nbsp;                        String temp = propertyName;</b>
<b class="nc">&nbsp;                        propertyName = methodName.substring(2);</b>
&nbsp;                        field = ParserConfig.getFieldFromCache(propertyName, fieldCacheMap);
<b class="nc">&nbsp;                        if (field == null) {</b>
<b class="nc">&nbsp;                            propertyName = temp;</b>
&nbsp;                        }
&nbsp;                    }
<b class="nc">&nbsp;                } else if (c2 == &#39;f&#39;) {</b>
<b class="nc">&nbsp;                    propertyName = methodName.substring(2);</b>
<b class="nc">&nbsp;                } else {</b>
&nbsp;                    propertyName = methodName.substring(2);
<b class="nc">&nbsp;                    field = ParserConfig.getFieldFromCache(propertyName, fieldCacheMap);</b>
&nbsp;                    if (field == null) {
&nbsp;                        continue;
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                }</b>
&nbsp;                boolean ignore = isJSONTypeIgnore(clazz, propertyName);
<b class="nc">&nbsp;                if (ignore) {</b>
<b class="nc">&nbsp;                    continue;</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;                if (field == null) {</b>
<b class="nc">&nbsp;                    field = ParserConfig.getFieldFromCache(propertyName, fieldCacheMap);</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;                if (field == null) {</b>
&nbsp;                    field = ParserConfig.getFieldFromCache(methodName, fieldCacheMap);
&nbsp;                }
<b class="nc">&nbsp;                JSONField fieldAnnotation = null;</b>
&nbsp;                if (field != null) {
&nbsp;                    fieldAnnotation = TypeUtils.getAnnotation(field, JSONField.class);
&nbsp;                    if (fieldAnnotation != null) {
<b class="nc">&nbsp;                        if (!fieldAnnotation.serialize()) {</b>
<b class="nc">&nbsp;                            continue;</b>
&nbsp;                        }
<b class="nc">&nbsp;                        ordinal = fieldAnnotation.ordinal();</b>
<b class="nc">&nbsp;                        serialzeFeatures = SerializerFeature.of(fieldAnnotation.serialzeFeatures());</b>
&nbsp;                        parserFeatures = Feature.of(fieldAnnotation.parseFeatures());
<b class="nc">&nbsp;                        if (fieldAnnotation.name().length() != 0) {</b>
&nbsp;                            propertyName = fieldAnnotation.name();
&nbsp;                            if (aliasMap != null) {
&nbsp;                                propertyName = aliasMap.get(propertyName);
<b class="nc">&nbsp;                                if (propertyName == null) {</b>
<b class="nc">&nbsp;                                    continue;</b>
&nbsp;                                }
<b class="nc">&nbsp;                            }</b>
<b class="nc">&nbsp;                        }</b>
&nbsp;                        if (fieldAnnotation.label().length() != 0) {
&nbsp;                            label = fieldAnnotation.label();
<b class="nc">&nbsp;                        }</b>
<b class="nc">&nbsp;                    }</b>
&nbsp;                }
&nbsp;                if (aliasMap != null) {
<b class="nc">&nbsp;                    propertyName = aliasMap.get(propertyName);</b>
<b class="nc">&nbsp;                    if (propertyName == null) {</b>
&nbsp;                        continue;
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                if (propertyNamingStrategy != null) {</b>
<b class="nc">&nbsp;                    propertyName = propertyNamingStrategy.translate(propertyName);</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                //优先选择get</b>
<b class="nc">&nbsp;                if (fieldInfoMap.containsKey(propertyName)) {</b>
&nbsp;                    continue;
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                FieldInfo fieldInfo = new FieldInfo(</b>
<b class="nc">&nbsp;                        propertyName,</b>
&nbsp;                        method,
<b class="nc">&nbsp;                        field,</b>
<b class="nc">&nbsp;                        clazz,</b>
<b class="nc">&nbsp;                        null,</b>
&nbsp;                        ordinal,
<b class="nc">&nbsp;                        serialzeFeatures,</b>
<b class="nc">&nbsp;                        parserFeatures,</b>
<b class="nc">&nbsp;                        annotation,</b>
&nbsp;                        fieldAnnotation,
<b class="nc">&nbsp;                        label</b>
<b class="nc">&nbsp;                );</b>
<b class="nc">&nbsp;                fieldInfoMap.put(propertyName, fieldInfo);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        Field[] fields = clazz.getFields();</b>
&nbsp;        computeFields(clazz, aliasMap, propertyNamingStrategy, fieldInfoMap, fields);
&nbsp;        return getFieldInfos(clazz, sorted, fieldInfoMap);
&nbsp;    }
<b class="nc">&nbsp;</b>
&nbsp;    private static void computeFields(
&nbsp;            Class&lt;?&gt; clazz,
<b class="fc">&nbsp;            Map&lt;String, String&gt; aliasMap,</b>
&nbsp;            PropertyNamingStrategy propertyNamingStrategy,
<b class="nc">&nbsp;            Map&lt;String, FieldInfo&gt; fieldInfoMap,</b>
<b class="nc">&nbsp;            Field[] fields</b>
&nbsp;    ) {
&nbsp;        for (Field field : fields) {
<b class="nc">&nbsp;            if (Modifier.isStatic(field.getModifiers())) {</b>
<b class="nc">&nbsp;                continue;</b>
&nbsp;            }
&nbsp;            JSONField fieldAnnotation = TypeUtils.getAnnotation(field, JSONField.class);
<b class="nc">&nbsp;            int ordinal = 0, serialzeFeatures = 0, parserFeatures = 0;</b>
<b class="nc">&nbsp;            String propertyName = field.getName();</b>
&nbsp;            String label = null;
<b class="nc">&nbsp;            if (fieldAnnotation != null) {</b>
&nbsp;                if (!fieldAnnotation.serialize()) {
&nbsp;                    continue;
&nbsp;                }
&nbsp;                ordinal = fieldAnnotation.ordinal();
&nbsp;                serialzeFeatures = SerializerFeature.of(fieldAnnotation.serialzeFeatures());
<b class="nc">&nbsp;                parserFeatures = Feature.of(fieldAnnotation.parseFeatures());</b>
<b class="nc">&nbsp;                if (fieldAnnotation.name().length() != 0) {</b>
<b class="nc">&nbsp;                    propertyName = fieldAnnotation.name();</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                if (fieldAnnotation.label().length() != 0) {</b>
<b class="nc">&nbsp;                    label = fieldAnnotation.label();</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (aliasMap != null) {</b>
<b class="nc">&nbsp;                propertyName = aliasMap.get(propertyName);</b>
<b class="nc">&nbsp;                if (propertyName == null) {</b>
<b class="nc">&nbsp;                    continue;</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (propertyNamingStrategy != null) {</b>
&nbsp;                propertyName = propertyNamingStrategy.translate(propertyName);
<b class="nc">&nbsp;            }</b>
&nbsp;            if (!fieldInfoMap.containsKey(propertyName)) {
&nbsp;                FieldInfo fieldInfo = new FieldInfo(propertyName, null, field, clazz, null, ordinal, serialzeFeatures, parserFeatures,
<b class="nc">&nbsp;                        null, fieldAnnotation, label);</b>
<b class="nc">&nbsp;                fieldInfoMap.put(propertyName, fieldInfo);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
&nbsp;    private static List&lt;FieldInfo&gt; getFieldInfos(Class&lt;?&gt; clazz, boolean sorted, Map&lt;String, FieldInfo&gt; fieldInfoMap) {
&nbsp;        List&lt;FieldInfo&gt; fieldInfoList = new ArrayList&lt;FieldInfo&gt;();
<b class="nc">&nbsp;        String[] orders = null;</b>
<b class="nc">&nbsp;        JSONType annotation = TypeUtils.getAnnotation(clazz, JSONType.class);</b>
<b class="nc">&nbsp;        if (annotation != null) {</b>
&nbsp;            orders = annotation.orders();
&nbsp;        }
<b class="nc">&nbsp;        if (orders != null &amp;&amp; orders.length &gt; 0) {</b>
<b class="nc">&nbsp;            LinkedHashMap&lt;String, FieldInfo&gt; map = new LinkedHashMap&lt;String, FieldInfo&gt;(fieldInfoMap.size());</b>
<b class="nc">&nbsp;            for (FieldInfo field : fieldInfoMap.values()) {</b>
&nbsp;                map.put(field.name, field);
<b class="nc">&nbsp;            }</b>
&nbsp;            for (String item : orders) {
&nbsp;                FieldInfo field = map.get(item);
<b class="nc">&nbsp;                if (field != null) {</b>
<b class="nc">&nbsp;                    fieldInfoList.add(field);</b>
<b class="nc">&nbsp;                    map.remove(item);</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            fieldInfoList.addAll(map.values());</b>
<b class="nc">&nbsp;        } else {</b>
<b class="nc">&nbsp;            fieldInfoList.addAll(fieldInfoMap.values());</b>
<b class="nc">&nbsp;            if (sorted) {</b>
<b class="nc">&nbsp;                Collections.sort(fieldInfoList);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return fieldInfoList;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    static void setAccessible(AccessibleObject obj) {
&nbsp;        if (!setAccessibleEnable) {
<b class="nc">&nbsp;            return;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;        if (obj.isAccessible()) {
&nbsp;            return;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        try {</b>
&nbsp;            obj.setAccessible(true);
&nbsp;        } catch (Throwable error) {
<b class="nc">&nbsp;            setAccessibleEnable = false;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public static boolean isKotlin(Class clazz) {</b>
<b class="nc">&nbsp;        if (kotlin_metadata == null &amp;&amp; !kotlin_metadata_error) {</b>
&nbsp;            try {
&nbsp;                kotlin_metadata = Class.forName(&quot;kotlin.Metadata&quot;);
<b class="nc">&nbsp;            } catch (Throwable e) {</b>
<b class="nc">&nbsp;                kotlin_metadata_error = true;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return kotlin_metadata != null &amp;&amp; clazz.isAnnotationPresent(kotlin_metadata);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static Constructor getKotlinConstructor(Constructor[] constructors) {
<b class="nc">&nbsp;        return getKotlinConstructor(constructors, null);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static Constructor getKotlinConstructor(Constructor[] constructors, String[] paramNames) {
<b class="nc">&nbsp;        Constructor creatorConstructor = null;</b>
<b class="nc">&nbsp;        for (Constructor&lt;?&gt; constructor : constructors) {</b>
&nbsp;            Class&lt;?&gt;[] parameterTypes = constructor.getParameterTypes();
&nbsp;            if (paramNames != null &amp;&amp; parameterTypes.length != paramNames.length) {
<b class="nc">&nbsp;                continue;</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            if (parameterTypes.length &gt; 0 &amp;&amp; parameterTypes[parameterTypes.length - 1].getName().equals(&quot;kotlin.jvm.internal.DefaultConstructorMarker&quot;)) {
<b class="nc">&nbsp;                continue;</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            if (creatorConstructor != null &amp;&amp; creatorConstructor.getParameterTypes().length &gt;= parameterTypes.length) {
&nbsp;                continue;
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            creatorConstructor = constructor;</b>
&nbsp;        }
&nbsp;        return creatorConstructor;
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
&nbsp;    public static String[] getKoltinConstructorParameters(Class clazz) {
&nbsp;        if (kotlin_kclass_constructor == null &amp;&amp; !kotlin_class_klass_error) {
<b class="nc">&nbsp;            try {</b>
<b class="nc">&nbsp;                Class class_kotlin_kclass = Class.forName(&quot;kotlin.reflect.jvm.internal.KClassImpl&quot;);</b>
&nbsp;                kotlin_kclass_constructor = class_kotlin_kclass.getConstructor(Class.class);
&nbsp;            } catch (Throwable e) {
<b class="nc">&nbsp;                kotlin_class_klass_error = true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        if (kotlin_kclass_constructor == null) {</b>
&nbsp;            return null;
&nbsp;        }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        if (kotlin_kclass_getConstructors == null &amp;&amp; !kotlin_class_klass_error) {</b>
&nbsp;            try {
&nbsp;                Class class_kotlin_kclass = Class.forName(&quot;kotlin.reflect.jvm.internal.KClassImpl&quot;);
<b class="nc">&nbsp;                kotlin_kclass_getConstructors = class_kotlin_kclass.getMethod(&quot;getConstructors&quot;);</b>
<b class="nc">&nbsp;            } catch (Throwable e) {</b>
&nbsp;                kotlin_class_klass_error = true;
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        if (kotlin_kfunction_getParameters == null &amp;&amp; !kotlin_class_klass_error) {
<b class="nc">&nbsp;            try {</b>
<b class="nc">&nbsp;                Class class_kotlin_kfunction = Class.forName(&quot;kotlin.reflect.KFunction&quot;);</b>
<b class="nc">&nbsp;                kotlin_kfunction_getParameters = class_kotlin_kfunction.getMethod(&quot;getParameters&quot;);</b>
<b class="nc">&nbsp;            } catch (Throwable e) {</b>
&nbsp;                kotlin_class_klass_error = true;
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        if (kotlin_kparameter_getName == null &amp;&amp; !kotlin_class_klass_error) {
<b class="nc">&nbsp;            try {</b>
<b class="nc">&nbsp;                Class class_kotlinn_kparameter = Class.forName(&quot;kotlin.reflect.KParameter&quot;);</b>
<b class="nc">&nbsp;                kotlin_kparameter_getName = class_kotlinn_kparameter.getMethod(&quot;getName&quot;);</b>
<b class="nc">&nbsp;            } catch (Throwable e) {</b>
<b class="nc">&nbsp;                kotlin_class_klass_error = true;</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (kotlin_error) {</b>
<b class="nc">&nbsp;            return null;</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        try {</b>
<b class="nc">&nbsp;            Object constructor = null;</b>
&nbsp;            Object kclassImpl = kotlin_kclass_constructor.newInstance(clazz);
&nbsp;            Iterable it = (Iterable) kotlin_kclass_getConstructors.invoke(kclassImpl);
<b class="nc">&nbsp;            for (Iterator iterator = it.iterator(); iterator.hasNext(); iterator.hasNext()) {</b>
<b class="nc">&nbsp;                Object item = iterator.next();</b>
&nbsp;                List parameters = (List) kotlin_kfunction_getParameters.invoke(item);
&nbsp;                if (constructor != null &amp;&amp; parameters.size() == 0) {
<b class="nc">&nbsp;                    continue;</b>
<b class="nc">&nbsp;                }</b>
&nbsp;                constructor = item;
&nbsp;            }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            if (constructor == null) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
&nbsp;            List parameters = (List) kotlin_kfunction_getParameters.invoke(constructor);
<b class="nc">&nbsp;            String[] names = new String[parameters.size()];</b>
<b class="nc">&nbsp;            for (int i = 0; i &lt; parameters.size(); i++) {</b>
<b class="nc">&nbsp;                Object param = parameters.get(i);</b>
<b class="nc">&nbsp;                names[i] = (String) kotlin_kparameter_getName.invoke(param);</b>
&nbsp;            }
<b class="nc">&nbsp;            return names;</b>
&nbsp;        } catch (Throwable e) {
&nbsp;            e.printStackTrace();
&nbsp;            kotlin_error = true;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return null;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    static boolean isKotlinIgnore(Class clazz, String methodName) {</b>
<b class="nc">&nbsp;        if (kotlinIgnores == null &amp;&amp; !kotlinIgnores_error) {</b>
&nbsp;            try {
<b class="nc">&nbsp;                Map&lt;Class, String[]&gt; map = new HashMap&lt;Class, String[]&gt;();</b>
&nbsp;                Class charRangeClass = Class.forName(&quot;kotlin.ranges.CharRange&quot;);
&nbsp;                map.put(charRangeClass, new String[]{&quot;getEndInclusive&quot;, &quot;isEmpty&quot;});
&nbsp;                Class intRangeClass = Class.forName(&quot;kotlin.ranges.IntRange&quot;);
&nbsp;                map.put(intRangeClass, new String[]{&quot;getEndInclusive&quot;, &quot;isEmpty&quot;});
&nbsp;                Class longRangeClass = Class.forName(&quot;kotlin.ranges.LongRange&quot;);
<b class="nc">&nbsp;                map.put(longRangeClass, new String[]{&quot;getEndInclusive&quot;, &quot;isEmpty&quot;});</b>
<b class="nc">&nbsp;                Class floatRangeClass = Class.forName(&quot;kotlin.ranges.ClosedFloatRange&quot;);</b>
<b class="nc">&nbsp;                map.put(floatRangeClass, new String[]{&quot;getEndInclusive&quot;, &quot;isEmpty&quot;});</b>
<b class="nc">&nbsp;                Class doubleRangeClass = Class.forName(&quot;kotlin.ranges.ClosedDoubleRange&quot;);</b>
&nbsp;                map.put(doubleRangeClass, new String[]{&quot;getEndInclusive&quot;, &quot;isEmpty&quot;});
&nbsp;                kotlinIgnores = map;
<b class="nc">&nbsp;            } catch (Throwable error) {</b>
<b class="nc">&nbsp;                kotlinIgnores_error = true;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (kotlinIgnores == null) {</b>
<b class="nc">&nbsp;            return false;</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        String[] ignores = kotlinIgnores.get(clazz);</b>
&nbsp;        return ignores != null &amp;&amp; Arrays.binarySearch(ignores, methodName) &gt;= 0;
&nbsp;    }
<b class="nc">&nbsp;</b>
&nbsp;    private static boolean isJSONTypeIgnore(Class&lt;?&gt; clazz, String propertyName) {
&nbsp;        JSONType jsonType = TypeUtils.getAnnotation(clazz, JSONType.class);
<b class="nc">&nbsp;        if (jsonType != null) {</b>
<b class="nc">&nbsp;            // 1、新增 includes 支持，如果 JSONType 同时设置了includes 和 ignores 属性，则以includes为准。</b>
<b class="nc">&nbsp;            // 2、个人认为对于大小写敏感的Java和JS而言，使用 equals() 比 equalsIgnoreCase() 更好，改动的唯一风险就是向后兼容性的问题</b>
<b class="nc">&nbsp;            // 不过，相信开发者应该都是严格按照大小写敏感的方式进行属性设置的</b>
<b class="nc">&nbsp;            String[] fields = jsonType.includes();</b>
&nbsp;            if (fields.length &gt; 0) {
&nbsp;                for (String field : fields) {
&nbsp;                    if (propertyName.equals(field)) {
<b class="nc">&nbsp;                        return false;</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                return true;</b>
<b class="nc">&nbsp;            } else {</b>
&nbsp;                fields = jsonType.ignores();
&nbsp;                for (String field : fields) {
<b class="nc">&nbsp;                    if (propertyName.equals(field)) {</b>
<b class="nc">&nbsp;                        return true;</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                }</b>
&nbsp;            }
&nbsp;        }
&nbsp;        if (clazz.getSuperclass() != Object.class &amp;&amp; clazz.getSuperclass() != null) {
&nbsp;            return isJSONTypeIgnore(clazz.getSuperclass(), propertyName);
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static JSONField getSuperMethodAnnotation(final Class&lt;?&gt; clazz, final Method method) {</b>
&nbsp;        Class&lt;?&gt;[] interfaces = clazz.getInterfaces();
<b class="nc">&nbsp;        if (interfaces.length &gt; 0) {</b>
<b class="nc">&nbsp;            Class&lt;?&gt;[] types = method.getParameterTypes();</b>
&nbsp;            for (Class&lt;?&gt; interfaceClass : interfaces) {
<b class="nc">&nbsp;                for (Method interfaceMethod : interfaceClass.getMethods()) {</b>
<b class="nc">&nbsp;                    Class&lt;?&gt;[] interfaceTypes = interfaceMethod.getParameterTypes();</b>
<b class="nc">&nbsp;                    if (interfaceTypes.length != types.length) {</b>
<b class="nc">&nbsp;                        continue;</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                    if (!interfaceMethod.getName().equals(method.getName())) {</b>
&nbsp;                        continue;
&nbsp;                    }
<b class="nc">&nbsp;                    boolean match = true;</b>
<b class="nc">&nbsp;                    for (int i = 0; i &lt; types.length; ++i) {</b>
&nbsp;                        if (!interfaceTypes[i].equals(types[i])) {
<b class="nc">&nbsp;                            match = false;</b>
&nbsp;                            break;
&nbsp;                        }
&nbsp;                    }
&nbsp;                    if (!match) {
<b class="nc">&nbsp;                        continue;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    JSONField annotation = TypeUtils.getAnnotation(interfaceMethod, JSONField.class);</b>
<b class="nc">&nbsp;                    if (annotation != null) {</b>
<b class="nc">&nbsp;                        return annotation;</b>
<b class="nc">&nbsp;                    }</b>
<b class="nc">&nbsp;                }</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;        Class&lt;?&gt; superClass = clazz.getSuperclass();
<b class="nc">&nbsp;        if (superClass == null) {</b>
<b class="nc">&nbsp;            return null;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;        if (Modifier.isAbstract(superClass.getModifiers())) {
<b class="nc">&nbsp;            Class&lt;?&gt;[] types = method.getParameterTypes();</b>
&nbsp;            for (Method interfaceMethod : superClass.getMethods()) {
&nbsp;                Class&lt;?&gt;[] interfaceTypes = interfaceMethod.getParameterTypes();
<b class="nc">&nbsp;                if (interfaceTypes.length != types.length) {</b>
&nbsp;                    continue;
&nbsp;                }
<b class="nc">&nbsp;                if (!interfaceMethod.getName().equals(method.getName())) {</b>
<b class="nc">&nbsp;                    continue;</b>
<b class="nc">&nbsp;                }</b>
&nbsp;                boolean match = true;
&nbsp;                for (int i = 0; i &lt; types.length; ++i) {
&nbsp;                    if (!interfaceTypes[i].equals(types[i])) {
<b class="nc">&nbsp;                        match = false;</b>
&nbsp;                        break;
&nbsp;                    }
&nbsp;                }
&nbsp;                if (!match) {
<b class="nc">&nbsp;                    continue;</b>
<b class="nc">&nbsp;                }</b>
&nbsp;                JSONField annotation = TypeUtils.getAnnotation(interfaceMethod, JSONField.class);
<b class="nc">&nbsp;                if (annotation != null) {</b>
<b class="nc">&nbsp;                    return annotation;</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
&nbsp;    private static String getPropertyNameByCompatibleFieldName(Map&lt;String, Field&gt; fieldCacheMap, String methodName,
<b class="nc">&nbsp;                                                               String propertyName, int fromIdx) {</b>
<b class="nc">&nbsp;        if (compatibleWithFieldName) {</b>
<b class="nc">&nbsp;            if (!fieldCacheMap.containsKey(propertyName)) {</b>
&nbsp;                String tempPropertyName = methodName.substring(fromIdx);
<b class="nc">&nbsp;                return fieldCacheMap.containsKey(tempPropertyName) ? tempPropertyName : propertyName;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return propertyName;</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public static String decapitalize(String name) {</b>
<b class="nc">&nbsp;        if (name == null || name.length() == 0) {</b>
<b class="nc">&nbsp;            return name;</b>
&nbsp;        }
&nbsp;        if (name.length() &gt; 1 &amp;&amp; Character.isUpperCase(name.charAt(1)) &amp;&amp; Character.isUpperCase(name.charAt(0))) {
&nbsp;            return name;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        char[] chars = name.toCharArray();</b>
<b class="nc">&nbsp;        chars[0] = Character.toLowerCase(chars[0]);</b>
<b class="nc">&nbsp;        return new String(chars);</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    /**</b>
<b class="nc">&nbsp;     * resolve property name from get/set method name</b>
<b class="nc">&nbsp;     *</b>
<b class="nc">&nbsp;     * @param methodName get/set method name</b>
<b class="nc">&nbsp;     * @return property name</b>
&nbsp;     */
&nbsp;    public static String getPropertyNameByMethodName(String methodName) {
<b class="nc">&nbsp;        return Character.toLowerCase(methodName.charAt(3)) + methodName.substring(4);</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static Annotation[][] getParameterAnnotations(Constructor constructor) {</b>
&nbsp;        Annotation[][] targetAnnotations = constructor.getParameterAnnotations();
&nbsp;
&nbsp;        Class&lt;?&gt; clazz = constructor.getDeclaringClass();
<b class="nc">&nbsp;        Annotation[][] mixInAnnotations;</b>
<b class="nc">&nbsp;        Class&lt;?&gt; mixInClass = null;</b>
<b class="nc">&nbsp;        Type type = JSON.getMixInAnnotations(clazz);</b>
<b class="nc">&nbsp;        if (type instanceof Class&lt;?&gt;) {</b>
<b class="nc">&nbsp;            mixInClass = (Class&lt;?&gt;) type;</b>
&nbsp;        }
&nbsp;
&nbsp;        if (mixInClass != null) {
<b class="nc">&nbsp;            Constructor mixInConstructor = null;</b>
<b class="nc">&nbsp;            Class&lt;?&gt;[] parameterTypes = constructor.getParameterTypes();</b>
<b class="nc">&nbsp;            // 构建参数列表，因为内部类的构造函数需要传入外部类的引用</b>
<b class="nc">&nbsp;            List&lt;Class&lt;?&gt;&gt; enclosingClasses = new ArrayList&lt;Class&lt;?&gt;&gt;(2);</b>
<b class="nc">&nbsp;            for (Class&lt;?&gt; enclosingClass = mixInClass.getEnclosingClass(); enclosingClass != null; enclosingClass = enclosingClass.getEnclosingClass()) {</b>
<b class="nc">&nbsp;                enclosingClasses.add(enclosingClass);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            int level = enclosingClasses.size();
&nbsp;            // 递归从MixIn类的父类中查找注解（如果有父类的话）
<b class="nc">&nbsp;            for (Class&lt;?&gt; currClass = mixInClass; currClass != null &amp;&amp; currClass != Object.class; currClass = currClass.getSuperclass()) {</b>
&nbsp;                try {
&nbsp;                    if (level != 0) {
<b class="nc">&nbsp;                        Class&lt;?&gt;[] outerClassAndParameterTypes = new Class[level + parameterTypes.length];</b>
<b class="nc">&nbsp;                        System.arraycopy(parameterTypes, 0, outerClassAndParameterTypes, level, parameterTypes.length);</b>
<b class="nc">&nbsp;                        for (int i = level; i &gt; 0; i--) {</b>
&nbsp;                            outerClassAndParameterTypes[i - 1] = enclosingClasses.get(i - 1);
<b class="nc">&nbsp;                        }</b>
<b class="nc">&nbsp;                        mixInConstructor = mixInClass.getDeclaredConstructor(outerClassAndParameterTypes);</b>
<b class="nc">&nbsp;                    } else {</b>
<b class="nc">&nbsp;                        mixInConstructor = mixInClass.getDeclaredConstructor(parameterTypes);</b>
<b class="nc">&nbsp;                    }</b>
&nbsp;                    break;
&nbsp;                } catch (NoSuchMethodException e) {
&nbsp;                    level--;
<b class="nc">&nbsp;                }</b>
&nbsp;            }
&nbsp;            if (mixInConstructor == null) {
&nbsp;                return targetAnnotations;
&nbsp;            }
&nbsp;            mixInAnnotations = mixInConstructor.getParameterAnnotations();
<b class="nc">&nbsp;            if (mixInAnnotations != null) {</b>
<b class="nc">&nbsp;                return mixInAnnotations;</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
&nbsp;        return targetAnnotations;
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static class MethodInheritanceComparator</b>
<b class="nc">&nbsp;            implements Comparator&lt;Method&gt; {</b>
<b class="nc">&nbsp;        public int compare(Method m1, Method m2) {</b>
<b class="nc">&nbsp;            int cmp = m1.getName().compareTo(m2.getName());</b>
&nbsp;            if (cmp != 0) {
<b class="nc">&nbsp;                return cmp;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            Class&lt;?&gt; class1 = m1.getReturnType();</b>
&nbsp;            Class&lt;?&gt; class2 = m2.getReturnType();
&nbsp;
&nbsp;            if (class1.equals(class2)) {
<b class="nc">&nbsp;                return 0;</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;</b>
&nbsp;            if (class1.isAssignableFrom(class2)) {
<b class="nc">&nbsp;                return -1;</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            if (class2.isAssignableFrom(class1)) {</b>
<b class="nc">&nbsp;                return 1;</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            return 0;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-09 23:27</div>
</div>
</body>
</html>
