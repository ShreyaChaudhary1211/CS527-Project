


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > JSON</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.alibaba.fastjson</a>
</div>

<h1>Coverage Summary for Class: JSON (com.alibaba.fastjson)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">JSON</td>
<td class="coverageStat">
  <span class="percent">
    21.5%
  </span>
  <span class="absValue">
    (20/93)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    15.6%
  </span>
  <span class="absValue">
    (78/500)
  </span>
</td>
</tr>
  <tr>
    <td class="name">JSON$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">JSON$Cache</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    21.1%
  </span>
  <span class="absValue">
    (20/95)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    15.5%
  </span>
  <span class="absValue">
    (78/502)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.alibaba.fastjson;
&nbsp;
&nbsp;import com.alibaba.fastjson.parser.Feature;
&nbsp;import com.alibaba.fastjson.parser.ParserConfig;
&nbsp;import com.alibaba.fastjson.parser.deserializer.ParseProcess;
&nbsp;import com.alibaba.fastjson.serializer.*;
&nbsp;import com.alibaba.fastjson.util.IOUtils;
&nbsp;import com.alibaba.fastjson2.JSONFactory;
&nbsp;import com.alibaba.fastjson2.JSONReader;
&nbsp;import com.alibaba.fastjson2.JSONWriter;
&nbsp;import com.alibaba.fastjson2.filter.Filter;
&nbsp;import com.alibaba.fastjson2.filter.PropertyFilter;
&nbsp;import com.alibaba.fastjson2.filter.PropertyPreFilter;
&nbsp;import com.alibaba.fastjson2.filter.ValueFilter;
&nbsp;import com.alibaba.fastjson2.reader.ObjectReader;
&nbsp;import com.alibaba.fastjson2.reader.ObjectReaderProvider;
&nbsp;import com.alibaba.fastjson2.support.AwtRederModule;
&nbsp;import com.alibaba.fastjson2.support.AwtWriterModule;
&nbsp;import com.alibaba.fastjson2.util.ParameterizedTypeImpl;
&nbsp;import com.alibaba.fastjson2.writer.ObjectWriter;
&nbsp;import com.alibaba.fastjson2.writer.ObjectWriterProvider;
&nbsp;
&nbsp;import java.io.IOException;
&nbsp;import java.io.InputStream;
&nbsp;import java.io.OutputStream;
&nbsp;import java.lang.reflect.Type;
&nbsp;import java.nio.ByteBuffer;
&nbsp;import java.nio.CharBuffer;
&nbsp;import java.nio.charset.Charset;
&nbsp;import java.nio.charset.CharsetDecoder;
&nbsp;import java.nio.charset.StandardCharsets;
&nbsp;import java.util.*;
&nbsp;import java.util.concurrent.atomic.AtomicReferenceFieldUpdater;
&nbsp;import java.util.function.Supplier;
&nbsp;
&nbsp;public class JSON {
&nbsp;    private static TimeZone DEFAULT_TIME_ZONE = TimeZone.getDefault();
&nbsp;    public static final String VERSION = com.alibaba.fastjson2.JSON.VERSION;
&nbsp;    static final Cache CACHE = new Cache();
&nbsp;    static final AtomicReferenceFieldUpdater&lt;Cache, char[]&gt; CHARS_UPDATER
&nbsp;            = AtomicReferenceFieldUpdater.newUpdater(Cache.class, char[].class, &quot;chars&quot;);
&nbsp;    public static TimeZone defaultTimeZone = DEFAULT_TIME_ZONE;
&nbsp;    public static Locale defaultLocale = Locale.getDefault();
&nbsp;    public static String DEFAULT_TYPE_KEY = &quot;@type&quot;;
&nbsp;    public static String DEFFAULT_DATE_FORMAT = &quot;yyyy-MM-dd HH:mm:ss&quot;;
&nbsp;    public static int DEFAULT_PARSER_FEATURE;
&nbsp;    public static int DEFAULT_GENERATE_FEATURE;
&nbsp;
&nbsp;    static {
&nbsp;        int features = 0;
&nbsp;        features |= Feature.AutoCloseSource.getMask();
&nbsp;        features |= Feature.InternFieldNames.getMask();
&nbsp;        features |= Feature.UseBigDecimal.getMask();
&nbsp;        features |= Feature.AllowUnQuotedFieldNames.getMask();
&nbsp;        features |= Feature.AllowSingleQuotes.getMask();
&nbsp;        features |= Feature.AllowArbitraryCommas.getMask();
&nbsp;        features |= Feature.SortFeidFastMatch.getMask();
&nbsp;        features |= Feature.IgnoreNotMatch.getMask();
&nbsp;        DEFAULT_PARSER_FEATURE = features;
&nbsp;    }
&nbsp;
&nbsp;    static {
&nbsp;        int features = 0;
&nbsp;        features |= SerializerFeature.QuoteFieldNames.getMask();
<b class="fc">&nbsp;        features |= SerializerFeature.SkipTransientField.getMask();</b>
<b class="fc">&nbsp;        features |= SerializerFeature.WriteEnumUsingName.getMask();</b>
<b class="fc">&nbsp;        features |= SerializerFeature.SortField.getMask();</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;        DEFAULT_GENERATE_FEATURE = features;</b>
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    static final Supplier&lt;List&gt; arraySupplier = JSONArray::new;
&nbsp;    static final Supplier&lt;Map&gt; defaultSupplier = JSONObject::new;
<b class="fc">&nbsp;    static final Supplier&lt;Map&gt; orderedSupplier = () -&gt; new JSONObject(true);</b>
&nbsp;
&nbsp;    static {
<b class="fc">&nbsp;        ObjectReaderProvider readerProvider = JSONFactory.getDefaultObjectReaderProvider();</b>
<b class="fc">&nbsp;        readerProvider.register(AwtRederModule.INSTANCE);</b>
<b class="fc">&nbsp;        readerProvider.register(new Fastjson1xReaderModule(readerProvider));</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;        ObjectWriterProvider writerProvider = JSONFactory.getDefaultObjectWriterProvider();</b>
<b class="fc">&nbsp;        writerProvider.register(AwtWriterModule.INSTANCE);</b>
<b class="fc">&nbsp;        writerProvider.register(new Fastjson1xWriterModule(writerProvider));</b>
<b class="fc">&nbsp;    }</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;    static JSONReader.Context createReadContext(int featuresValue, Feature... features) {</b>
&nbsp;        return createReadContext(JSONFactory.getDefaultObjectReaderProvider(), featuresValue, features);
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    static JSONReader.Context createReadContext(ObjectReaderProvider provider, int featuresValue, Feature... features) {</b>
<b class="fc">&nbsp;        for (Feature feature : features) {</b>
<b class="fc">&nbsp;            featuresValue |= feature.mask;</b>
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;</b>
&nbsp;        JSONReader.Context context = new JSONReader.Context(provider);
<b class="fc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; Feature.UseBigDecimal.mask) == 0) {
<b class="fc">&nbsp;            context.config(JSONReader.Feature.UseBigDecimalForDoubles);</b>
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; Feature.SupportArrayToBean.mask) != 0) {
&nbsp;            context.config(JSONReader.Feature.SupportArrayToBean);
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;        if ((featuresValue &amp; Feature.ErrorOnEnumNotMatch.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.ErrorOnEnumNotMatch);</b>
<b class="fc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; Feature.SupportNonPublicField.mask) != 0) {
&nbsp;            context.config(JSONReader.Feature.FieldBased);
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if ((featuresValue &amp; Feature.SupportClassForName.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.SupportClassForName);</b>
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; Feature.TrimStringFieldValue.mask) != 0) {
&nbsp;            context.config(JSONReader.Feature.TrimString);
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; Feature.ErrorOnNotSupportAutoType.mask) != 0) {
<b class="nc">&nbsp;            context.config(JSONReader.Feature.ErrorOnNotSupportAutoType);</b>
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; Feature.AllowUnQuotedFieldNames.mask) != 0) {
&nbsp;            context.config(JSONReader.Feature.AllowUnQuotedFieldNames);
<b class="fc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.UseNativeJavaObject.mask) != 0) {</b>
&nbsp;            context.config(JSONReader.Feature.UseNativeObject);
&nbsp;        } else {
&nbsp;            context.setArraySupplier(arraySupplier);
&nbsp;            context.setObjectSupplier(
&nbsp;                    (featuresValue &amp; Feature.OrderedField.mask) != 0
&nbsp;                            ? orderedSupplier
&nbsp;                            : defaultSupplier
&nbsp;            );
&nbsp;        }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.NonStringKeyAsString.mask) != 0) {</b>
&nbsp;            context.config(JSONReader.Feature.NonStringKeyAsString);
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; Feature.DisableFieldSmartMatch.mask) == 0) {
&nbsp;            context.config(JSONReader.Feature.SupportSmartMatch);
&nbsp;        }
<b class="fc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; Feature.SupportAutoType.mask) != 0) {
&nbsp;            context.config(JSONReader.Feature.SupportAutoType);
&nbsp;        }
&nbsp;
&nbsp;        String defaultDateFormat = JSON.DEFFAULT_DATE_FORMAT;
&nbsp;        if (!&quot;yyyy-MM-dd HH:mm:ss&quot;.equals(defaultDateFormat)) {
&nbsp;            context.setDateFormat(defaultDateFormat);
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        return context;
&nbsp;    }
&nbsp;
&nbsp;    public static JSONObject parseObject(String str) {
&nbsp;        if (str == null || str.isEmpty()) {
&nbsp;            return null;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
&nbsp;                DEFAULT_PARSER_FEATURE
<b class="nc">&nbsp;        );</b>
&nbsp;        JSONReader reader = JSONReader.of(str, context);
&nbsp;
&nbsp;        try {
&nbsp;            Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
&nbsp;            reader.read(map, 0);
&nbsp;            JSONObject jsonObject = new JSONObject(map);
&nbsp;            reader.handleResolveTasks(jsonObject);
<b class="fc">&nbsp;            return jsonObject;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
&nbsp;            Throwable cause = e.getCause();
&nbsp;            if (cause == null) {
<b class="fc">&nbsp;                cause = e;</b>
<b class="fc">&nbsp;            }</b>
&nbsp;            throw new JSONException(e.getMessage(), cause);
<b class="fc">&nbsp;        }</b>
&nbsp;    }
<b class="fc">&nbsp;</b>
&nbsp;    public static JSONObject parseObject(String text, Feature... features) {
<b class="fc">&nbsp;        if (text == null || text.isEmpty()) {</b>
&nbsp;            return null;
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        JSONReader.Context context = createReadContext(</b>
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
<b class="nc">&nbsp;        );</b>
<b class="nc">&nbsp;        JSONReader reader = JSONReader.of(text, context);</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        String defaultDateFormat = JSON.DEFFAULT_DATE_FORMAT;</b>
&nbsp;        if (!&quot;yyyy-MM-dd HH:mm:ss&quot;.equals(defaultDateFormat)) {
<b class="nc">&nbsp;            context.setDateFormat(defaultDateFormat);</b>
&nbsp;        }
&nbsp;
&nbsp;        boolean ordered = false;
<b class="nc">&nbsp;        for (Feature feature : features) {</b>
<b class="nc">&nbsp;            if (feature == Feature.OrderedField) {</b>
&nbsp;                ordered = true;
&nbsp;                break;
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
&nbsp;        try {
&nbsp;            Map&lt;String, Object&gt; map = ordered ? new LinkedHashMap() : new HashMap&lt;&gt;();
<b class="nc">&nbsp;            reader.read(map, 0);</b>
&nbsp;            JSONObject jsonObject = new JSONObject(map);
&nbsp;            reader.handleResolveTasks(jsonObject);
&nbsp;            return jsonObject;
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
&nbsp;            Throwable cause = e.getCause();
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static &lt;T&gt; T parseObject(char[] str, Class&lt;T&gt; objectClass, Feature... features) {</b>
&nbsp;        if (str == null || str.length == 0) {
<b class="nc">&nbsp;            return null;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
<b class="nc">&nbsp;                DEFAULT_PARSER_FEATURE,</b>
&nbsp;                features
<b class="nc">&nbsp;        );</b>
&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectClass);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
&nbsp;                jsonReader.handleResolveTasks(object);
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
&nbsp;            Throwable cause = e.getCause();
&nbsp;            if (cause == null) {
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
&nbsp;            throw new JSONException(e.getMessage(), cause);
&nbsp;        }
<b class="fc">&nbsp;    }</b>
<b class="fc">&nbsp;</b>
<b class="fc">&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)</b>
&nbsp;    public static &lt;T&gt; T parseObject(String str, Class&lt;T&gt; objectClass, ParseProcess processor, Feature... features) {
&nbsp;        if (str == null || str.isEmpty()) {
&nbsp;            return null;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);
&nbsp;        context.config(processor);
&nbsp;
&nbsp;        try {
&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectClass);
&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);
&nbsp;            if (object != null) {
&nbsp;                jsonReader.handleResolveTasks(object);
&nbsp;            }
&nbsp;            return object;
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
<b class="fc">&nbsp;            Throwable cause = e.getCause();</b>
&nbsp;            if (cause == null) {
&nbsp;                cause = e;
&nbsp;            }
&nbsp;            throw new JSONException(e.getMessage(), cause);
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(String str, TypeReference typeReference, Feature... features) {
&nbsp;        return parseObject(str, typeReference.getType(), features);
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(String str, Class&lt;T&gt; objectClass) {
&nbsp;        if (str == null || str.isEmpty()) {
&nbsp;            return null;
&nbsp;        }
&nbsp;
&nbsp;        JSONReader.Context context = createReadContext(
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
&nbsp;                DEFAULT_PARSER_FEATURE
&nbsp;        );
&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);
<b class="fc">&nbsp;</b>
&nbsp;        try {
&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectClass);
&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);
&nbsp;            if (object != null) {
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
&nbsp;            return object;
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
&nbsp;            Throwable cause = e.getCause();
&nbsp;            if (cause == null) {
&nbsp;                cause = e;
&nbsp;            }
&nbsp;            throw new JSONException(e.getMessage(), cause);
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(String str, Class&lt;T&gt; objectType, Feature... features) {
&nbsp;        if (str == null || str.isEmpty()) {
&nbsp;            return null;
&nbsp;        }
&nbsp;
&nbsp;        JSONReader.Context context = createReadContext(
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);</b>
&nbsp;
&nbsp;        try {
&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectType);
&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);
<b class="nc">&nbsp;            if (object != null) {</b>
&nbsp;                jsonReader.handleResolveTasks(object);
&nbsp;            }
&nbsp;            return object;
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
&nbsp;                cause = e;
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public static &lt;T&gt; T parseObject(String str, Type objectType, Feature... features) {</b>
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
&nbsp;            return null;
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
<b class="nc">&nbsp;                DEFAULT_PARSER_FEATURE,</b>
&nbsp;                features
&nbsp;        );
&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);
&nbsp;
&nbsp;        try {
&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectType);
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
&nbsp;            if (object != null) {
&nbsp;                jsonReader.handleResolveTasks(object);
&nbsp;            }
&nbsp;            return object;
<b class="fc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
&nbsp;            Throwable cause = e.getCause();
&nbsp;            if (cause == null) {
&nbsp;                cause = e;
&nbsp;            }
&nbsp;            throw new JSONException(e.getMessage(), cause);
<b class="fc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    /**
<b class="fc">&nbsp;     * @since 1.2.11</b>
<b class="fc">&nbsp;     */</b>
<b class="nc">&nbsp;    public static &lt;T&gt; T parseObject(String str, Type objectType, ParserConfig config, Feature... features) {</b>
&nbsp;        if (str == null || str.isEmpty()) {
&nbsp;            return null;
&nbsp;        }
<b class="fc">&nbsp;</b>
&nbsp;        JSONReader.Context context = createReadContext(
<b class="fc">&nbsp;                config.getProvider(),</b>
<b class="nc">&nbsp;                DEFAULT_PARSER_FEATURE,</b>
<b class="nc">&nbsp;                features</b>
&nbsp;        );
&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        try {</b>
&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectType);
&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
&nbsp;            return object;
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
<b class="fc">&nbsp;            Throwable cause = e.getCause();</b>
&nbsp;            if (cause == null) {
<b class="fc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="fc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(
&nbsp;            InputStream is,
&nbsp;            Type objectType,
<b class="nc">&nbsp;            Feature... features) throws IOException {</b>
&nbsp;        return parseObject(is, StandardCharsets.UTF_8, objectType, features);
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(
&nbsp;            InputStream is,
&nbsp;            Class&lt;T&gt; objectType,
&nbsp;            Feature... features) throws IOException {
<b class="nc">&nbsp;        return parseObject(is, StandardCharsets.UTF_8, objectType, features);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(
&nbsp;            InputStream is,
&nbsp;            Charset charset,
&nbsp;            Type objectType,
&nbsp;            Feature... features) throws IOException {
&nbsp;        if (is == null) {
&nbsp;            return null;
&nbsp;        }
&nbsp;
&nbsp;        JSONReader.Context context = createReadContext(
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
<b class="nc">&nbsp;                DEFAULT_PARSER_FEATURE,</b>
&nbsp;                features
&nbsp;        );
&nbsp;        JSONReader jsonReader = JSONReader.of(is, charset, context);
&nbsp;
&nbsp;        try {
&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectType);
&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);
&nbsp;            if (object != null) {
&nbsp;                jsonReader.handleResolveTasks(object);
&nbsp;            }
&nbsp;            return object;
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
&nbsp;            Throwable cause = e.getCause();
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
&nbsp;            throw new JSONException(e.getMessage(), cause);
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    /**</b>
&nbsp;     * @since 2.0.7
<b class="nc">&nbsp;     */</b>
<b class="nc">&nbsp;    public static &lt;T&gt; JSONObject parseObject(byte[] jsonBytes, Feature... features) {</b>
&nbsp;        if (jsonBytes == null || jsonBytes.length == 0) {
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
<b class="nc">&nbsp;                DEFAULT_PARSER_FEATURE,</b>
&nbsp;                features
<b class="nc">&nbsp;        );</b>
<b class="nc">&nbsp;        JSONReader reader = JSONReader.of(jsonBytes, context);</b>
&nbsp;
<b class="nc">&nbsp;        boolean ordered = false;</b>
<b class="nc">&nbsp;        for (Feature feature : features) {</b>
&nbsp;            if (feature == Feature.OrderedField) {
&nbsp;                ordered = true;
<b class="nc">&nbsp;                break;</b>
<b class="nc">&nbsp;            }</b>
&nbsp;        }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        try {</b>
<b class="nc">&nbsp;            Map&lt;String, Object&gt; map = ordered ? new LinkedHashMap&lt;&gt;() : new HashMap&lt;&gt;();</b>
&nbsp;            reader.read(map, 0);
<b class="nc">&nbsp;            JSONObject jsonObject = new JSONObject(map);</b>
&nbsp;            reader.handleResolveTasks(jsonObject);
<b class="nc">&nbsp;            return jsonObject;</b>
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
&nbsp;            Throwable cause = e.getCause();
&nbsp;            if (cause == null) {
&nbsp;                cause = e;
&nbsp;            }
&nbsp;            throw new JSONException(e.getMessage(), cause);
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public static &lt;T&gt; T parseObject(byte[] jsonBytes, Type type, Feature... features) {</b>
&nbsp;        if (jsonBytes == null) {
<b class="nc">&nbsp;            return null;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
<b class="nc">&nbsp;                DEFAULT_PARSER_FEATURE,</b>
&nbsp;                features
<b class="nc">&nbsp;        );</b>
&nbsp;        JSONReader jsonReader = JSONReader.of(jsonBytes, context);
<b class="nc">&nbsp;</b>
&nbsp;        try {
&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(type);
&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);
&nbsp;            if (object != null) {
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            return object;
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
&nbsp;            throw new JSONException(e.getMessage(), cause);
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static &lt;T&gt; T parseObject(byte[] jsonBytes, Type type, SerializeFilter filter, Feature... features) {</b>
&nbsp;        if (jsonBytes == null) {
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
<b class="nc">&nbsp;</b>
&nbsp;        JSONReader.Context context = createReadContext(
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
&nbsp;        JSONReader jsonReader = JSONReader.of(jsonBytes, context);
&nbsp;
&nbsp;        if (filter instanceof Filter) {
&nbsp;            context.config((Filter) filter);
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        try {
&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(type);
&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);
&nbsp;            if (object != null) {
&nbsp;                jsonReader.handleResolveTasks(object);
&nbsp;            }
&nbsp;            return object;
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
&nbsp;            Throwable cause = e.getCause();
<b class="nc">&nbsp;            if (cause == null) {</b>
&nbsp;                cause = e;
&nbsp;            }
&nbsp;            throw new JSONException(e.getMessage(), cause);
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static Object parse(String str, Feature... features) {
&nbsp;        if (str == null || str.isEmpty()) {
&nbsp;            return null;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
&nbsp;        try (JSONReader jsonReader = JSONReader.of(str, context)) {
&nbsp;            if (jsonReader.isObject() &amp;&amp; !jsonReader.isSupportAutoType(0)) {
&nbsp;                return jsonReader.read(JSONObject.class);
&nbsp;            }
&nbsp;            return jsonReader.readAny();
&nbsp;        } catch (Exception ex) {
&nbsp;            throw new JSONException(ex.getMessage(), ex);
&nbsp;        }
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static Object parse(String str, ParserConfig config) {</b>
&nbsp;        if (str == null || str.isEmpty()) {
&nbsp;            return null;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
&nbsp;        JSONReader.Context context = createReadContext(config.getProvider(), DEFAULT_PARSER_FEATURE);
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(str, context)) {</b>
<b class="nc">&nbsp;            if (jsonReader.isObject() &amp;&amp; !jsonReader.isSupportAutoType(0)) {</b>
<b class="nc">&nbsp;                return jsonReader.read(JSONObject.class);</b>
&nbsp;            }
<b class="nc">&nbsp;            return jsonReader.readAny();</b>
<b class="nc">&nbsp;        } catch (Exception ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(ex.getMessage(), ex);</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static Object parse(byte[] input, int off, int len, CharsetDecoder charsetDecoder, Feature... features) {</b>
&nbsp;        if (input == null || input.length == 0) {
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
&nbsp;        int featureValues = DEFAULT_PARSER_FEATURE;
<b class="fc">&nbsp;        for (Feature feature : features) {</b>
&nbsp;            featureValues = Feature.config(featureValues, feature, true);
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return parse(input, off, len, charsetDecoder, featureValues);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Object parse(byte[] input, int off, int len, CharsetDecoder charsetDecoder, int features) {
<b class="nc">&nbsp;        charsetDecoder.reset();</b>
<b class="nc">&nbsp;</b>
&nbsp;        int scaleLength = (int) (len * (double) charsetDecoder.maxCharsPerByte());
&nbsp;        char[] chars = CHARS_UPDATER.getAndSet(CACHE, null);
<b class="nc">&nbsp;        if (chars == null || chars.length &lt; scaleLength) {</b>
&nbsp;            chars = new char[scaleLength];
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try {</b>
<b class="nc">&nbsp;            ByteBuffer byteBuf = ByteBuffer.wrap(input, off, len);</b>
<b class="nc">&nbsp;            CharBuffer charBuf = CharBuffer.wrap(chars);</b>
<b class="nc">&nbsp;            IOUtils.decode(charsetDecoder, byteBuf, charBuf);</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            int position = charBuf.position();</b>
&nbsp;
<b class="nc">&nbsp;            JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                    JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                    features
<b class="nc">&nbsp;            );</b>
&nbsp;            JSONReader jsonReader = JSONReader.of(chars, 0, position, context);
&nbsp;
<b class="nc">&nbsp;            for (Feature feature : Feature.values()) {</b>
&nbsp;                if ((features &amp; feature.mask) != 0) {
<b class="nc">&nbsp;                    switch (feature) {</b>
&nbsp;                        case SupportArrayToBean:
&nbsp;                            context.config(JSONReader.Feature.SupportArrayToBean);
&nbsp;                            break;
<b class="nc">&nbsp;                        case SupportAutoType:</b>
&nbsp;                            context.config(JSONReader.Feature.SupportAutoType);
&nbsp;                            break;
&nbsp;                        case ErrorOnEnumNotMatch:
<b class="nc">&nbsp;                            context.config(JSONReader.Feature.ErrorOnEnumNotMatch);</b>
<b class="nc">&nbsp;                        case SupportNonPublicField:</b>
&nbsp;                            context.config(JSONReader.Feature.FieldBased);
&nbsp;                        default:
&nbsp;                            break;
&nbsp;                    }
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            Object object = jsonReader.read(Object.class);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            return object;</b>
&nbsp;        } finally {
<b class="nc">&nbsp;            if (chars.length &lt;= 1024 * 64) {</b>
<b class="nc">&nbsp;                CHARS_UPDATER.set(CACHE, chars);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)</b>
&nbsp;    public static &lt;T&gt; T parseObject(
<b class="nc">&nbsp;            byte[] input,</b>
&nbsp;            int off,
&nbsp;            int len,
&nbsp;            CharsetDecoder charsetDecoder,
<b class="nc">&nbsp;            Type clazz,</b>
&nbsp;            Feature... features) {
&nbsp;        charsetDecoder.reset();
&nbsp;
<b class="nc">&nbsp;        int scaleLength = (int) (len * (double) charsetDecoder.maxCharsPerByte());</b>
<b class="nc">&nbsp;</b>
&nbsp;        char[] chars = CHARS_UPDATER.getAndSet(CACHE, null);
&nbsp;        if (chars == null || chars.length &lt; scaleLength) {
&nbsp;            chars = new char[scaleLength];
&nbsp;        }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        try {</b>
<b class="nc">&nbsp;            ByteBuffer byteBuf = ByteBuffer.wrap(input, off, len);</b>
<b class="nc">&nbsp;            CharBuffer charByte = CharBuffer.wrap(chars);</b>
&nbsp;            IOUtils.decode(charsetDecoder, byteBuf, charByte);
<b class="nc">&nbsp;</b>
&nbsp;            int position = charByte.position();
&nbsp;
<b class="nc">&nbsp;            JSONReader.Context context = createReadContext(</b>
&nbsp;                    JSONFactory.getDefaultObjectReaderProvider(),
<b class="nc">&nbsp;                    DEFAULT_PARSER_FEATURE,</b>
&nbsp;                    features
<b class="nc">&nbsp;            );</b>
&nbsp;            JSONReader jsonReader = JSONReader.of(chars, 0, position, context);
&nbsp;
&nbsp;            T object = jsonReader.read(clazz);
&nbsp;            if (object != null) {
&nbsp;                jsonReader.handleResolveTasks(object);
&nbsp;            }
&nbsp;            return object;
&nbsp;        } finally {
&nbsp;            if (chars.length &lt;= 1024 * 64) {
&nbsp;                CHARS_UPDATER.set(CACHE, chars);
&nbsp;            }
<b class="fc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(
<b class="nc">&nbsp;            byte[] input,</b>
&nbsp;            int off,
&nbsp;            int len,
&nbsp;            Charset charset,
&nbsp;            Type clazz,
&nbsp;            Feature... features) {
&nbsp;        try (JSONReader jsonReader =
<b class="nc">&nbsp;                     JSONReader.of(</b>
&nbsp;                             input,
&nbsp;                             off,
<b class="nc">&nbsp;                             len,</b>
<b class="nc">&nbsp;                             charset,</b>
<b class="nc">&nbsp;                             createReadContext(</b>
<b class="nc">&nbsp;                                     JSONFactory.getDefaultObjectReaderProvider(),</b>
<b class="nc">&nbsp;                                     DEFAULT_PARSER_FEATURE,</b>
<b class="nc">&nbsp;                                     features</b>
&nbsp;                             )
<b class="nc">&nbsp;                     )</b>
<b class="nc">&nbsp;        ) {</b>
&nbsp;            T object = jsonReader.read(clazz);
<b class="nc">&nbsp;            if (object != null) {</b>
&nbsp;                jsonReader.handleResolveTasks(object);
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            return object;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static JSONWriter.Context createWriteContext(SerializeConfig config, int featuresValue, SerializerFeature... features) {
&nbsp;        for (SerializerFeature feature : features) {
&nbsp;            featuresValue |= feature.mask;
&nbsp;        }
<b class="nc">&nbsp;</b>
&nbsp;        JSONWriter.Context context = new JSONWriter.Context(config.getProvider());
&nbsp;
&nbsp;        if (config.fieldBased) {
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.FieldBased);</b>
&nbsp;        }
&nbsp;
&nbsp;        if (config.propertyNamingStrategy != null
<b class="fc">&nbsp;                &amp;&amp; config.propertyNamingStrategy != PropertyNamingStrategy.NeverUseThisValueExceptDefaultValue) {</b>
&nbsp;            NameFilter nameFilter = NameFilter.of(config.propertyNamingStrategy);
&nbsp;            configFilter(context, nameFilter);
&nbsp;        }
<b class="nc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; SerializerFeature.DisableCircularReferenceDetect.mask) == 0) {
&nbsp;            context.config(JSONWriter.Feature.ReferenceDetection);
&nbsp;        }
<b class="nc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; SerializerFeature.UseISO8601DateFormat.mask) != 0) {
&nbsp;            context.setDateFormat(&quot;iso8601&quot;);
&nbsp;        } else {
&nbsp;            context.setDateFormat(&quot;millis&quot;);
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteMapNullValue.mask) != 0) {</b>
&nbsp;            context.config(JSONWriter.Feature.WriteMapNullValue);
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNullListAsEmpty.mask) != 0) {</b>
&nbsp;            context.config(JSONWriter.Feature.WriteNullListAsEmpty);
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNullStringAsEmpty.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.WriteNullStringAsEmpty);
&nbsp;        }
<b class="fc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNullNumberAsZero.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.WriteNullNumberAsZero);
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNullBooleanAsFalse.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.WriteNullBooleanAsFalse);
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.BrowserCompatible.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.BrowserCompatible);
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteClassName.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.WriteClassName);
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNonStringValueAsString.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.WriteNonStringValueAsString);
&nbsp;        }
<b class="fc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteEnumUsingToString.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.WriteEnumUsingToString);
<b class="fc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteEnumUsingName.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteEnumsUsingName);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.NotWriteRootClassName.mask) != 0) {
<b class="fc">&nbsp;            context.config(JSONWriter.Feature.NotWriteRootClassName);</b>
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; SerializerFeature.IgnoreErrorGetter.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.IgnoreErrorGetter);
&nbsp;        }
<b class="fc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteDateUseDateFormat.mask) != 0) {
<b class="fc">&nbsp;            context.setDateFormat(JSON.DEFFAULT_DATE_FORMAT);</b>
&nbsp;        }
<b class="fc">&nbsp;</b>
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.BeanToArray.mask) != 0) {</b>
&nbsp;            context.config(JSONWriter.Feature.BeanToArray);
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.UseSingleQuotes.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.UseSingleQuotes);
&nbsp;        }
<b class="nc">&nbsp;</b>
&nbsp;        if ((featuresValue &amp; SerializerFeature.MapSortField.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.MapSortField);
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.PrettyFormat.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.PrettyFormat);
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNonStringKeyAsString.mask) != 0) {
&nbsp;            context.config(JSONWriter.Feature.WriteNonStringKeyAsString);
&nbsp;        }
&nbsp;
&nbsp;        if ((featuresValue &amp; SerializerFeature.IgnoreNonFieldGetter.mask) != 0) {
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.IgnoreNonFieldGetter);</b>
&nbsp;        }
&nbsp;
&nbsp;        if (defaultTimeZone != null &amp;&amp; defaultTimeZone != DEFAULT_TIME_ZONE) {
&nbsp;            context.setZoneId(defaultTimeZone.toZoneId());
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return context;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(Object object, SerializeFilter[] filters, SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
&nbsp;
&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {
&nbsp;            writer.setRootObject(object);
&nbsp;            for (SerializeFilter filter : filters) {
&nbsp;                configFilter(context, filter);
&nbsp;            }
<b class="nc">&nbsp;</b>
&nbsp;            if (object == null) {
&nbsp;                writer.writeNull();
&nbsp;            } else {
&nbsp;                Class&lt;?&gt; valueClass = object.getClass();
&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);
&nbsp;                objectWriter.write(writer, object, null, null, 0);
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            return writer.toString();
&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {
&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;
&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, cause);
&nbsp;        } catch (RuntimeException ex) {
&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static void configFilter(JSONWriter.Context context, SerializeFilter filter) {
&nbsp;        if (filter instanceof NameFilter) {
<b class="nc">&nbsp;            context.setNameFilter((NameFilter) filter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof ValueFilter) {</b>
&nbsp;            context.setValueFilter((ValueFilter) filter);
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        if (filter instanceof PropertyPreFilter) {</b>
&nbsp;            context.setPropertyPreFilter((PropertyPreFilter) filter);
&nbsp;        }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        if (filter instanceof PropertyFilter) {</b>
<b class="nc">&nbsp;            context.setPropertyFilter((PropertyFilter) filter);</b>
&nbsp;        }
&nbsp;
&nbsp;        if (filter instanceof BeforeFilter) {
<b class="nc">&nbsp;            context.setBeforeFilter((BeforeFilter) filter);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof AfterFilter) {</b>
<b class="nc">&nbsp;            context.setAfterFilter((AfterFilter) filter);</b>
&nbsp;        }
&nbsp;
&nbsp;        if (filter instanceof LabelFilter) {
&nbsp;            context.setLabelFilter((LabelFilter) filter);
&nbsp;        }
&nbsp;
&nbsp;        if (filter instanceof ContextValueFilter) {
&nbsp;            context.setContextValueFilter((ContextValueFilter) filter);
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static byte[] toJSONBytes(Object object, SerializeFilter[] filters, SerializerFeature... features) {
&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);
&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(context)) {
&nbsp;            writer.setRootObject(object);
<b class="nc">&nbsp;            for (SerializeFilter filter : filters) {</b>
&nbsp;                configFilter(context, filter);
&nbsp;            }
<b class="nc">&nbsp;</b>
&nbsp;            if (object == null) {
<b class="nc">&nbsp;                writer.writeNull();</b>
<b class="nc">&nbsp;            } else {</b>
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);
&nbsp;                objectWriter.write(writer, object, null, null, 0);
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            return writer.getBytes();</b>
&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {
&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;
&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, cause);
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, ex);</b>
&nbsp;        }
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
&nbsp;    public static String toJSONString(Object object, boolean prettyFormat) {
&nbsp;        SerializerFeature[] features = prettyFormat
&nbsp;                ? new SerializerFeature[]{SerializerFeature.PrettyFormat}
<b class="nc">&nbsp;                : new SerializerFeature[0];</b>
<b class="nc">&nbsp;        JSONWriter.Context context =</b>
&nbsp;                createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);
&nbsp;
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {</b>
&nbsp;            writer.setRootObject(object);
&nbsp;
&nbsp;            if (object == null) {
&nbsp;                writer.writeNull();
&nbsp;            } else {
&nbsp;                Class&lt;?&gt; valueClass = object.getClass();
<b class="nc">&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
&nbsp;                objectWriter.write(writer, object, null, null, 0);
&nbsp;            }
&nbsp;
&nbsp;            return writer.toString();
&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {
&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;
&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, cause);
&nbsp;        } catch (RuntimeException ex) {
&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);
&nbsp;        }
&nbsp;    }
<b class="nc">&nbsp;</b>
&nbsp;    public static String toJSONString(Object object) {
&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE);
&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {
&nbsp;            writer.setRootObject(object);
&nbsp;
&nbsp;            if (object == null) {
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
&nbsp;                writer.setRootObject(object);
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            return writer.toString();
&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {
&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;
&nbsp;            throw new JSONException(ex.getMessage(), cause);
&nbsp;        } catch (RuntimeException ex) {
&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(Object object, SerializeFilter filter0, SerializeFilter filter1, SerializeFilter... filters) {
&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE);
&nbsp;        configFilter(context, filter0);
<b class="nc">&nbsp;        configFilter(context, filter1);</b>
&nbsp;        for (SerializeFilter filter : filters) {
&nbsp;            configFilter(context, filter);
&nbsp;        }
&nbsp;
&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {
&nbsp;            writer.setRootObject(object);
&nbsp;
&nbsp;            if (object == null) {
&nbsp;                writer.writeNull();
<b class="nc">&nbsp;            } else {</b>
&nbsp;                Class&lt;?&gt; valueClass = object.getClass();
&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);
&nbsp;                objectWriter.write(writer, object, null, null, 0);
&nbsp;            }
&nbsp;
&nbsp;            return writer.toString();
&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {
&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;
&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, cause);
&nbsp;        } catch (RuntimeException ex) {
&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);
&nbsp;        }
&nbsp;    }
<b class="nc">&nbsp;</b>
&nbsp;    public static String toJSONString(Object object, SerializerFeature... features) {
&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);
&nbsp;
&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {
&nbsp;            writer.setRootObject(object);
&nbsp;
&nbsp;            if (object == null) {
&nbsp;                writer.writeNull();
&nbsp;            } else {
&nbsp;                Class&lt;?&gt; valueClass = object.getClass();
&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);
&nbsp;                objectWriter.write(writer, object, null, null, 0);
&nbsp;            }
&nbsp;
&nbsp;            return writer.toString();
&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {
&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, cause);</b>
&nbsp;        } catch (RuntimeException ex) {
&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);
<b class="nc">&nbsp;        }</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static byte[] toJSONBytes(Object object) {</b>
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE);</b>
&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(context)) {
&nbsp;            writer.setRootObject(object);
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
&nbsp;                Class&lt;?&gt; valueClass = object.getClass();
&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            return writer.getBytes();</b>
&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, cause);</b>
&nbsp;        } catch (RuntimeException ex) {
&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, ex);
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static byte[] toJSONBytes(Object object, SerializeFilter... filters) {
&nbsp;        return toJSONBytes(object, filters, new SerializerFeature[0]);
&nbsp;    }
&nbsp;
&nbsp;    public static byte[] toJSONBytes(Object object, SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
&nbsp;
&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(context)) {
<b class="nc">&nbsp;            writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
<b class="nc">&nbsp;            } else {</b>
&nbsp;                Class&lt;?&gt; valueClass = object.getClass();
&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;</b>
&nbsp;            return writer.getBytes();
&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {
&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, cause);</b>
&nbsp;        } catch (RuntimeException ex) {
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, ex);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static String toJSONString(Object object, SerializeConfig config, SerializerFeature... features) {</b>
&nbsp;        JSONWriter.Context context = createWriteContext(config, DEFAULT_GENERATE_FEATURE, features);
&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {
&nbsp;            writer.writeAny(object);
&nbsp;            return writer.toString();
&nbsp;        }
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static String toJSONString(
&nbsp;            Object object,
<b class="fc">&nbsp;            SerializeConfig config,</b>
&nbsp;            SerializeFilter filter,
<b class="fc">&nbsp;            SerializerFeature... features) {</b>
<b class="fc">&nbsp;        JSONWriter.Context context = createWriteContext(config, DEFAULT_GENERATE_FEATURE, features);</b>
&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {
<b class="fc">&nbsp;            if (config.propertyNamingStrategy != null</b>
<b class="nc">&nbsp;                    &amp;&amp; config.propertyNamingStrategy != PropertyNamingStrategy.NeverUseThisValueExceptDefaultValue) {</b>
&nbsp;                NameFilter nameFilter = NameFilter.of(config.propertyNamingStrategy);
&nbsp;                if (filter instanceof NameFilter) {
&nbsp;                    filter = NameFilter.compose(nameFilter, (NameFilter) filter);
&nbsp;                } else {
&nbsp;                    configFilter(context, nameFilter);
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            configFilter(context, filter);
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            if (object == null) {</b>
&nbsp;                writer.writeNull();
<b class="nc">&nbsp;            } else {</b>
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
&nbsp;                Class&lt;?&gt; valueClass = object.getClass();
&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(valueClass, valueClass);
&nbsp;                objectWriter.write(writer, object, null, null, 0);
<b class="nc">&nbsp;            }</b>
&nbsp;            return writer.toString();
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static String toJSONString(</b>
&nbsp;            Object object,
<b class="nc">&nbsp;            SerializeFilter filter,</b>
<b class="nc">&nbsp;            SerializerFeature... features) {</b>
&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);
&nbsp;        configFilter(context, filter);
&nbsp;
&nbsp;        try (JSONWriter jsonWriter = JSONWriter.of(context)) {
&nbsp;            if (object == null) {
&nbsp;                jsonWriter.writeNull();
&nbsp;            } else {
&nbsp;                jsonWriter.setRootObject(object);
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(object.getClass());</b>
&nbsp;                objectWriter.write(jsonWriter, object, null, null, 0);
&nbsp;            }
&nbsp;            return jsonWriter.toString();
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public static String toJSONString(Object object, int defaultFeatures, SerializerFeature... features) {</b>
&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, defaultFeatures, features);
&nbsp;        try (JSONWriter jsonWriter = JSONWriter.of(context)) {
&nbsp;            if (object == null) {
&nbsp;                jsonWriter.writeNull();
<b class="nc">&nbsp;            } else {</b>
<b class="nc">&nbsp;                jsonWriter.setRootObject(object);</b>
&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(object.getClass());
&nbsp;                objectWriter.write(jsonWriter, object, null, null, 0);
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            return jsonWriter.toString();</b>
&nbsp;        }
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static String toJSONStringWithDateFormat(</b>
&nbsp;            Object object, String dateFormat,
<b class="nc">&nbsp;            SerializerFeature... features</b>
&nbsp;    ) {
&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);
<b class="nc">&nbsp;        try (JSONWriter jsonWriter = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            context.setDateFormat(dateFormat);</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            if (object == null) {</b>
&nbsp;                jsonWriter.writeNull();
<b class="nc">&nbsp;            } else {</b>
&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(object.getClass());
&nbsp;                objectWriter.write(jsonWriter, object, null, null, 0);
<b class="nc">&nbsp;            }</b>
&nbsp;            return jsonWriter.toString();
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static final int writeJSONString(</b>
<b class="nc">&nbsp;            OutputStream os,</b>
<b class="nc">&nbsp;            Object object,</b>
&nbsp;            SerializerFeature... features) throws IOException {
<b class="nc">&nbsp;        return writeJSONString(os, object, new SerializeFilter[0], features);</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public static final int writeJSONString(</b>
<b class="nc">&nbsp;            OutputStream os,</b>
&nbsp;            Object object,
<b class="nc">&nbsp;            SerializeFilter[] filters) throws IOException {</b>
&nbsp;        return writeJSONString(os, object, filters, new SerializerFeature[0]);
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static final int writeJSONString(</b>
<b class="nc">&nbsp;            OutputStream os,</b>
&nbsp;            Object object,
<b class="nc">&nbsp;            SerializeFilter[] filters,</b>
&nbsp;            SerializerFeature... features
&nbsp;    ) throws IOException {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
<b class="nc">&nbsp;        try (JSONWriter jsonWriter = JSONWriter.ofUTF8(context)) {</b>
<b class="nc">&nbsp;            jsonWriter.setRootObject(object);</b>
&nbsp;            for (SerializeFilter filter : filters) {
&nbsp;                configFilter(context, filter);
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                jsonWriter.writeNull();</b>
&nbsp;            } else {
&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(object.getClass());
<b class="nc">&nbsp;                objectWriter.write(jsonWriter, object, null, null, 0);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;            byte[] bytes = jsonWriter.getBytes();
<b class="nc">&nbsp;            os.write(bytes);</b>
&nbsp;            return bytes.length;
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;writeJSONString error&quot;, cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
&nbsp;            throw new JSONException(&quot;writeJSONString error&quot;, ex);
&nbsp;        }
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static JSONArray parseArray(String str, Feature... features) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(</b>
<b class="nc">&nbsp;                str,</b>
<b class="nc">&nbsp;                createReadContext(JSONFactory.getDefaultObjectReaderProvider(), DEFAULT_PARSER_FEATURE, features))</b>
&nbsp;        ) {
<b class="nc">&nbsp;            if (jsonReader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;            JSONArray jsonArray = new JSONArray();</b>
&nbsp;            jsonReader.read(jsonArray);
<b class="nc">&nbsp;            return jsonArray;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; List&lt;T&gt; parseArray(String text, Class&lt;T&gt; type) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
&nbsp;            return null;
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        ParameterizedTypeImpl paramType = new ParameterizedTypeImpl(new Type[]{type}, null, List.class);</b>
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(</b>
<b class="nc">&nbsp;                text,</b>
<b class="nc">&nbsp;                createReadContext(JSONFactory.getDefaultObjectReaderProvider(), DEFAULT_PARSER_FEATURE))</b>
<b class="nc">&nbsp;        ) {</b>
<b class="nc">&nbsp;            return reader.read(paramType);</b>
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
&nbsp;            Throwable cause = e.getCause();
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
&nbsp;            throw new JSONException(e.getMessage(), cause);
&nbsp;        }
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static &lt;T&gt; List&lt;T&gt; parseArray(String text, Class&lt;T&gt; type, Feature... features) {
&nbsp;        if (text == null || text.isEmpty()) {
&nbsp;            return null;
&nbsp;        }
&nbsp;        ParameterizedTypeImpl paramType = new ParameterizedTypeImpl(new Type[]{type}, null, List.class);
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(</b>
&nbsp;                text,
&nbsp;                createReadContext(JSONFactory.getDefaultObjectReaderProvider(), DEFAULT_PARSER_FEATURE, features))
<b class="nc">&nbsp;        ) {</b>
&nbsp;            return reader.read(paramType);
&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {
&nbsp;            Throwable cause = e.getCause();
&nbsp;            if (cause == null) {
&nbsp;                cause = e;
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isValid(String str) {
&nbsp;        return com.alibaba.fastjson2.JSON.isValid(str);
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static boolean isValidArray(String str) {</b>
&nbsp;        return com.alibaba.fastjson2.JSON.isValidArray(str);
&nbsp;    }
<b class="fc">&nbsp;</b>
&nbsp;    public static boolean isValidObject(String str) {
<b class="nc">&nbsp;        return com.alibaba.fastjson2.JSON.isValidObject(str);</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    public static &lt;T&gt; T toJavaObject(JSON json, Class&lt;T&gt; clazz) {</b>
<b class="nc">&nbsp;        if (json instanceof JSONObject) {</b>
<b class="nc">&nbsp;            return ((JSONObject) json).toJavaObject(clazz);</b>
&nbsp;        }
<b class="nc">&nbsp;</b>
&nbsp;        String str = toJSONString(json);
<b class="nc">&nbsp;        return parseObject(str, clazz);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static Object toJSON(Object javaObject) {
<b class="nc">&nbsp;        if (javaObject instanceof JSON) {</b>
&nbsp;            return javaObject;
&nbsp;        }
<b class="fc">&nbsp;</b>
&nbsp;        String str = JSON.toJSONString(javaObject);
<b class="nc">&nbsp;        Object object = JSON.parse(str);</b>
&nbsp;        if (object instanceof List) {
<b class="nc">&nbsp;            return new JSONArray((List) object);</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return object;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
<b class="nc">&nbsp;    public static List&lt;Object&gt; parseArray(String text, Type[] types) {</b>
&nbsp;        if (text == null || text.isEmpty()) {
<b class="nc">&nbsp;            return null;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;        List array = new JSONArray(types.length);
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(</b>
&nbsp;                text,
&nbsp;                createReadContext(JSONFactory.getDefaultObjectReaderProvider(), DEFAULT_GENERATE_FEATURE))
&nbsp;        ) {
&nbsp;            reader.startArray();
&nbsp;            for (Type itemType : types) {
&nbsp;                array.add(
<b class="nc">&nbsp;                        reader.read(itemType)</b>
<b class="nc">&nbsp;                );</b>
&nbsp;            }
&nbsp;            reader.endArray();
<b class="nc">&nbsp;            reader.handleResolveTasks(array);</b>
&nbsp;            return array;
<b class="nc">&nbsp;        }</b>
&nbsp;    }
<b class="nc">&nbsp;</b>
<b class="nc">&nbsp;    static class Cache {</b>
&nbsp;        volatile char[] chars;
<b class="nc">&nbsp;    }</b>
<b class="nc">&nbsp;</b>
&nbsp;    public String toJSONString() {
<b class="nc">&nbsp;        return com.alibaba.fastjson2.JSON.toJSONString(this, JSONWriter.Feature.ReferenceDetection);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-09 19:50</div>
</div>
</body>
</html>
