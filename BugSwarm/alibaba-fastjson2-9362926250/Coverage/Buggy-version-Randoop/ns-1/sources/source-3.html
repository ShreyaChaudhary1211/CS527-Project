


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > JSON</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.alibaba.fastjson</a>
</div>

<h1>Coverage Summary for Class: JSON (com.alibaba.fastjson)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">JSON</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/55)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/670)
  </span>
</td>
</tr>
  <tr>
    <td class="name">JSON$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">JSON$Cache</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/57)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/672)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.alibaba.fastjson;
&nbsp;
&nbsp;import com.alibaba.fastjson.parser.Feature;
&nbsp;import com.alibaba.fastjson.parser.ParserConfig;
&nbsp;import com.alibaba.fastjson.parser.deserializer.ParseProcess;
&nbsp;import com.alibaba.fastjson.serializer.*;
&nbsp;import com.alibaba.fastjson.util.IOUtils;
&nbsp;import com.alibaba.fastjson2.JSONFactory;
&nbsp;import com.alibaba.fastjson2.JSONReader;
&nbsp;import com.alibaba.fastjson2.JSONWriter;
&nbsp;import com.alibaba.fastjson2.filter.Filter;
&nbsp;import com.alibaba.fastjson2.filter.PropertyFilter;
&nbsp;import com.alibaba.fastjson2.filter.PropertyPreFilter;
&nbsp;import com.alibaba.fastjson2.filter.ValueFilter;
&nbsp;import com.alibaba.fastjson2.reader.ObjectReader;
&nbsp;import com.alibaba.fastjson2.reader.ObjectReaderProvider;
&nbsp;import com.alibaba.fastjson2.support.AwtRederModule;
&nbsp;import com.alibaba.fastjson2.support.AwtWriterModule;
&nbsp;import com.alibaba.fastjson2.util.ParameterizedTypeImpl;
&nbsp;import com.alibaba.fastjson2.writer.ObjectWriter;
&nbsp;import com.alibaba.fastjson2.writer.ObjectWriterProvider;
&nbsp;
&nbsp;import java.io.IOException;
&nbsp;import java.io.InputStream;
&nbsp;import java.io.OutputStream;
&nbsp;import java.lang.reflect.Type;
&nbsp;import java.nio.ByteBuffer;
&nbsp;import java.nio.CharBuffer;
&nbsp;import java.nio.charset.Charset;
&nbsp;import java.nio.charset.CharsetDecoder;
&nbsp;import java.nio.charset.StandardCharsets;
&nbsp;import java.util.*;
&nbsp;import java.util.concurrent.atomic.AtomicReferenceFieldUpdater;
&nbsp;import java.util.function.Supplier;
&nbsp;
<b class="nc">&nbsp;public class JSON {</b>
<b class="nc">&nbsp;    private static TimeZone DEFAULT_TIME_ZONE = TimeZone.getDefault();</b>
&nbsp;    public static final String VERSION = com.alibaba.fastjson2.JSON.VERSION;
<b class="nc">&nbsp;    static final Cache CACHE = new Cache();</b>
<b class="nc">&nbsp;    static final AtomicReferenceFieldUpdater&lt;Cache, char[]&gt; CHARS_UPDATER</b>
<b class="nc">&nbsp;            = AtomicReferenceFieldUpdater.newUpdater(Cache.class, char[].class, &quot;chars&quot;);</b>
<b class="nc">&nbsp;    public static TimeZone defaultTimeZone = DEFAULT_TIME_ZONE;</b>
<b class="nc">&nbsp;    public static Locale defaultLocale = Locale.getDefault();</b>
<b class="nc">&nbsp;    public static String DEFAULT_TYPE_KEY = &quot;@type&quot;;</b>
<b class="nc">&nbsp;    public static String DEFFAULT_DATE_FORMAT = &quot;yyyy-MM-dd HH:mm:ss&quot;;</b>
&nbsp;    public static int DEFAULT_PARSER_FEATURE;
&nbsp;    public static int DEFAULT_GENERATE_FEATURE;
&nbsp;
&nbsp;    static {
<b class="nc">&nbsp;        int features = 0;</b>
<b class="nc">&nbsp;        features |= Feature.AutoCloseSource.getMask();</b>
<b class="nc">&nbsp;        features |= Feature.InternFieldNames.getMask();</b>
<b class="nc">&nbsp;        features |= Feature.UseBigDecimal.getMask();</b>
<b class="nc">&nbsp;        features |= Feature.AllowUnQuotedFieldNames.getMask();</b>
<b class="nc">&nbsp;        features |= Feature.AllowSingleQuotes.getMask();</b>
<b class="nc">&nbsp;        features |= Feature.AllowArbitraryCommas.getMask();</b>
<b class="nc">&nbsp;        features |= Feature.SortFeidFastMatch.getMask();</b>
<b class="nc">&nbsp;        features |= Feature.IgnoreNotMatch.getMask();</b>
<b class="nc">&nbsp;        DEFAULT_PARSER_FEATURE = features;</b>
&nbsp;    }
&nbsp;
&nbsp;    static {
<b class="nc">&nbsp;        int features = 0;</b>
<b class="nc">&nbsp;        features |= SerializerFeature.QuoteFieldNames.getMask();</b>
<b class="nc">&nbsp;        features |= SerializerFeature.SkipTransientField.getMask();</b>
<b class="nc">&nbsp;        features |= SerializerFeature.WriteEnumUsingName.getMask();</b>
<b class="nc">&nbsp;        features |= SerializerFeature.SortField.getMask();</b>
&nbsp;
<b class="nc">&nbsp;        DEFAULT_GENERATE_FEATURE = features;</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    static final Supplier&lt;List&gt; arraySupplier = JSONArray::new;</b>
<b class="nc">&nbsp;    static final Supplier&lt;Map&gt; defaultSupplier = JSONObject::new;</b>
<b class="nc">&nbsp;    static final Supplier&lt;Map&gt; orderedSupplier = () -&gt; new JSONObject(true);</b>
&nbsp;
&nbsp;    static {
<b class="nc">&nbsp;        ObjectReaderProvider readerProvider = JSONFactory.getDefaultObjectReaderProvider();</b>
<b class="nc">&nbsp;        readerProvider.register(AwtRederModule.INSTANCE);</b>
<b class="nc">&nbsp;        readerProvider.register(new Fastjson1xReaderModule(readerProvider));</b>
&nbsp;
<b class="nc">&nbsp;        ObjectWriterProvider writerProvider = JSONFactory.getDefaultObjectWriterProvider();</b>
<b class="nc">&nbsp;        writerProvider.register(AwtWriterModule.INSTANCE);</b>
<b class="nc">&nbsp;        writerProvider.register(new Fastjson1xWriterModule(writerProvider));</b>
&nbsp;    }
&nbsp;
&nbsp;    static JSONReader.Context createReadContext(int featuresValue, Feature... features) {
<b class="nc">&nbsp;        return createReadContext(JSONFactory.getDefaultObjectReaderProvider(), featuresValue, features);</b>
&nbsp;    }
&nbsp;
&nbsp;    static JSONReader.Context createReadContext(ObjectReaderProvider provider, int featuresValue, Feature... features) {
<b class="nc">&nbsp;        for (Feature feature : features) {</b>
<b class="nc">&nbsp;            featuresValue |= feature.mask;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = new JSONReader.Context(provider);</b>
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.UseBigDecimal.mask) == 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.UseBigDecimalForDoubles);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.SupportArrayToBean.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.SupportArrayToBean);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.ErrorOnEnumNotMatch.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.ErrorOnEnumNotMatch);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.SupportNonPublicField.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.FieldBased);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.SupportClassForName.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.SupportClassForName);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.TrimStringFieldValue.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.TrimString);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.ErrorOnNotSupportAutoType.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.ErrorOnNotSupportAutoType);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.AllowUnQuotedFieldNames.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.AllowUnQuotedFieldNames);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.UseNativeJavaObject.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.UseNativeObject);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            context.setArraySupplier(arraySupplier);</b>
<b class="nc">&nbsp;            context.setObjectSupplier(</b>
&nbsp;                    (featuresValue &amp; Feature.OrderedField.mask) != 0
&nbsp;                            ? orderedSupplier
&nbsp;                            : defaultSupplier
&nbsp;            );
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.NonStringKeyAsString.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.NonStringKeyAsString);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.DisableFieldSmartMatch.mask) == 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.SupportSmartMatch);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; Feature.SupportAutoType.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONReader.Feature.SupportAutoType);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String defaultDateFormat = JSON.DEFFAULT_DATE_FORMAT;</b>
<b class="nc">&nbsp;        if (!&quot;yyyy-MM-dd HH:mm:ss&quot;.equals(defaultDateFormat)) {</b>
<b class="nc">&nbsp;            context.setDateFormat(defaultDateFormat);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return context;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static JSONObject parseObject(String str) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE
&nbsp;        );
<b class="nc">&nbsp;        JSONReader reader = JSONReader.of(str, context);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;            reader.read(map, 0);</b>
<b class="nc">&nbsp;            JSONObject jsonObject = new JSONObject(map);</b>
<b class="nc">&nbsp;            reader.handleResolveTasks(jsonObject);</b>
<b class="nc">&nbsp;            return jsonObject;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static JSONObject parseObject(String text, Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader reader = JSONReader.of(text, context);</b>
&nbsp;
<b class="nc">&nbsp;        String defaultDateFormat = JSON.DEFFAULT_DATE_FORMAT;</b>
<b class="nc">&nbsp;        if (!&quot;yyyy-MM-dd HH:mm:ss&quot;.equals(defaultDateFormat)) {</b>
<b class="nc">&nbsp;            context.setDateFormat(defaultDateFormat);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        boolean ordered = false;</b>
<b class="nc">&nbsp;        for (Feature feature : features) {</b>
<b class="nc">&nbsp;            if (feature == Feature.OrderedField) {</b>
<b class="nc">&nbsp;                ordered = true;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            Map&lt;String, Object&gt; map = ordered ? new LinkedHashMap() : new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;            reader.read(map, 0);</b>
<b class="nc">&nbsp;            JSONObject jsonObject = new JSONObject(map);</b>
<b class="nc">&nbsp;            reader.handleResolveTasks(jsonObject);</b>
<b class="nc">&nbsp;            return jsonObject;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(char[] str, Class&lt;T&gt; objectClass, Feature... features) {
<b class="nc">&nbsp;        if (str == null || str.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectClass);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    public static &lt;T&gt; T parseObject(String str, Class&lt;T&gt; objectClass, ParseProcess processor, Feature... features) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);</b>
<b class="nc">&nbsp;        context.config(processor);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectClass);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(String str, TypeReference typeReference, Feature... features) {
<b class="nc">&nbsp;        return parseObject(str, typeReference.getType(), features);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(String str, Class&lt;T&gt; objectClass) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectClass);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(String str, Class&lt;T&gt; objectType, Feature... features) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectType);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(String str, Type objectType, Feature... features) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectType);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @since 1.2.11
&nbsp;     */
&nbsp;    public static &lt;T&gt; T parseObject(String str, Type objectType, ParserConfig config, Feature... features) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                config.getProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(str, context);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectType);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(
&nbsp;            InputStream is,
&nbsp;            Type objectType,
&nbsp;            Feature... features) throws IOException {
<b class="nc">&nbsp;        return parseObject(is, StandardCharsets.UTF_8, objectType, features);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(
&nbsp;            InputStream is,
&nbsp;            Class&lt;T&gt; objectType,
&nbsp;            Feature... features) throws IOException {
<b class="nc">&nbsp;        return parseObject(is, StandardCharsets.UTF_8, objectType, features);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(
&nbsp;            InputStream is,
&nbsp;            Charset charset,
&nbsp;            Type objectType,
&nbsp;            Feature... features) throws IOException {
<b class="nc">&nbsp;        if (is == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(is, charset, context);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(objectType);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @since 2.0.7
&nbsp;     */
&nbsp;    public static &lt;T&gt; JSONObject parseObject(byte[] jsonBytes, Feature... features) {
<b class="nc">&nbsp;        if (jsonBytes == null || jsonBytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader reader = JSONReader.of(jsonBytes, context);</b>
&nbsp;
<b class="nc">&nbsp;        boolean ordered = false;</b>
<b class="nc">&nbsp;        for (Feature feature : features) {</b>
<b class="nc">&nbsp;            if (feature == Feature.OrderedField) {</b>
<b class="nc">&nbsp;                ordered = true;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            Map&lt;String, Object&gt; map = ordered ? new LinkedHashMap&lt;&gt;() : new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;            reader.read(map, 0);</b>
<b class="nc">&nbsp;            JSONObject jsonObject = new JSONObject(map);</b>
<b class="nc">&nbsp;            reader.handleResolveTasks(jsonObject);</b>
<b class="nc">&nbsp;            return jsonObject;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(byte[] jsonBytes, Type type, Feature... features) {
<b class="nc">&nbsp;        if (jsonBytes == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(jsonBytes, context);</b>
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(byte[] jsonBytes, Type type, SerializeFilter filter, Feature... features) {
<b class="nc">&nbsp;        if (jsonBytes == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        JSONReader jsonReader = JSONReader.of(jsonBytes, context);</b>
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof Filter) {</b>
<b class="nc">&nbsp;            context.config((Filter) filter);</b>
&nbsp;        }
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = jsonReader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static Object parse(String str, Feature... features) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                DEFAULT_PARSER_FEATURE,
&nbsp;                features
&nbsp;        );
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(str, context)) {</b>
<b class="nc">&nbsp;            if (jsonReader.isObject() &amp;&amp; !jsonReader.isSupportAutoType(0)) {</b>
<b class="nc">&nbsp;                return jsonReader.read(JSONObject.class);</b>
&nbsp;            }
<b class="nc">&nbsp;            return jsonReader.readAny();</b>
<b class="nc">&nbsp;        } catch (Exception ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(ex.getMessage(), ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static Object parse(String str, ParserConfig config) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader.Context context = createReadContext(config.getProvider(), DEFAULT_PARSER_FEATURE);</b>
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(str, context)) {</b>
<b class="nc">&nbsp;            if (jsonReader.isObject() &amp;&amp; !jsonReader.isSupportAutoType(0)) {</b>
<b class="nc">&nbsp;                return jsonReader.read(JSONObject.class);</b>
&nbsp;            }
<b class="nc">&nbsp;            return jsonReader.readAny();</b>
<b class="nc">&nbsp;        } catch (Exception ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(ex.getMessage(), ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static Object parse(byte[] input, int off, int len, CharsetDecoder charsetDecoder, Feature... features) {
<b class="nc">&nbsp;        if (input == null || input.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        int featureValues = DEFAULT_PARSER_FEATURE;</b>
<b class="nc">&nbsp;        for (Feature feature : features) {</b>
<b class="nc">&nbsp;            featureValues = Feature.config(featureValues, feature, true);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return parse(input, off, len, charsetDecoder, featureValues);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Object parse(byte[] input, int off, int len, CharsetDecoder charsetDecoder, int features) {
<b class="nc">&nbsp;        charsetDecoder.reset();</b>
&nbsp;
<b class="nc">&nbsp;        int scaleLength = (int) (len * (double) charsetDecoder.maxCharsPerByte());</b>
<b class="nc">&nbsp;        char[] chars = CHARS_UPDATER.getAndSet(CACHE, null);</b>
<b class="nc">&nbsp;        if (chars == null || chars.length &lt; scaleLength) {</b>
<b class="nc">&nbsp;            chars = new char[scaleLength];</b>
&nbsp;        }
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ByteBuffer byteBuf = ByteBuffer.wrap(input, off, len);</b>
<b class="nc">&nbsp;            CharBuffer charBuf = CharBuffer.wrap(chars);</b>
<b class="nc">&nbsp;            IOUtils.decode(charsetDecoder, byteBuf, charBuf);</b>
&nbsp;
<b class="nc">&nbsp;            int position = charBuf.position();</b>
&nbsp;
<b class="nc">&nbsp;            JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                    JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                    features
&nbsp;            );
<b class="nc">&nbsp;            JSONReader jsonReader = JSONReader.of(chars, 0, position, context);</b>
&nbsp;
<b class="nc">&nbsp;            for (Feature feature : Feature.values()) {</b>
<b class="nc">&nbsp;                if ((features &amp; feature.mask) != 0) {</b>
<b class="nc">&nbsp;                    switch (feature) {</b>
&nbsp;                        case SupportArrayToBean:
<b class="nc">&nbsp;                            context.config(JSONReader.Feature.SupportArrayToBean);</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        case SupportAutoType:
<b class="nc">&nbsp;                            context.config(JSONReader.Feature.SupportAutoType);</b>
<b class="nc">&nbsp;                            break;</b>
&nbsp;                        case ErrorOnEnumNotMatch:
<b class="nc">&nbsp;                            context.config(JSONReader.Feature.ErrorOnEnumNotMatch);</b>
&nbsp;                        case SupportNonPublicField:
<b class="nc">&nbsp;                            context.config(JSONReader.Feature.FieldBased);</b>
&nbsp;                        default:
&nbsp;                            break;
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            Object object = jsonReader.read(Object.class);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
&nbsp;        } finally {
<b class="nc">&nbsp;            if (chars.length &lt;= 1024 * 64) {</b>
<b class="nc">&nbsp;                CHARS_UPDATER.set(CACHE, chars);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    public static &lt;T&gt; T parseObject(
&nbsp;            byte[] input,
&nbsp;            int off,
&nbsp;            int len,
&nbsp;            CharsetDecoder charsetDecoder,
&nbsp;            Type clazz,
&nbsp;            Feature... features) {
<b class="nc">&nbsp;        charsetDecoder.reset();</b>
&nbsp;
<b class="nc">&nbsp;        int scaleLength = (int) (len * (double) charsetDecoder.maxCharsPerByte());</b>
&nbsp;
<b class="nc">&nbsp;        char[] chars = CHARS_UPDATER.getAndSet(CACHE, null);</b>
<b class="nc">&nbsp;        if (chars == null || chars.length &lt; scaleLength) {</b>
<b class="nc">&nbsp;            chars = new char[scaleLength];</b>
&nbsp;        }
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            ByteBuffer byteBuf = ByteBuffer.wrap(input, off, len);</b>
<b class="nc">&nbsp;            CharBuffer charByte = CharBuffer.wrap(chars);</b>
<b class="nc">&nbsp;            IOUtils.decode(charsetDecoder, byteBuf, charByte);</b>
&nbsp;
<b class="nc">&nbsp;            int position = charByte.position();</b>
&nbsp;
<b class="nc">&nbsp;            JSONReader.Context context = createReadContext(</b>
<b class="nc">&nbsp;                    JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                    DEFAULT_PARSER_FEATURE,
&nbsp;                    features
&nbsp;            );
<b class="nc">&nbsp;            JSONReader jsonReader = JSONReader.of(chars, 0, position, context);</b>
&nbsp;
<b class="nc">&nbsp;            T object = jsonReader.read(clazz);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
&nbsp;        } finally {
<b class="nc">&nbsp;            if (chars.length &lt;= 1024 * 64) {</b>
<b class="nc">&nbsp;                CHARS_UPDATER.set(CACHE, chars);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T parseObject(
&nbsp;            byte[] input,
&nbsp;            int off,
&nbsp;            int len,
&nbsp;            Charset charset,
&nbsp;            Type clazz,
&nbsp;            Feature... features) {
<b class="nc">&nbsp;        try (JSONReader jsonReader =</b>
<b class="nc">&nbsp;                     JSONReader.of(</b>
&nbsp;                             input,
&nbsp;                             off,
&nbsp;                             len,
&nbsp;                             charset,
<b class="nc">&nbsp;                             createReadContext(</b>
<b class="nc">&nbsp;                                     JSONFactory.getDefaultObjectReaderProvider(),</b>
&nbsp;                                     DEFAULT_PARSER_FEATURE,
&nbsp;                                     features
&nbsp;                             )
&nbsp;                     )
&nbsp;        ) {
<b class="nc">&nbsp;            T object = jsonReader.read(clazz);</b>
<b class="nc">&nbsp;            if (object != null) {</b>
<b class="nc">&nbsp;                jsonReader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static JSONWriter.Context createWriteContext(SerializeConfig config, int featuresValue, SerializerFeature... features) {
<b class="nc">&nbsp;        for (SerializerFeature feature : features) {</b>
<b class="nc">&nbsp;            featuresValue |= feature.mask;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONWriter.Context context = new JSONWriter.Context(config.getProvider());</b>
&nbsp;
<b class="nc">&nbsp;        if (config.fieldBased) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.FieldBased);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (config.propertyNamingStrategy != null</b>
&nbsp;                &amp;&amp; config.propertyNamingStrategy != PropertyNamingStrategy.NeverUseThisValueExceptDefaultValue) {
<b class="nc">&nbsp;            NameFilter nameFilter = NameFilter.of(config.propertyNamingStrategy);</b>
<b class="nc">&nbsp;            configFilter(context, nameFilter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.DisableCircularReferenceDetect.mask) == 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.ReferenceDetection);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.UseISO8601DateFormat.mask) != 0) {</b>
<b class="nc">&nbsp;            context.setDateFormat(&quot;iso8601&quot;);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            context.setDateFormat(&quot;millis&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteMapNullValue.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteMapNullValue);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNullListAsEmpty.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteNullListAsEmpty);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNullStringAsEmpty.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteNullStringAsEmpty);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNullNumberAsZero.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteNullNumberAsZero);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNullBooleanAsFalse.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteNullBooleanAsFalse);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.BrowserCompatible.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.BrowserCompatible);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteClassName.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteClassName);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNonStringValueAsString.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteNonStringValueAsString);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteEnumUsingToString.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteEnumUsingToString);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteEnumUsingName.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteEnumsUsingName);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.NotWriteRootClassName.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.NotWriteRootClassName);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.IgnoreErrorGetter.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.IgnoreErrorGetter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteDateUseDateFormat.mask) != 0) {</b>
<b class="nc">&nbsp;            context.setDateFormat(JSON.DEFFAULT_DATE_FORMAT);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.BeanToArray.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.BeanToArray);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.UseSingleQuotes.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.UseSingleQuotes);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.MapSortField.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.MapSortField);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.PrettyFormat.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.PrettyFormat);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.WriteNonStringKeyAsString.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.WriteNonStringKeyAsString);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if ((featuresValue &amp; SerializerFeature.IgnoreNonFieldGetter.mask) != 0) {</b>
<b class="nc">&nbsp;            context.config(JSONWriter.Feature.IgnoreNonFieldGetter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (defaultTimeZone != null &amp;&amp; defaultTimeZone != DEFAULT_TIME_ZONE) {</b>
<b class="nc">&nbsp;            context.setZoneId(defaultTimeZone.toZoneId());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return context;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(Object object, SerializeFilter[] filters, SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            writer.setRootObject(object);</b>
<b class="nc">&nbsp;            for (SerializeFilter filter : filters) {</b>
<b class="nc">&nbsp;                configFilter(context, filter);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static void configFilter(JSONWriter.Context context, SerializeFilter filter) {
<b class="nc">&nbsp;        if (filter instanceof NameFilter) {</b>
<b class="nc">&nbsp;            context.setNameFilter((NameFilter) filter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof ValueFilter) {</b>
<b class="nc">&nbsp;            context.setValueFilter((ValueFilter) filter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof PropertyPreFilter) {</b>
<b class="nc">&nbsp;            context.setPropertyPreFilter((PropertyPreFilter) filter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof PropertyFilter) {</b>
<b class="nc">&nbsp;            context.setPropertyFilter((PropertyFilter) filter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof BeforeFilter) {</b>
<b class="nc">&nbsp;            context.setBeforeFilter((BeforeFilter) filter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof AfterFilter) {</b>
<b class="nc">&nbsp;            context.setAfterFilter((AfterFilter) filter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof LabelFilter) {</b>
<b class="nc">&nbsp;            context.setLabelFilter((LabelFilter) filter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (filter instanceof ContextValueFilter) {</b>
<b class="nc">&nbsp;            context.setContextValueFilter((ContextValueFilter) filter);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static byte[] toJSONBytes(Object object, SerializeFilter[] filters, SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(context)) {</b>
<b class="nc">&nbsp;            writer.setRootObject(object);</b>
<b class="nc">&nbsp;            for (SerializeFilter filter : filters) {</b>
<b class="nc">&nbsp;                configFilter(context, filter);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.getBytes();</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(Object object, boolean prettyFormat) {
<b class="nc">&nbsp;        SerializerFeature[] features = prettyFormat</b>
&nbsp;                ? new SerializerFeature[]{SerializerFeature.PrettyFormat}
&nbsp;                : new SerializerFeature[0];
<b class="nc">&nbsp;        JSONWriter.Context context =</b>
<b class="nc">&nbsp;                createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(Object object) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE);</b>
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(ex.getMessage(), cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(Object object, SerializeFilter filter0, SerializeFilter filter1, SerializeFilter... filters) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE);</b>
<b class="nc">&nbsp;        configFilter(context, filter0);</b>
<b class="nc">&nbsp;        configFilter(context, filter1);</b>
<b class="nc">&nbsp;        for (SerializeFilter filter : filters) {</b>
<b class="nc">&nbsp;            configFilter(context, filter);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(Object object, SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static byte[] toJSONBytes(Object object) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE);</b>
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(context)) {</b>
<b class="nc">&nbsp;            writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.getBytes();</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static byte[] toJSONBytes(Object object, SerializeFilter... filters) {
<b class="nc">&nbsp;        return toJSONBytes(object, filters, new SerializerFeature[0]);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static byte[] toJSONBytes(Object object, SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(context)) {</b>
<b class="nc">&nbsp;            writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.getBytes();</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONBytes error&quot;, ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(Object object, SerializeConfig config, SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(config, DEFAULT_GENERATE_FEATURE, features);</b>
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            writer.writeAny(object);</b>
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(
&nbsp;            Object object,
&nbsp;            SerializeConfig config,
&nbsp;            SerializeFilter filter,
&nbsp;            SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(config, DEFAULT_GENERATE_FEATURE, features);</b>
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            if (config.propertyNamingStrategy != null</b>
&nbsp;                    &amp;&amp; config.propertyNamingStrategy != PropertyNamingStrategy.NeverUseThisValueExceptDefaultValue) {
<b class="nc">&nbsp;                NameFilter nameFilter = NameFilter.of(config.propertyNamingStrategy);</b>
<b class="nc">&nbsp;                if (filter instanceof NameFilter) {</b>
<b class="nc">&nbsp;                    filter = NameFilter.compose(nameFilter, (NameFilter) filter);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    configFilter(context, nameFilter);</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            configFilter(context, filter);</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(
&nbsp;            Object object,
&nbsp;            SerializeFilter filter,
&nbsp;            SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
<b class="nc">&nbsp;        configFilter(context, filter);</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONWriter jsonWriter = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                jsonWriter.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                jsonWriter.setRootObject(object);</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(object.getClass());</b>
<b class="nc">&nbsp;                objectWriter.write(jsonWriter, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return jsonWriter.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONString(Object object, int defaultFeatures, SerializerFeature... features) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, defaultFeatures, features);</b>
<b class="nc">&nbsp;        try (JSONWriter jsonWriter = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                jsonWriter.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                jsonWriter.setRootObject(object);</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(object.getClass());</b>
<b class="nc">&nbsp;                objectWriter.write(jsonWriter, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return jsonWriter.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toJSONStringWithDateFormat(
&nbsp;            Object object, String dateFormat,
&nbsp;            SerializerFeature... features
&nbsp;    ) {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
<b class="nc">&nbsp;        try (JSONWriter jsonWriter = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            context.setDateFormat(dateFormat);</b>
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                jsonWriter.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(object.getClass());</b>
<b class="nc">&nbsp;                objectWriter.write(jsonWriter, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return jsonWriter.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static final int writeJSONString(
&nbsp;            OutputStream os,
&nbsp;            Object object,
&nbsp;            SerializerFeature... features) throws IOException {
<b class="nc">&nbsp;        return writeJSONString(os, object, new SerializeFilter[0], features);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static final int writeJSONString(
&nbsp;            OutputStream os,
&nbsp;            Object object,
&nbsp;            SerializeFilter[] filters) throws IOException {
<b class="nc">&nbsp;        return writeJSONString(os, object, filters, new SerializerFeature[0]);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static final int writeJSONString(
&nbsp;            OutputStream os,
&nbsp;            Object object,
&nbsp;            SerializeFilter[] filters,
&nbsp;            SerializerFeature... features
&nbsp;    ) throws IOException {
<b class="nc">&nbsp;        JSONWriter.Context context = createWriteContext(SerializeConfig.global, DEFAULT_GENERATE_FEATURE, features);</b>
<b class="nc">&nbsp;        try (JSONWriter jsonWriter = JSONWriter.ofUTF8(context)) {</b>
<b class="nc">&nbsp;            jsonWriter.setRootObject(object);</b>
<b class="nc">&nbsp;            for (SerializeFilter filter : filters) {</b>
<b class="nc">&nbsp;                configFilter(context, filter);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                jsonWriter.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = context.getObjectWriter(object.getClass());</b>
<b class="nc">&nbsp;                objectWriter.write(jsonWriter, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            byte[] bytes = jsonWriter.getBytes();</b>
<b class="nc">&nbsp;            os.write(bytes);</b>
<b class="nc">&nbsp;            return bytes.length;</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException ex) {</b>
<b class="nc">&nbsp;            Throwable cause = ex.getCause() != null ? ex.getCause() : ex;</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;writeJSONString error&quot;, cause);</b>
<b class="nc">&nbsp;        } catch (RuntimeException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;writeJSONString error&quot;, ex);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static JSONArray parseArray(String str, Feature... features) {
<b class="nc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(</b>
&nbsp;                str,
<b class="nc">&nbsp;                createReadContext(JSONFactory.getDefaultObjectReaderProvider(), DEFAULT_PARSER_FEATURE, features))</b>
&nbsp;        ) {
<b class="nc">&nbsp;            if (jsonReader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            JSONArray jsonArray = new JSONArray();</b>
<b class="nc">&nbsp;            jsonReader.read(jsonArray);</b>
<b class="nc">&nbsp;            return jsonArray;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; List&lt;T&gt; parseArray(String text, Class&lt;T&gt; type) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
<b class="nc">&nbsp;        ParameterizedTypeImpl paramType = new ParameterizedTypeImpl(new Type[]{type}, null, List.class);</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(</b>
&nbsp;                text,
<b class="nc">&nbsp;                createReadContext(JSONFactory.getDefaultObjectReaderProvider(), DEFAULT_PARSER_FEATURE))</b>
&nbsp;        ) {
<b class="nc">&nbsp;            return reader.read(paramType);</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; List&lt;T&gt; parseArray(String text, Class&lt;T&gt; type, Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
<b class="nc">&nbsp;        ParameterizedTypeImpl paramType = new ParameterizedTypeImpl(new Type[]{type}, null, List.class);</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(</b>
&nbsp;                text,
<b class="nc">&nbsp;                createReadContext(JSONFactory.getDefaultObjectReaderProvider(), DEFAULT_PARSER_FEATURE, features))</b>
&nbsp;        ) {
<b class="nc">&nbsp;            return reader.read(paramType);</b>
<b class="nc">&nbsp;        } catch (com.alibaba.fastjson2.JSONException e) {</b>
<b class="nc">&nbsp;            Throwable cause = e.getCause();</b>
<b class="nc">&nbsp;            if (cause == null) {</b>
<b class="nc">&nbsp;                cause = e;</b>
&nbsp;            }
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), cause);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isValid(String str) {
<b class="nc">&nbsp;        return com.alibaba.fastjson2.JSON.isValid(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isValidArray(String str) {
<b class="nc">&nbsp;        return com.alibaba.fastjson2.JSON.isValidArray(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isValidObject(String str) {
<b class="nc">&nbsp;        return com.alibaba.fastjson2.JSON.isValidObject(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T toJavaObject(JSON json, Class&lt;T&gt; clazz) {
<b class="nc">&nbsp;        if (json instanceof JSONObject) {</b>
<b class="nc">&nbsp;            return ((JSONObject) json).toJavaObject(clazz);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String str = toJSONString(json);</b>
<b class="nc">&nbsp;        return parseObject(str, clazz);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Object toJSON(Object javaObject) {
<b class="nc">&nbsp;        if (javaObject instanceof JSON) {</b>
<b class="nc">&nbsp;            return javaObject;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String str = JSON.toJSONString(javaObject);</b>
<b class="nc">&nbsp;        Object object = JSON.parse(str);</b>
<b class="nc">&nbsp;        if (object instanceof List) {</b>
<b class="nc">&nbsp;            return new JSONArray((List) object);</b>
&nbsp;        }
<b class="nc">&nbsp;        return object;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static List&lt;Object&gt; parseArray(String text, Type[] types) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
<b class="nc">&nbsp;        List array = new JSONArray(types.length);</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(</b>
&nbsp;                text,
<b class="nc">&nbsp;                createReadContext(JSONFactory.getDefaultObjectReaderProvider(), DEFAULT_GENERATE_FEATURE))</b>
&nbsp;        ) {
<b class="nc">&nbsp;            reader.startArray();</b>
<b class="nc">&nbsp;            for (Type itemType : types) {</b>
<b class="nc">&nbsp;                array.add(</b>
<b class="nc">&nbsp;                        reader.read(itemType)</b>
&nbsp;                );
&nbsp;            }
<b class="nc">&nbsp;            reader.endArray();</b>
<b class="nc">&nbsp;            reader.handleResolveTasks(array);</b>
<b class="nc">&nbsp;            return array;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    static class Cache {</b>
&nbsp;        volatile char[] chars;
&nbsp;    }
&nbsp;
&nbsp;    public String toJSONString() {
<b class="nc">&nbsp;        return com.alibaba.fastjson2.JSON.toJSONString(this, JSONWriter.Feature.ReferenceDetection);</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-09 20:12</div>
</div>
</body>
</html>
