


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > TypeUtils</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.alibaba.fastjson2.util</a>
</div>

<h1>Coverage Summary for Class: TypeUtils (com.alibaba.fastjson2.util)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">TypeUtils</td>
<td class="coverageStat">
  <span class="percent">
    84.8%
  </span>
  <span class="absValue">
    (67/79)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    51.9%
  </span>
  <span class="absValue">
    (1173/2261)
  </span>
</td>
</tr>
  <tr>
    <td class="name">TypeUtils$Cache</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$X1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/17)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">TypeUtils$X2</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/2)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/14)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    81%
  </span>
  <span class="absValue">
    (68/84)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    51.2%
  </span>
  <span class="absValue">
    (1174/2293)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.alibaba.fastjson2.util;
&nbsp;
&nbsp;import com.alibaba.fastjson2.*;
&nbsp;import com.alibaba.fastjson2.reader.*;
&nbsp;import com.alibaba.fastjson2.writer.ObjectWriter;
&nbsp;import com.alibaba.fastjson2.writer.ObjectWriterPrimitiveImpl;
&nbsp;
&nbsp;import java.lang.invoke.*;
&nbsp;import java.lang.reflect.*;
&nbsp;import java.math.BigDecimal;
&nbsp;import java.math.BigInteger;
&nbsp;import java.nio.charset.StandardCharsets;
&nbsp;import java.time.*;
&nbsp;import java.util.*;
&nbsp;import java.util.concurrent.*;
&nbsp;import java.util.concurrent.atomic.AtomicBoolean;
&nbsp;import java.util.concurrent.atomic.AtomicInteger;
&nbsp;import java.util.concurrent.atomic.AtomicLong;
&nbsp;import java.util.concurrent.atomic.AtomicReferenceFieldUpdater;
&nbsp;import java.util.function.*;
&nbsp;
&nbsp;import static com.alibaba.fastjson2.util.JDKUtils.FIELD_DECIMAL_INT_COMPACT_OFFSET;
&nbsp;import static java.lang.invoke.MethodType.methodType;
&nbsp;
<b class="fc">&nbsp;public class TypeUtils {</b>
&nbsp;    public static final Class CLASS_JSON_OBJECT_1x;
&nbsp;    public static final Field FIELD_JSON_OBJECT_1x_map;
&nbsp;    public static final Class CLASS_JSON_ARRAY_1x;
&nbsp;
<b class="fc">&nbsp;    public static final Class CLASS_SINGLE_SET = Collections.singleton(1).getClass();</b>
<b class="fc">&nbsp;    public static final Class CLASS_SINGLE_LIST = Collections.singletonList(1).getClass();</b>
<b class="fc">&nbsp;    public static final Class CLASS_UNMODIFIABLE_COLLECTION = Collections.unmodifiableCollection(new ArrayList&lt;&gt;()).getClass();</b>
<b class="fc">&nbsp;    public static final Class CLASS_UNMODIFIABLE_LIST = Collections.unmodifiableList(new ArrayList&lt;&gt;()).getClass();</b>
<b class="fc">&nbsp;    public static final Class CLASS_UNMODIFIABLE_SET = Collections.unmodifiableSet(new HashSet&lt;&gt;()).getClass();</b>
<b class="fc">&nbsp;    public static final Class CLASS_UNMODIFIABLE_SORTED_SET = Collections.unmodifiableSortedSet(new TreeSet&lt;&gt;()).getClass();</b>
<b class="fc">&nbsp;    public static final Class CLASS_UNMODIFIABLE_NAVIGABLE_SET = Collections.unmodifiableNavigableSet(new TreeSet&lt;&gt;()).getClass();</b>
<b class="fc">&nbsp;    public static final ParameterizedType PARAM_TYPE_LIST_STR = new ParameterizedTypeImpl(List.class, String.class);</b>
&nbsp;
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_SUPPLIER = MethodType.methodType(Supplier.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_FUNCTION = MethodType.methodType(Function.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_TO_INT_FUNCTION = MethodType.methodType(ToIntFunction.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_TO_LONG_FUNCTION = MethodType.methodType(ToLongFunction.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_OBJECT_INT_CONSUMER = MethodType.methodType(ObjIntConsumer.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_INT_FUNCTION = MethodType.methodType(IntFunction.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_LONG_FUNCTION = MethodType.methodType(LongFunction.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_BI_FUNCTION = MethodType.methodType(BiFunction.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_BI_CONSUMER = MethodType.methodType(BiConsumer.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_VOO = MethodType.methodType(void.class, Object.class, Object.class);</b>
&nbsp;
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_OBJECT = MethodType.methodType(Object.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_OBJECT_OBJECT = MethodType.methodType(Object.class, Object.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_INT_OBJECT = MethodType.methodType(int.class, Object.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_LONG_OBJECT = MethodType.methodType(long.class, Object.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_VOID_OBJECT_INT = MethodType.methodType(void.class, Object.class, int.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_OBJECT_LONG = MethodType.methodType(Object.class, long.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_VOID_LONG = MethodType.methodType(void.class, long.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_OBJECT_OBJECT_OBJECT = MethodType.methodType(Object.class, Object.class, Object.class);</b>
&nbsp;
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_VOID = MethodType.methodType(void.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_VOID_INT = MethodType.methodType(void.class, int.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_VOID_STRING = MethodType.methodType(void.class, String.class);</b>
<b class="fc">&nbsp;    public static final MethodType METHOD_TYPE_OBJECT_INT = MethodType.methodType(Object.class, int.class);</b>
&nbsp;
<b class="fc">&nbsp;    public static final BigInteger BIGINT_INT32_MIN = BigInteger.valueOf(Integer.MIN_VALUE);</b>
<b class="fc">&nbsp;    public static final BigInteger BIGINT_INT32_MAX = BigInteger.valueOf(Integer.MAX_VALUE);</b>
<b class="fc">&nbsp;    public static final BigInteger BIGINT_INT64_MIN = BigInteger.valueOf(Long.MIN_VALUE);</b>
<b class="fc">&nbsp;    public static final BigInteger BIGINT_INT64_MAX = BigInteger.valueOf(Long.MAX_VALUE);</b>
&nbsp;
&nbsp;    /**
&nbsp;     * All the positive powers of 10 that can be
&nbsp;     * represented exactly in double/float.
&nbsp;     */
<b class="fc">&nbsp;    public static final double[] SMALL_10_POW = {</b>
&nbsp;            1.0e0, 1.0e1, 1.0e2, 1.0e3, 1.0e4,
&nbsp;            1.0e5, 1.0e6, 1.0e7, 1.0e8, 1.0e9,
&nbsp;            1.0e10, 1.0e11, 1.0e12, 1.0e13, 1.0e14,
&nbsp;            1.0e15, 1.0e16, 1.0e17, 1.0e18, 1.0e19,
&nbsp;            1.0e20, 1.0e21, 1.0e22
&nbsp;    };
&nbsp;
<b class="fc">&nbsp;    static final float[] SINGLE_SMALL_10_POW = {</b>
&nbsp;            1.0e0f, 1.0e1f, 1.0e2f, 1.0e3f, 1.0e4f,
&nbsp;            1.0e5f, 1.0e6f, 1.0e7f, 1.0e8f, 1.0e9f,
&nbsp;            1.0e10f
&nbsp;    };
&nbsp;
<b class="fc">&nbsp;    static final double[] BIG_10_POW = {</b>
&nbsp;            1e16, 1e32, 1e64, 1e128, 1e256};
<b class="fc">&nbsp;    static final double[] TINY_10_POW = {</b>
&nbsp;            1e-16, 1e-32, 1e-64, 1e-128, 1e-256};
&nbsp;    static volatile boolean METHOD_NEW_PROXY_INSTANCE_ERROR;
&nbsp;    static volatile MethodHandle METHOD_NEW_PROXY_INSTANCE;
&nbsp;
&nbsp;    public static &lt;T&gt; T newProxyInstance(Class&lt;T&gt; objectClass, JSONObject object) {
<b class="fc">&nbsp;        MethodHandle newProxyInstance = METHOD_NEW_PROXY_INSTANCE;</b>
&nbsp;        try {
<b class="fc">&nbsp;            if (newProxyInstance == null) {</b>
<b class="fc">&nbsp;                Class&lt;?&gt; proxyClass = Class.forName(&quot;java.lang.reflect.Proxy&quot;);</b>
<b class="fc">&nbsp;                MethodHandles.Lookup lookup = JDKUtils.trustedLookup(proxyClass);</b>
<b class="fc">&nbsp;                newProxyInstance = lookup.findStatic(</b>
&nbsp;                        proxyClass,
&nbsp;                        &quot;newProxyInstance&quot;,
<b class="fc">&nbsp;                        methodType(Object.class, ClassLoader.class, Class[].class, InvocationHandler.class)</b>
&nbsp;                );
<b class="fc">&nbsp;                METHOD_NEW_PROXY_INSTANCE = newProxyInstance;</b>
&nbsp;            }
<b class="nc">&nbsp;        } catch (Throwable ignored) {</b>
<b class="nc">&nbsp;            METHOD_NEW_PROXY_INSTANCE_ERROR = true;</b>
<b class="fc">&nbsp;        }</b>
&nbsp;
&nbsp;        try {
<b class="fc">&nbsp;            return (T) newProxyInstance.invokeExact(objectClass.getClassLoader(), new Class[]{objectClass}, (InvocationHandler) object);</b>
<b class="nc">&nbsp;        } catch (Throwable e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;create proxy error : &quot; + objectClass, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    static class X1 {</b>
&nbsp;        static final Function&lt;byte[], char[]&gt; TO_CHARS;
&nbsp;
&nbsp;        static {
<b class="nc">&nbsp;            Function&lt;byte[], char[]&gt; toChars = null;</b>
<b class="nc">&nbsp;            if (JDKUtils.JVM_VERSION &gt; 9) {</b>
&nbsp;                try {
<b class="nc">&nbsp;                    Class&lt;?&gt; latin1Class = Class.forName(&quot;java.lang.StringLatin1&quot;);</b>
<b class="nc">&nbsp;                    MethodHandles.Lookup lookup = JDKUtils.trustedLookup(latin1Class);</b>
<b class="nc">&nbsp;                    MethodHandle handle = lookup.findStatic(</b>
<b class="nc">&nbsp;                            latin1Class, &quot;toChars&quot;, MethodType.methodType(char[].class, byte[].class)</b>
&nbsp;                    );
&nbsp;
<b class="nc">&nbsp;                    CallSite callSite = LambdaMetafactory.metafactory(</b>
&nbsp;                            lookup,
&nbsp;                            &quot;apply&quot;,
<b class="nc">&nbsp;                            methodType(Function.class),</b>
<b class="nc">&nbsp;                            methodType(Object.class, Object.class),</b>
&nbsp;                            handle,
<b class="nc">&nbsp;                            methodType(char[].class, byte[].class)</b>
&nbsp;                    );
<b class="nc">&nbsp;                    toChars = (Function&lt;byte[], char[]&gt;) callSite.getTarget().invokeExact();</b>
<b class="nc">&nbsp;                } catch (Throwable ignored) {</b>
&nbsp;                    // ignored
<b class="nc">&nbsp;                }</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (toChars == null) {</b>
<b class="nc">&nbsp;                toChars = TypeUtils::toAsciiCharArray;</b>
&nbsp;            }
<b class="nc">&nbsp;            TO_CHARS = toChars;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    static class X2 {</b>
&nbsp;        static final String[] chars;
&nbsp;        static final String[] chars2;
&nbsp;        static final char START = &#39; &#39;; // 32
&nbsp;        static final char END = &#39;~&#39;; // 126
&nbsp;        static final int SIZE2 = (END - START + 1);
&nbsp;
&nbsp;        static {
<b class="nc">&nbsp;            String[] array0 = new String[128];</b>
<b class="nc">&nbsp;            for (char i = 0; i &lt; array0.length; i++) {</b>
<b class="nc">&nbsp;                array0[i] = Character.toString(i);</b>
&nbsp;            }
<b class="nc">&nbsp;            chars = array0;</b>
&nbsp;
<b class="nc">&nbsp;            String[] array1 = new String[SIZE2 * SIZE2];</b>
<b class="nc">&nbsp;            char[] c2 = new char[2];</b>
<b class="nc">&nbsp;            for (char i = START; i &lt;= END; i++) {</b>
<b class="nc">&nbsp;                for (char j = START; j &lt;= END; j++) {</b>
<b class="nc">&nbsp;                    int value = (i - START) * SIZE2 + (j - START);</b>
<b class="nc">&nbsp;                    c2[0] = i;</b>
<b class="nc">&nbsp;                    c2[1] = j;</b>
<b class="nc">&nbsp;                    array1[value] = new String(c2);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            chars2 = array1;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    static char[] toAsciiCharArray(byte[] bytes) {
<b class="fc">&nbsp;        char[] charArray = new char[bytes.length];</b>
<b class="fc">&nbsp;        for (int i = 0; i &lt; bytes.length; i++) {</b>
<b class="fc">&nbsp;            charArray[i] = (char) bytes[i];</b>
&nbsp;        }
<b class="fc">&nbsp;        return charArray;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toString(char ch) {
<b class="fc">&nbsp;        if (ch &lt; X2.chars.length) {</b>
<b class="fc">&nbsp;            return X2.chars[ch];</b>
&nbsp;        }
<b class="nc">&nbsp;        return Character.toString(ch);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toString(byte ch) {
<b class="nc">&nbsp;        if (ch &gt;= 0 &amp;&amp; ch &lt; X2.chars.length) {</b>
<b class="nc">&nbsp;            return X2.chars[ch];</b>
&nbsp;        }
<b class="nc">&nbsp;        return new String(new byte[]{ch}, StandardCharsets.ISO_8859_1);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toString(char c0, char c1) {
<b class="fc">&nbsp;        if (c0 &gt;= X2.START &amp;&amp; c0 &lt;= X2.END &amp;&amp; c1 &gt;= X2.START &amp;&amp; c1 &lt;= X2.END) {</b>
<b class="fc">&nbsp;            int value = (c0 - X2.START) * X2.SIZE2 + (c1 - X2.START);</b>
<b class="fc">&nbsp;            return X2.chars2[value];</b>
&nbsp;        }
<b class="fc">&nbsp;        return new String(new char[]{c0, c1});</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String toString(byte c0, byte c1) {
<b class="fc">&nbsp;        if (c0 &gt;= X2.START &amp;&amp; c0 &lt;= X2.END &amp;&amp; c1 &gt;= X2.START &amp;&amp; c1 &lt;= X2.END) {</b>
<b class="fc">&nbsp;            int value = (c0 - X2.START) * X2.SIZE2 + (c1 - X2.START);</b>
<b class="fc">&nbsp;            return X2.chars2[value];</b>
&nbsp;        }
<b class="nc">&nbsp;        return new String(new byte[]{c0, c1}, StandardCharsets.ISO_8859_1);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Type intern(Type type) {
<b class="fc">&nbsp;        if (type instanceof ParameterizedType) {</b>
<b class="fc">&nbsp;            ParameterizedType paramType = (ParameterizedType) type;</b>
<b class="fc">&nbsp;            Type rawType = paramType.getRawType();</b>
<b class="fc">&nbsp;            Type[] actualTypeArguments = paramType.getActualTypeArguments();</b>
<b class="fc">&nbsp;            if (rawType == List.class) {</b>
<b class="fc">&nbsp;                if (actualTypeArguments.length == 1) {</b>
<b class="fc">&nbsp;                    if (actualTypeArguments[0] == String.class) {</b>
<b class="fc">&nbsp;                        return PARAM_TYPE_LIST_STR;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return type;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static double parseDouble(byte[] in, int off, int len) throws NumberFormatException {
<b class="fc">&nbsp;        boolean isNegative = false;</b>
<b class="fc">&nbsp;        boolean signSeen = false;</b>
&nbsp;        int decExp;
&nbsp;        byte c;
<b class="fc">&nbsp;        int end = off + len;</b>
&nbsp;
&nbsp;        parseNumber:
&nbsp;        try {
&nbsp;            // throws NullPointerException if null
<b class="fc">&nbsp;            if (len == 0) {</b>
<b class="nc">&nbsp;                throw new NumberFormatException(&quot;empty String&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;            int i = off;</b>
<b class="fc">&nbsp;            switch (in[i]) {</b>
&nbsp;                case &#39;-&#39;:
<b class="nc">&nbsp;                    isNegative = true;</b>
&nbsp;                case &#39;+&#39;:
<b class="nc">&nbsp;                    i++;</b>
<b class="nc">&nbsp;                    signSeen = true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            char[] digits = new char[len];</b>
&nbsp;
<b class="fc">&nbsp;            int nDigits = 0;</b>
<b class="fc">&nbsp;            boolean decSeen = false;</b>
<b class="fc">&nbsp;            int decPt = 0;</b>
<b class="fc">&nbsp;            int nLeadZero = 0;</b>
<b class="fc">&nbsp;            int nTrailZero = 0;</b>
&nbsp;
&nbsp;            skipLeadingZerosLoop:
<b class="fc">&nbsp;            while (i &lt; end) {</b>
<b class="fc">&nbsp;                c = in[i];</b>
<b class="fc">&nbsp;                if (c == &#39;0&#39;) {</b>
<b class="nc">&nbsp;                    nLeadZero++;</b>
<b class="fc">&nbsp;                } else if (c == &#39;.&#39;) {</b>
<b class="nc">&nbsp;                    if (decSeen) {</b>
<b class="nc">&nbsp;                        throw new NumberFormatException(&quot;multiple points&quot;);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    decPt = i - off;</b>
<b class="nc">&nbsp;                    if (signSeen) {</b>
<b class="nc">&nbsp;                        decPt -= 1;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    decSeen = true;</b>
&nbsp;                } else {
&nbsp;                    break skipLeadingZerosLoop;
&nbsp;                }
<b class="nc">&nbsp;                i++;</b>
&nbsp;            }
&nbsp;            digitLoop:
<b class="fc">&nbsp;            while (i &lt; end) {</b>
<b class="fc">&nbsp;                c = in[i];</b>
<b class="fc">&nbsp;                if (c &gt;= &#39;1&#39; &amp;&amp; c &lt;= &#39;9&#39;) {</b>
<b class="fc">&nbsp;                    digits[nDigits++] = (char) c;</b>
<b class="fc">&nbsp;                    nTrailZero = 0;</b>
<b class="fc">&nbsp;                } else if (c == &#39;0&#39;) {</b>
<b class="fc">&nbsp;                    digits[nDigits++] = (char) c;</b>
<b class="fc">&nbsp;                    nTrailZero++;</b>
<b class="fc">&nbsp;                } else if (c == &#39;.&#39;) {</b>
<b class="fc">&nbsp;                    if (decSeen) {</b>
<b class="nc">&nbsp;                        throw new NumberFormatException(&quot;multiple points&quot;);</b>
&nbsp;                    }
<b class="fc">&nbsp;                    decPt = i - off;</b>
<b class="fc">&nbsp;                    if (signSeen) {</b>
<b class="nc">&nbsp;                        decPt -= 1;</b>
&nbsp;                    }
<b class="fc">&nbsp;                    decSeen = true;</b>
&nbsp;                } else {
&nbsp;                    break digitLoop;
&nbsp;                }
<b class="fc">&nbsp;                i++;</b>
&nbsp;            }
<b class="fc">&nbsp;            nDigits -= nTrailZero;</b>
&nbsp;
<b class="fc">&nbsp;            boolean isZero = (nDigits == 0);</b>
<b class="fc">&nbsp;            if (isZero &amp;&amp; nLeadZero == 0) {</b>
<b class="nc">&nbsp;                break parseNumber; // go throw exception</b>
&nbsp;            }
<b class="fc">&nbsp;            if (decSeen) {</b>
<b class="fc">&nbsp;                decExp = decPt - nLeadZero;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                decExp = nDigits + nTrailZero;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if ((i &lt; end) &amp;&amp; (((c = in[i]) == &#39;e&#39;) || (c == &#39;E&#39;))) {</b>
<b class="fc">&nbsp;                int expSign = 1;</b>
<b class="fc">&nbsp;                int expVal = 0;</b>
<b class="fc">&nbsp;                int reallyBig = Integer.MAX_VALUE / 10;</b>
<b class="fc">&nbsp;                boolean expOverflow = false;</b>
<b class="fc">&nbsp;                switch (in[++i]) {</b>
&nbsp;                    case &#39;-&#39;:
<b class="nc">&nbsp;                        expSign = -1;</b>
&nbsp;                    case &#39;+&#39;:
<b class="nc">&nbsp;                        i++;</b>
&nbsp;                }
<b class="fc">&nbsp;                int expAt = i;</b>
&nbsp;                expLoop:
<b class="fc">&nbsp;                while (i &lt; end) {</b>
<b class="fc">&nbsp;                    if (expVal &gt;= reallyBig) {</b>
<b class="nc">&nbsp;                        expOverflow = true;</b>
&nbsp;                    }
<b class="fc">&nbsp;                    c = in[i++];</b>
<b class="fc">&nbsp;                    if (c &gt;= &#39;0&#39; &amp;&amp; c &lt;= &#39;9&#39;) {</b>
<b class="fc">&nbsp;                        expVal = expVal * 10 + ((int) c - (int) &#39;0&#39;);</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        i--;           // back up.</b>
<b class="nc">&nbsp;                        break expLoop; // stop parsing exponent.</b>
&nbsp;                    }
&nbsp;                }
<b class="fc">&nbsp;                final int BIG_DECIMAL_EXPONENT = 324;</b>
<b class="fc">&nbsp;                int expLimit = BIG_DECIMAL_EXPONENT + nDigits + nTrailZero;</b>
<b class="fc">&nbsp;                if (expOverflow || (expVal &gt; expLimit)) {</b>
<b class="nc">&nbsp;                    decExp = expSign * expLimit;</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    decExp = decExp + expSign * expVal;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (i == expAt) {</b>
<b class="nc">&nbsp;                    break parseNumber; // certainly bad</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (i &lt; end &amp;&amp; (i != end - 1)) {</b>
<b class="nc">&nbsp;                break parseNumber; // go throw exception</b>
&nbsp;            }
<b class="fc">&nbsp;            if (isZero) {</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
<b class="fc">&nbsp;            return doubleValue(isNegative, decExp, digits, nDigits);</b>
<b class="nc">&nbsp;        } catch (StringIndexOutOfBoundsException e) {</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new NumberFormatException(&quot;For input string: \&quot;&quot; + new String(in, off, len) + &quot;\&quot;&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static double parseDouble(char[] in, int off, int len) throws NumberFormatException {
<b class="fc">&nbsp;        boolean isNegative = false;</b>
<b class="fc">&nbsp;        boolean signSeen = false;</b>
&nbsp;        int decExp;
&nbsp;        char c;
<b class="fc">&nbsp;        int end = off + len;</b>
&nbsp;
&nbsp;        parseNumber:
&nbsp;        try {
&nbsp;            // throws NullPointerException if null
<b class="fc">&nbsp;            if (len == 0) {</b>
<b class="nc">&nbsp;                throw new NumberFormatException(&quot;empty String&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;            int i = off;</b>
<b class="fc">&nbsp;            switch (in[i]) {</b>
&nbsp;                case &#39;-&#39;:
<b class="nc">&nbsp;                    isNegative = true;</b>
&nbsp;                case &#39;+&#39;:
<b class="nc">&nbsp;                    i++;</b>
<b class="nc">&nbsp;                    signSeen = true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            char[] digits = new char[len];</b>
&nbsp;
<b class="fc">&nbsp;            int nDigits = 0;</b>
<b class="fc">&nbsp;            boolean decSeen = false;</b>
<b class="fc">&nbsp;            int decPt = 0;</b>
<b class="fc">&nbsp;            int nLeadZero = 0;</b>
<b class="fc">&nbsp;            int nTrailZero = 0;</b>
&nbsp;
&nbsp;            skipLeadingZerosLoop:
<b class="fc">&nbsp;            while (i &lt; end) {</b>
<b class="fc">&nbsp;                c = in[i];</b>
<b class="fc">&nbsp;                if (c == &#39;0&#39;) {</b>
<b class="nc">&nbsp;                    nLeadZero++;</b>
<b class="fc">&nbsp;                } else if (c == &#39;.&#39;) {</b>
<b class="nc">&nbsp;                    if (decSeen) {</b>
<b class="nc">&nbsp;                        throw new NumberFormatException(&quot;multiple points&quot;);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    decPt = i - off;</b>
<b class="nc">&nbsp;                    if (signSeen) {</b>
<b class="nc">&nbsp;                        decPt -= 1;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    decSeen = true;</b>
&nbsp;                } else {
&nbsp;                    break skipLeadingZerosLoop;
&nbsp;                }
<b class="nc">&nbsp;                i++;</b>
&nbsp;            }
&nbsp;            digitLoop:
<b class="fc">&nbsp;            while (i &lt; end) {</b>
<b class="fc">&nbsp;                c = in[i];</b>
<b class="fc">&nbsp;                if (c &gt;= &#39;1&#39; &amp;&amp; c &lt;= &#39;9&#39;) {</b>
<b class="fc">&nbsp;                    digits[nDigits++] = c;</b>
<b class="fc">&nbsp;                    nTrailZero = 0;</b>
<b class="fc">&nbsp;                } else if (c == &#39;0&#39;) {</b>
<b class="fc">&nbsp;                    digits[nDigits++] = c;</b>
<b class="fc">&nbsp;                    nTrailZero++;</b>
<b class="fc">&nbsp;                } else if (c == &#39;.&#39;) {</b>
<b class="fc">&nbsp;                    if (decSeen) {</b>
<b class="nc">&nbsp;                        throw new NumberFormatException(&quot;multiple points&quot;);</b>
&nbsp;                    }
<b class="fc">&nbsp;                    decPt = i - off;</b>
<b class="fc">&nbsp;                    if (signSeen) {</b>
<b class="nc">&nbsp;                        decPt -= 1;</b>
&nbsp;                    }
<b class="fc">&nbsp;                    decSeen = true;</b>
&nbsp;                } else {
&nbsp;                    break digitLoop;
&nbsp;                }
<b class="fc">&nbsp;                i++;</b>
&nbsp;            }
<b class="fc">&nbsp;            nDigits -= nTrailZero;</b>
&nbsp;
<b class="fc">&nbsp;            boolean isZero = (nDigits == 0);</b>
<b class="fc">&nbsp;            if (isZero &amp;&amp; nLeadZero == 0) {</b>
<b class="nc">&nbsp;                break parseNumber; // go throw exception</b>
&nbsp;            }
<b class="fc">&nbsp;            if (decSeen) {</b>
<b class="fc">&nbsp;                decExp = decPt - nLeadZero;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                decExp = nDigits + nTrailZero;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if ((i &lt; end) &amp;&amp; (((c = in[i]) == &#39;e&#39;) || (c == &#39;E&#39;))) {</b>
<b class="fc">&nbsp;                int expSign = 1;</b>
<b class="fc">&nbsp;                int expVal = 0;</b>
<b class="fc">&nbsp;                int reallyBig = Integer.MAX_VALUE / 10;</b>
<b class="fc">&nbsp;                boolean expOverflow = false;</b>
<b class="fc">&nbsp;                switch (in[++i]) {</b>
&nbsp;                    case &#39;-&#39;:
<b class="nc">&nbsp;                        expSign = -1;</b>
&nbsp;                    case &#39;+&#39;:
<b class="nc">&nbsp;                        i++;</b>
&nbsp;                }
<b class="fc">&nbsp;                int expAt = i;</b>
&nbsp;                expLoop:
<b class="fc">&nbsp;                while (i &lt; end) {</b>
<b class="fc">&nbsp;                    if (expVal &gt;= reallyBig) {</b>
<b class="nc">&nbsp;                        expOverflow = true;</b>
&nbsp;                    }
<b class="fc">&nbsp;                    c = in[i++];</b>
<b class="fc">&nbsp;                    if (c &gt;= &#39;0&#39; &amp;&amp; c &lt;= &#39;9&#39;) {</b>
<b class="fc">&nbsp;                        expVal = expVal * 10 + ((int) c - (int) &#39;0&#39;);</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        i--;           // back up.</b>
<b class="nc">&nbsp;                        break expLoop; // stop parsing exponent.</b>
&nbsp;                    }
&nbsp;                }
<b class="fc">&nbsp;                final int BIG_DECIMAL_EXPONENT = 324;</b>
<b class="fc">&nbsp;                int expLimit = BIG_DECIMAL_EXPONENT + nDigits + nTrailZero;</b>
<b class="fc">&nbsp;                if (expOverflow || (expVal &gt; expLimit)) {</b>
<b class="nc">&nbsp;                    decExp = expSign * expLimit;</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    decExp = decExp + expSign * expVal;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (i == expAt) {</b>
<b class="nc">&nbsp;                    break parseNumber; // certainly bad</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (i &lt; end &amp;&amp; (i != end - 1)) {</b>
<b class="nc">&nbsp;                break parseNumber; // go throw exception</b>
&nbsp;            }
<b class="fc">&nbsp;            if (isZero) {</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
<b class="fc">&nbsp;            return doubleValue(isNegative, decExp, digits, nDigits);</b>
<b class="nc">&nbsp;        } catch (StringIndexOutOfBoundsException e) {</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new NumberFormatException(&quot;For input string: \&quot;&quot; + new String(in, off, len) + &quot;\&quot;&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static float parseFloat(byte[] in, int off, int len) throws NumberFormatException {
<b class="fc">&nbsp;        boolean isNegative = false;</b>
<b class="fc">&nbsp;        boolean signSeen = false;</b>
&nbsp;        int decExp;
&nbsp;        byte c;
<b class="fc">&nbsp;        int end = off + len;</b>
&nbsp;
&nbsp;        parseNumber:
&nbsp;        try {
&nbsp;            // throws NullPointerException if null
<b class="fc">&nbsp;            if (len == 0) {</b>
<b class="nc">&nbsp;                throw new NumberFormatException(&quot;empty String&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;            int i = off;</b>
<b class="fc">&nbsp;            switch (in[i]) {</b>
&nbsp;                case &#39;-&#39;:
<b class="nc">&nbsp;                    isNegative = true;</b>
&nbsp;                case &#39;+&#39;:
<b class="nc">&nbsp;                    i++;</b>
<b class="nc">&nbsp;                    signSeen = true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            char[] digits = new char[len];</b>
&nbsp;
<b class="fc">&nbsp;            int nDigits = 0;</b>
<b class="fc">&nbsp;            boolean decSeen = false;</b>
<b class="fc">&nbsp;            int decPt = 0;</b>
<b class="fc">&nbsp;            int nLeadZero = 0;</b>
<b class="fc">&nbsp;            int nTrailZero = 0;</b>
&nbsp;
&nbsp;            skipLeadingZerosLoop:
<b class="fc">&nbsp;            while (i &lt; end) {</b>
<b class="fc">&nbsp;                c = in[i];</b>
<b class="fc">&nbsp;                if (c == &#39;0&#39;) {</b>
<b class="nc">&nbsp;                    nLeadZero++;</b>
<b class="fc">&nbsp;                } else if (c == &#39;.&#39;) {</b>
<b class="nc">&nbsp;                    if (decSeen) {</b>
<b class="nc">&nbsp;                        throw new NumberFormatException(&quot;multiple points&quot;);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    decPt = i - off;</b>
<b class="nc">&nbsp;                    if (signSeen) {</b>
<b class="nc">&nbsp;                        decPt -= 1;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    decSeen = true;</b>
&nbsp;                } else {
&nbsp;                    break skipLeadingZerosLoop;
&nbsp;                }
<b class="nc">&nbsp;                i++;</b>
&nbsp;            }
&nbsp;            digitLoop:
<b class="fc">&nbsp;            while (i &lt; end) {</b>
<b class="fc">&nbsp;                c = in[i];</b>
<b class="fc">&nbsp;                if (c &gt;= &#39;1&#39; &amp;&amp; c &lt;= &#39;9&#39;) {</b>
<b class="fc">&nbsp;                    digits[nDigits++] = (char) c;</b>
<b class="fc">&nbsp;                    nTrailZero = 0;</b>
<b class="fc">&nbsp;                } else if (c == &#39;0&#39;) {</b>
<b class="fc">&nbsp;                    digits[nDigits++] = (char) c;</b>
<b class="fc">&nbsp;                    nTrailZero++;</b>
<b class="fc">&nbsp;                } else if (c == &#39;.&#39;) {</b>
<b class="fc">&nbsp;                    if (decSeen) {</b>
<b class="nc">&nbsp;                        throw new NumberFormatException(&quot;multiple points&quot;);</b>
&nbsp;                    }
<b class="fc">&nbsp;                    decPt = i - off;</b>
<b class="fc">&nbsp;                    if (signSeen) {</b>
<b class="nc">&nbsp;                        decPt -= 1;</b>
&nbsp;                    }
<b class="fc">&nbsp;                    decSeen = true;</b>
&nbsp;                } else {
&nbsp;                    break digitLoop;
&nbsp;                }
<b class="fc">&nbsp;                i++;</b>
&nbsp;            }
<b class="fc">&nbsp;            nDigits -= nTrailZero;</b>
&nbsp;
<b class="fc">&nbsp;            boolean isZero = (nDigits == 0);</b>
<b class="fc">&nbsp;            if (isZero &amp;&amp; nLeadZero == 0) {</b>
<b class="nc">&nbsp;                break parseNumber; // go throw exception</b>
&nbsp;            }
<b class="fc">&nbsp;            if (decSeen) {</b>
<b class="fc">&nbsp;                decExp = decPt - nLeadZero;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                decExp = nDigits + nTrailZero;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if ((i &lt; end) &amp;&amp; (((c = in[i]) == &#39;e&#39;) || (c == &#39;E&#39;))) {</b>
<b class="nc">&nbsp;                int expSign = 1;</b>
<b class="nc">&nbsp;                int expVal = 0;</b>
<b class="nc">&nbsp;                int reallyBig = Integer.MAX_VALUE / 10;</b>
<b class="nc">&nbsp;                boolean expOverflow = false;</b>
<b class="nc">&nbsp;                switch (in[++i]) {</b>
&nbsp;                    case &#39;-&#39;:
<b class="nc">&nbsp;                        expSign = -1;</b>
&nbsp;                    case &#39;+&#39;:
<b class="nc">&nbsp;                        i++;</b>
&nbsp;                }
<b class="nc">&nbsp;                int expAt = i;</b>
&nbsp;                expLoop:
<b class="nc">&nbsp;                while (i &lt; end) {</b>
<b class="nc">&nbsp;                    if (expVal &gt;= reallyBig) {</b>
<b class="nc">&nbsp;                        expOverflow = true;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    c = in[i++];</b>
<b class="nc">&nbsp;                    if (c &gt;= &#39;0&#39; &amp;&amp; c &lt;= &#39;9&#39;) {</b>
<b class="nc">&nbsp;                        expVal = expVal * 10 + ((int) c - (int) &#39;0&#39;);</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        i--;           // back up.</b>
<b class="nc">&nbsp;                        break expLoop; // stop parsing exponent.</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                final int BIG_DECIMAL_EXPONENT = 324;</b>
<b class="nc">&nbsp;                int expLimit = BIG_DECIMAL_EXPONENT + nDigits + nTrailZero;</b>
<b class="nc">&nbsp;                if (expOverflow || (expVal &gt; expLimit)) {</b>
<b class="nc">&nbsp;                    decExp = expSign * expLimit;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    decExp = decExp + expSign * expVal;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if (i == expAt) {</b>
<b class="nc">&nbsp;                    break parseNumber; // certainly bad</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (i &lt; end &amp;&amp; (i != end - 1)) {</b>
<b class="nc">&nbsp;                break parseNumber; // go throw exception</b>
&nbsp;            }
<b class="fc">&nbsp;            if (isZero) {</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
<b class="fc">&nbsp;            return floatValue(isNegative, decExp, digits, nDigits);</b>
<b class="nc">&nbsp;        } catch (StringIndexOutOfBoundsException e) {</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new NumberFormatException(&quot;For input string: \&quot;&quot; + new String(in, off, len) + &quot;\&quot;&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static float parseFloat(char[] in, int off, int len) throws NumberFormatException {
<b class="fc">&nbsp;        boolean isNegative = false;</b>
<b class="fc">&nbsp;        boolean signSeen = false;</b>
&nbsp;        int decExp;
&nbsp;        char c;
<b class="fc">&nbsp;        int end = off + len;</b>
&nbsp;
&nbsp;        parseNumber:
&nbsp;        try {
&nbsp;            // throws NullPointerException if null
<b class="fc">&nbsp;            if (len == 0) {</b>
<b class="nc">&nbsp;                throw new NumberFormatException(&quot;empty String&quot;);</b>
&nbsp;            }
<b class="fc">&nbsp;            int i = off;</b>
<b class="fc">&nbsp;            switch (in[i]) {</b>
&nbsp;                case &#39;-&#39;:
<b class="nc">&nbsp;                    isNegative = true;</b>
&nbsp;                case &#39;+&#39;:
<b class="nc">&nbsp;                    i++;</b>
<b class="nc">&nbsp;                    signSeen = true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            char[] digits = new char[len];</b>
&nbsp;
<b class="fc">&nbsp;            int nDigits = 0;</b>
<b class="fc">&nbsp;            boolean decSeen = false;</b>
<b class="fc">&nbsp;            int decPt = 0;</b>
<b class="fc">&nbsp;            int nLeadZero = 0;</b>
<b class="fc">&nbsp;            int nTrailZero = 0;</b>
&nbsp;
&nbsp;            skipLeadingZerosLoop:
<b class="fc">&nbsp;            while (i &lt; end) {</b>
<b class="fc">&nbsp;                c = in[i];</b>
<b class="fc">&nbsp;                if (c == &#39;0&#39;) {</b>
<b class="nc">&nbsp;                    nLeadZero++;</b>
<b class="fc">&nbsp;                } else if (c == &#39;.&#39;) {</b>
<b class="nc">&nbsp;                    if (decSeen) {</b>
<b class="nc">&nbsp;                        throw new NumberFormatException(&quot;multiple points&quot;);</b>
&nbsp;                    }
<b class="nc">&nbsp;                    decPt = i - off;</b>
<b class="nc">&nbsp;                    if (signSeen) {</b>
<b class="nc">&nbsp;                        decPt -= 1;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    decSeen = true;</b>
&nbsp;                } else {
&nbsp;                    break skipLeadingZerosLoop;
&nbsp;                }
<b class="nc">&nbsp;                i++;</b>
&nbsp;            }
&nbsp;            digitLoop:
<b class="fc">&nbsp;            while (i &lt; end) {</b>
<b class="fc">&nbsp;                c = in[i];</b>
<b class="fc">&nbsp;                if (c &gt;= &#39;1&#39; &amp;&amp; c &lt;= &#39;9&#39;) {</b>
<b class="fc">&nbsp;                    digits[nDigits++] = c;</b>
<b class="fc">&nbsp;                    nTrailZero = 0;</b>
<b class="fc">&nbsp;                } else if (c == &#39;0&#39;) {</b>
<b class="fc">&nbsp;                    digits[nDigits++] = c;</b>
<b class="fc">&nbsp;                    nTrailZero++;</b>
<b class="fc">&nbsp;                } else if (c == &#39;.&#39;) {</b>
<b class="fc">&nbsp;                    if (decSeen) {</b>
<b class="nc">&nbsp;                        throw new NumberFormatException(&quot;multiple points&quot;);</b>
&nbsp;                    }
<b class="fc">&nbsp;                    decPt = i - off;</b>
<b class="fc">&nbsp;                    if (signSeen) {</b>
<b class="nc">&nbsp;                        decPt -= 1;</b>
&nbsp;                    }
<b class="fc">&nbsp;                    decSeen = true;</b>
&nbsp;                } else {
&nbsp;                    break digitLoop;
&nbsp;                }
<b class="fc">&nbsp;                i++;</b>
&nbsp;            }
<b class="fc">&nbsp;            nDigits -= nTrailZero;</b>
&nbsp;
<b class="fc">&nbsp;            boolean isZero = (nDigits == 0);</b>
<b class="fc">&nbsp;            if (isZero &amp;&amp; nLeadZero == 0) {</b>
<b class="nc">&nbsp;                break parseNumber; // go throw exception</b>
&nbsp;            }
<b class="fc">&nbsp;            if (decSeen) {</b>
<b class="fc">&nbsp;                decExp = decPt - nLeadZero;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                decExp = nDigits + nTrailZero;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if ((i &lt; end) &amp;&amp; (((c = in[i]) == &#39;e&#39;) || (c == &#39;E&#39;))) {</b>
<b class="nc">&nbsp;                int expSign = 1;</b>
<b class="nc">&nbsp;                int expVal = 0;</b>
<b class="nc">&nbsp;                int reallyBig = Integer.MAX_VALUE / 10;</b>
<b class="nc">&nbsp;                boolean expOverflow = false;</b>
<b class="nc">&nbsp;                switch (in[++i]) {</b>
&nbsp;                    case &#39;-&#39;:
<b class="nc">&nbsp;                        expSign = -1;</b>
&nbsp;                    case &#39;+&#39;:
<b class="nc">&nbsp;                        i++;</b>
&nbsp;                }
<b class="nc">&nbsp;                int expAt = i;</b>
&nbsp;                expLoop:
<b class="nc">&nbsp;                while (i &lt; end) {</b>
<b class="nc">&nbsp;                    if (expVal &gt;= reallyBig) {</b>
<b class="nc">&nbsp;                        expOverflow = true;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    c = in[i++];</b>
<b class="nc">&nbsp;                    if (c &gt;= &#39;0&#39; &amp;&amp; c &lt;= &#39;9&#39;) {</b>
<b class="nc">&nbsp;                        expVal = expVal * 10 + ((int) c - (int) &#39;0&#39;);</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        i--;           // back up.</b>
<b class="nc">&nbsp;                        break expLoop; // stop parsing exponent.</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                final int BIG_DECIMAL_EXPONENT = 324;</b>
<b class="nc">&nbsp;                int expLimit = BIG_DECIMAL_EXPONENT + nDigits + nTrailZero;</b>
<b class="nc">&nbsp;                if (expOverflow || (expVal &gt; expLimit)) {</b>
<b class="nc">&nbsp;                    decExp = expSign * expLimit;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    decExp = decExp + expSign * expVal;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if (i == expAt) {</b>
<b class="nc">&nbsp;                    break parseNumber; // certainly bad</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (i &lt; end &amp;&amp; (i != end - 1)) {</b>
<b class="nc">&nbsp;                break parseNumber; // go throw exception</b>
&nbsp;            }
<b class="fc">&nbsp;            if (isZero) {</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
<b class="fc">&nbsp;            return floatValue(isNegative, decExp, digits, nDigits);</b>
<b class="nc">&nbsp;        } catch (StringIndexOutOfBoundsException e) {</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new NumberFormatException(&quot;For input string: \&quot;&quot; + new String(in, off, len) + &quot;\&quot;&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static double doubleValue(boolean isNegative, int decExp, char[] digits, int nDigits) {
<b class="fc">&nbsp;        final int MAX_DECIMAL_EXPONENT = 308;</b>
<b class="fc">&nbsp;        final int MIN_DECIMAL_EXPONENT = -324;</b>
<b class="fc">&nbsp;        final int MAX_NDIGITS = 1100;</b>
<b class="fc">&nbsp;        final int INT_DECIMAL_DIGITS = 9;</b>
<b class="fc">&nbsp;        final int MAX_DECIMAL_DIGITS = 15;</b>
<b class="fc">&nbsp;        final int DOUBLE_EXP_BIAS = 1023;</b>
<b class="fc">&nbsp;        final int EXP_SHIFT = 53 /*DOUBLE_SIGNIFICAND_WIDTH*/ - 1;</b>
<b class="fc">&nbsp;        final long FRACT_HOB = (1L &lt;&lt; EXP_SHIFT); // assumed High-Order bit</b>
<b class="fc">&nbsp;        final int MAX_SMALL_TEN = SMALL_10_POW.length - 1;</b>
<b class="fc">&nbsp;        final int SINGLE_MAX_SMALL_TEN = SINGLE_SMALL_10_POW.length - 1;</b>
&nbsp;
<b class="fc">&nbsp;        int kDigits = Math.min(nDigits, MAX_DECIMAL_DIGITS + 1);</b>
&nbsp;
<b class="fc">&nbsp;        int iValue = (int) digits[0] - (int) &#39;0&#39;;</b>
<b class="fc">&nbsp;        int iDigits = Math.min(kDigits, INT_DECIMAL_DIGITS);</b>
<b class="fc">&nbsp;        for (int i = 1; i &lt; iDigits; i++) {</b>
<b class="fc">&nbsp;            iValue = iValue * 10 + (int) digits[i] - (int) &#39;0&#39;;</b>
&nbsp;        }
<b class="fc">&nbsp;        long lValue = (long) iValue;</b>
<b class="fc">&nbsp;        for (int i = iDigits; i &lt; kDigits; i++) {</b>
<b class="nc">&nbsp;            lValue = lValue * 10L + (long) ((int) digits[i] - (int) &#39;0&#39;);</b>
&nbsp;        }
<b class="fc">&nbsp;        double dValue = (double) lValue;</b>
<b class="fc">&nbsp;        int exp = decExp - kDigits;</b>
&nbsp;
<b class="fc">&nbsp;        if (nDigits &lt;= MAX_DECIMAL_DIGITS) {</b>
<b class="fc">&nbsp;            if (exp == 0 || dValue == 0.0) {</b>
<b class="fc">&nbsp;                return (isNegative) ? -dValue : dValue; // small floating integer</b>
<b class="fc">&nbsp;            } else if (exp &gt;= 0) {</b>
<b class="fc">&nbsp;                if (exp &lt;= MAX_SMALL_TEN) {</b>
<b class="nc">&nbsp;                    double rValue = dValue * SMALL_10_POW[exp];</b>
<b class="nc">&nbsp;                    return (isNegative) ? -rValue : rValue;</b>
&nbsp;                }
<b class="fc">&nbsp;                int slop = MAX_DECIMAL_DIGITS - kDigits;</b>
<b class="fc">&nbsp;                if (exp &lt;= MAX_SMALL_TEN + slop) {</b>
<b class="nc">&nbsp;                    dValue *= SMALL_10_POW[slop];</b>
<b class="nc">&nbsp;                    double rValue = dValue * SMALL_10_POW[exp - slop];</b>
<b class="nc">&nbsp;                    return (isNegative) ? -rValue : rValue;</b>
&nbsp;                }
<b class="fc">&nbsp;            } else {</b>
<b class="fc">&nbsp;                if (exp &gt;= -MAX_SMALL_TEN) {</b>
<b class="fc">&nbsp;                    double rValue = dValue / SMALL_10_POW[-exp];</b>
<b class="fc">&nbsp;                    return (isNegative) ? -rValue : rValue;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (exp &gt; 0) {</b>
<b class="fc">&nbsp;            if (decExp &gt; MAX_DECIMAL_EXPONENT + 1) {</b>
<b class="nc">&nbsp;                return (isNegative) ? Double.NEGATIVE_INFINITY : Double.POSITIVE_INFINITY;</b>
&nbsp;            }
<b class="fc">&nbsp;            if ((exp &amp; 15) != 0) {</b>
<b class="fc">&nbsp;                dValue *= SMALL_10_POW[exp &amp; 15];</b>
&nbsp;            }
<b class="fc">&nbsp;            if ((exp &gt;&gt;= 4) != 0) {</b>
&nbsp;                int j;
<b class="fc">&nbsp;                for (j = 0; exp &gt; 1; j++, exp &gt;&gt;= 1) {</b>
<b class="fc">&nbsp;                    if ((exp &amp; 1) != 0) {</b>
<b class="fc">&nbsp;                        dValue *= BIG_10_POW[j];</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                double t = dValue * BIG_10_POW[j];</b>
<b class="fc">&nbsp;                if (Double.isInfinite(t)) {</b>
<b class="nc">&nbsp;                    t = dValue / 2.0;</b>
<b class="nc">&nbsp;                    t *= BIG_10_POW[j];</b>
<b class="nc">&nbsp;                    if (Double.isInfinite(t)) {</b>
<b class="nc">&nbsp;                        return (isNegative) ? Double.NEGATIVE_INFINITY : Double.POSITIVE_INFINITY;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    t = Double.MAX_VALUE;</b>
&nbsp;                }
<b class="fc">&nbsp;                dValue = t;</b>
<b class="fc">&nbsp;            }</b>
<b class="nc">&nbsp;        } else if (exp &lt; 0) {</b>
<b class="nc">&nbsp;            exp = -exp;</b>
<b class="nc">&nbsp;            if (decExp &lt; MIN_DECIMAL_EXPONENT - 1) {</b>
<b class="nc">&nbsp;                return (isNegative) ? -0.0 : 0.0;</b>
&nbsp;            }
<b class="nc">&nbsp;            if ((exp &amp; 15) != 0) {</b>
<b class="nc">&nbsp;                dValue /= SMALL_10_POW[exp &amp; 15];</b>
&nbsp;            }
<b class="nc">&nbsp;            if ((exp &gt;&gt;= 4) != 0) {</b>
&nbsp;                int j;
<b class="nc">&nbsp;                for (j = 0; exp &gt; 1; j++, exp &gt;&gt;= 1) {</b>
<b class="nc">&nbsp;                    if ((exp &amp; 1) != 0) {</b>
<b class="nc">&nbsp;                        dValue *= TINY_10_POW[j];</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                double t = dValue * TINY_10_POW[j];</b>
<b class="nc">&nbsp;                if (t == 0.0) {</b>
<b class="nc">&nbsp;                    t = dValue * 2.0;</b>
<b class="nc">&nbsp;                    t *= TINY_10_POW[j];</b>
<b class="nc">&nbsp;                    if (t == 0.0) {</b>
<b class="nc">&nbsp;                        return (isNegative) ? -0.0 : 0.0;</b>
&nbsp;                    }
<b class="nc">&nbsp;                    t = Double.MIN_VALUE;</b>
&nbsp;                }
<b class="nc">&nbsp;                dValue = t;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (nDigits &gt; MAX_NDIGITS) {</b>
<b class="nc">&nbsp;            nDigits = MAX_NDIGITS + 1;</b>
<b class="nc">&nbsp;            digits[MAX_NDIGITS] = &#39;1&#39;;</b>
&nbsp;        }
<b class="fc">&nbsp;        FDBigInteger bigD0 = new FDBigInteger(lValue, digits, kDigits, nDigits);</b>
<b class="fc">&nbsp;        exp = decExp - nDigits;</b>
&nbsp;
<b class="fc">&nbsp;        long ieeeBits = Double.doubleToRawLongBits(dValue); // IEEE-754 bits of double candidate</b>
<b class="fc">&nbsp;        final int B5 = Math.max(0, -exp); // powers of 5 in bigB, value is not modified inside correctionLoop</b>
<b class="fc">&nbsp;        final int D5 = Math.max(0, exp); // powers of 5 in bigD, value is not modified inside correctionLoop</b>
<b class="fc">&nbsp;        bigD0 = bigD0.multByPow52(D5, 0);</b>
<b class="fc">&nbsp;        bigD0.makeImmutable();   // prevent bigD0 modification inside correctionLoop</b>
<b class="fc">&nbsp;        FDBigInteger bigD = null;</b>
<b class="fc">&nbsp;        int prevD2 = 0;</b>
&nbsp;
&nbsp;        correctionLoop:
&nbsp;        while (true) {
&nbsp;            // here ieeeBits can&#39;t be NaN, Infinity or zero
<b class="fc">&nbsp;            int binexp = (int) (ieeeBits &gt;&gt;&gt; EXP_SHIFT);</b>
<b class="fc">&nbsp;            final long DOUBLE_SIGNIF_BIT_MASK = 0x000FFFFFFFFFFFFFL;</b>
<b class="fc">&nbsp;            long bigBbits = ieeeBits &amp; DOUBLE_SIGNIF_BIT_MASK;</b>
<b class="fc">&nbsp;            if (binexp &gt; 0) {</b>
<b class="fc">&nbsp;                bigBbits |= FRACT_HOB;</b>
&nbsp;            } else { // Normalize denormalized numbers.
<b class="nc">&nbsp;                assert bigBbits != 0L : bigBbits; // doubleToBigInt(0.0)</b>
<b class="nc">&nbsp;                int leadingZeros = Long.numberOfLeadingZeros(bigBbits);</b>
<b class="nc">&nbsp;                int shift = leadingZeros - (63 - EXP_SHIFT);</b>
<b class="nc">&nbsp;                bigBbits &lt;&lt;= shift;</b>
<b class="nc">&nbsp;                binexp = 1 - shift;</b>
&nbsp;            }
<b class="fc">&nbsp;            binexp -= DOUBLE_EXP_BIAS;</b>
<b class="fc">&nbsp;            int lowOrderZeros = Long.numberOfTrailingZeros(bigBbits);</b>
<b class="fc">&nbsp;            bigBbits &gt;&gt;&gt;= lowOrderZeros;</b>
<b class="fc">&nbsp;            final int bigIntExp = binexp - EXP_SHIFT + lowOrderZeros;</b>
<b class="fc">&nbsp;            final int bigIntNBits = EXP_SHIFT + 1 - lowOrderZeros;</b>
&nbsp;
<b class="fc">&nbsp;            int B2 = B5; // powers of 2 in bigB</b>
<b class="fc">&nbsp;            int D2 = D5; // powers of 2 in bigD</b>
&nbsp;            int Ulp2;   // powers of 2 in halfUlp.
<b class="fc">&nbsp;            if (bigIntExp &gt;= 0) {</b>
<b class="fc">&nbsp;                B2 += bigIntExp;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                D2 -= bigIntExp;</b>
&nbsp;            }
<b class="fc">&nbsp;            Ulp2 = B2;</b>
&nbsp;            // shift bigB and bigD left by a number s. t.
&nbsp;            // halfUlp is still an integer.
&nbsp;            int hulpbias;
<b class="fc">&nbsp;            if (binexp &lt;= -DOUBLE_EXP_BIAS) {</b>
&nbsp;                // This is going to be a denormalized number
&nbsp;                // (if not actually zero).
&nbsp;                // half an ULP is at 2^-(EXP_BIAS+EXP_SHIFT+1)
<b class="nc">&nbsp;                hulpbias = binexp + lowOrderZeros + DOUBLE_EXP_BIAS;</b>
&nbsp;            } else {
<b class="fc">&nbsp;                hulpbias = 1 + lowOrderZeros;</b>
&nbsp;            }
<b class="fc">&nbsp;            B2 += hulpbias;</b>
<b class="fc">&nbsp;            D2 += hulpbias;</b>
&nbsp;            // if there are common factors of 2, we might just as well
&nbsp;            // factor them out, as they add nothing useful.
<b class="fc">&nbsp;            int common2 = Math.min(B2, Math.min(D2, Ulp2));</b>
<b class="fc">&nbsp;            B2 -= common2;</b>
<b class="fc">&nbsp;            D2 -= common2;</b>
<b class="fc">&nbsp;            Ulp2 -= common2;</b>
&nbsp;            // do multiplications by powers of 5 and 2
<b class="fc">&nbsp;            FDBigInteger bigB = FDBigInteger.valueOfMulPow52(bigBbits, B5, B2);</b>
<b class="fc">&nbsp;            if (bigD == null || prevD2 != D2) {</b>
<b class="fc">&nbsp;                bigD = bigD0.leftShift(D2);</b>
<b class="fc">&nbsp;                prevD2 = D2;</b>
&nbsp;            }
&nbsp;
&nbsp;            FDBigInteger diff;
&nbsp;            int cmpResult;
&nbsp;            boolean overvalue;
<b class="fc">&nbsp;            if ((cmpResult = bigB.cmp(bigD)) &gt; 0) {</b>
<b class="fc">&nbsp;                overvalue = true; // our candidate is too big.</b>
<b class="fc">&nbsp;                diff = bigB.leftInplaceSub(bigD); // bigB is not user further - reuse</b>
<b class="fc">&nbsp;                if ((bigIntNBits == 1) &amp;&amp; (bigIntExp &gt; -DOUBLE_EXP_BIAS + 1)) {</b>
&nbsp;                    // candidate is a normalized exact power of 2 and
&nbsp;                    // is too big (larger than Double.MIN_NORMAL). We will be subtracting.
&nbsp;                    // For our purposes, ulp is the ulp of the
&nbsp;                    // next smaller range.
<b class="nc">&nbsp;                    Ulp2 -= 1;</b>
<b class="nc">&nbsp;                    if (Ulp2 &lt; 0) {</b>
&nbsp;                        // rats. Cannot de-scale ulp this far.
&nbsp;                        // must scale diff in other direction.
<b class="nc">&nbsp;                        Ulp2 = 0;</b>
<b class="nc">&nbsp;                        diff = diff.leftShift(1);</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            } else if (cmpResult &lt; 0) {</b>
<b class="nc">&nbsp;                overvalue = false; // our candidate is too small.</b>
<b class="nc">&nbsp;                diff = bigD.rightInplaceSub(bigB); // bigB is not user further - reuse</b>
&nbsp;            } else {
&nbsp;                // the candidate is exactly right!
&nbsp;                // this happens with surprising frequency
&nbsp;                break correctionLoop;
&nbsp;            }
<b class="fc">&nbsp;            cmpResult = diff.cmpPow52(B5, Ulp2);</b>
<b class="fc">&nbsp;            if ((cmpResult) &lt; 0) {</b>
&nbsp;                // difference is small.
&nbsp;                // this is close enough
<b class="fc">&nbsp;                break correctionLoop;</b>
<b class="nc">&nbsp;            } else if (cmpResult == 0) {</b>
&nbsp;                // difference is exactly half an ULP
&nbsp;                // round to some other value maybe, then finish
<b class="nc">&nbsp;                if ((ieeeBits &amp; 1) != 0) { // half ties to even</b>
<b class="nc">&nbsp;                    ieeeBits += overvalue ? -1 : 1; // nextDown or nextUp</b>
&nbsp;                }
&nbsp;                break correctionLoop;
&nbsp;            } else {
&nbsp;                // difference is non-trivial.
&nbsp;                // could scale addend by ratio of difference to
&nbsp;                // halfUlp here, if we bothered to compute that difference.
&nbsp;                // Most of the time ( I hope ) it is about 1 anyway.
<b class="nc">&nbsp;                ieeeBits += overvalue ? -1 : 1; // nextDown or nextUp</b>
<b class="nc">&nbsp;                final long DOUBLE_EXP_BIT_MASK = 0x7FF0000000000000L;</b>
<b class="nc">&nbsp;                if (ieeeBits == 0 || ieeeBits == DOUBLE_EXP_BIT_MASK) { // 0.0 or Double.POSITIVE_INFINITY</b>
<b class="nc">&nbsp;                    break correctionLoop; // oops. Fell off end of range.</b>
&nbsp;                }
&nbsp;                continue; // try again.
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        if (isNegative) {</b>
<b class="nc">&nbsp;            final long DOUBLE_SIGN_BIT_MASK = 0x8000000000000000L;</b>
<b class="nc">&nbsp;            ieeeBits |= DOUBLE_SIGN_BIT_MASK;</b>
&nbsp;        }
<b class="fc">&nbsp;        return Double.longBitsToDouble(ieeeBits);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static float floatValue(boolean isNegative, int decExponent, char[] digits, int nDigits) {
<b class="fc">&nbsp;        final int SINGLE_MAX_NDIGITS = 200;</b>
<b class="fc">&nbsp;        final int SINGLE_MAX_DECIMAL_DIGITS = 7;</b>
<b class="fc">&nbsp;        final int MAX_DECIMAL_DIGITS = 15;</b>
<b class="fc">&nbsp;        final int FLOAT_EXP_BIAS = 127;</b>
<b class="fc">&nbsp;        final int SINGLE_EXP_SHIFT = 24 /*FLOAT_SIGNIFICAND_WIDTH*/ - 1;</b>
<b class="fc">&nbsp;        final int SINGLE_MAX_SMALL_TEN = SINGLE_SMALL_10_POW.length - 1;</b>
&nbsp;
<b class="fc">&nbsp;        int kDigits = Math.min(nDigits, SINGLE_MAX_DECIMAL_DIGITS + 1);</b>
<b class="fc">&nbsp;        int iValue = (int) digits[0] - (int) &#39;0&#39;;</b>
<b class="fc">&nbsp;        for (int i = 1; i &lt; kDigits; i++) {</b>
<b class="fc">&nbsp;            iValue = iValue * 10 + (int) digits[i] - (int) &#39;0&#39;;</b>
&nbsp;        }
<b class="fc">&nbsp;        float fValue = (float) iValue;</b>
<b class="fc">&nbsp;        int exp = decExponent - kDigits;</b>
&nbsp;
<b class="fc">&nbsp;        if (nDigits &lt;= SINGLE_MAX_DECIMAL_DIGITS) {</b>
<b class="fc">&nbsp;            if (exp == 0 || fValue == 0.0f) {</b>
<b class="fc">&nbsp;                return (isNegative) ? -fValue : fValue; // small floating integer</b>
<b class="fc">&nbsp;            } else if (exp &gt;= 0) {</b>
<b class="nc">&nbsp;                if (exp &lt;= SINGLE_MAX_SMALL_TEN) {</b>
<b class="nc">&nbsp;                    fValue *= SINGLE_SMALL_10_POW[exp];</b>
<b class="nc">&nbsp;                    return (isNegative) ? -fValue : fValue;</b>
&nbsp;                }
<b class="nc">&nbsp;                int slop = SINGLE_MAX_DECIMAL_DIGITS - kDigits;</b>
<b class="nc">&nbsp;                if (exp &lt;= SINGLE_MAX_SMALL_TEN + slop) {</b>
<b class="nc">&nbsp;                    fValue *= SINGLE_SMALL_10_POW[slop];</b>
<b class="nc">&nbsp;                    fValue *= SINGLE_SMALL_10_POW[exp - slop];</b>
<b class="nc">&nbsp;                    return (isNegative) ? -fValue : fValue;</b>
&nbsp;                }
<b class="nc">&nbsp;            } else {</b>
<b class="fc">&nbsp;                if (exp &gt;= -SINGLE_MAX_SMALL_TEN) {</b>
<b class="fc">&nbsp;                    fValue /= SINGLE_SMALL_10_POW[-exp];</b>
<b class="fc">&nbsp;                    return (isNegative) ? -fValue : fValue;</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        } else if ((decExponent &gt;= nDigits) &amp;&amp; (nDigits + decExponent &lt;= MAX_DECIMAL_DIGITS)) {</b>
<b class="nc">&nbsp;            long lValue = (long) iValue;</b>
<b class="nc">&nbsp;            for (int i = kDigits; i &lt; nDigits; i++) {</b>
<b class="nc">&nbsp;                lValue = lValue * 10L + (long) ((int) digits[i] - (int) &#39;0&#39;);</b>
&nbsp;            }
<b class="nc">&nbsp;            double dValue = (double) lValue;</b>
<b class="nc">&nbsp;            exp = decExponent - nDigits;</b>
<b class="nc">&nbsp;            dValue *= SMALL_10_POW[exp];</b>
<b class="nc">&nbsp;            fValue = (float) dValue;</b>
<b class="nc">&nbsp;            return (isNegative) ? -fValue : fValue;</b>
&nbsp;        }
<b class="nc">&nbsp;        double dValue = fValue;</b>
<b class="nc">&nbsp;        if (exp &gt; 0) {</b>
<b class="nc">&nbsp;            final int SINGLE_MAX_DECIMAL_EXPONENT = 38;</b>
<b class="nc">&nbsp;            if (decExponent &gt; SINGLE_MAX_DECIMAL_EXPONENT + 1) {</b>
<b class="nc">&nbsp;                return (isNegative) ? Float.NEGATIVE_INFINITY : Float.POSITIVE_INFINITY;</b>
&nbsp;            }
<b class="nc">&nbsp;            if ((exp &amp; 15) != 0) {</b>
<b class="nc">&nbsp;                dValue *= SMALL_10_POW[exp &amp; 15];</b>
&nbsp;            }
<b class="nc">&nbsp;            if ((exp &gt;&gt;= 4) != 0) {</b>
&nbsp;                int j;
<b class="nc">&nbsp;                for (j = 0; exp &gt; 0; j++, exp &gt;&gt;= 1) {</b>
<b class="nc">&nbsp;                    if ((exp &amp; 1) != 0) {</b>
<b class="nc">&nbsp;                        dValue *= BIG_10_POW[j];</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        } else if (exp &lt; 0) {</b>
<b class="nc">&nbsp;            exp = -exp;</b>
<b class="nc">&nbsp;            final int SINGLE_MIN_DECIMAL_EXPONENT = -45;</b>
<b class="nc">&nbsp;            if (decExponent &lt; SINGLE_MIN_DECIMAL_EXPONENT - 1) {</b>
<b class="nc">&nbsp;                return (isNegative) ? -0.0f : 0.0f;</b>
&nbsp;            }
<b class="nc">&nbsp;            if ((exp &amp; 15) != 0) {</b>
<b class="nc">&nbsp;                dValue /= SMALL_10_POW[exp &amp; 15];</b>
&nbsp;            }
<b class="nc">&nbsp;            if ((exp &gt;&gt;= 4) != 0) {</b>
&nbsp;                int j;
<b class="nc">&nbsp;                for (j = 0; exp &gt; 0; j++, exp &gt;&gt;= 1) {</b>
<b class="nc">&nbsp;                    if ((exp &amp; 1) != 0) {</b>
<b class="nc">&nbsp;                        dValue *= TINY_10_POW[j];</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        fValue = Math.max(Float.MIN_VALUE, Math.min(Float.MAX_VALUE, (float) dValue));</b>
&nbsp;
<b class="nc">&nbsp;        if (nDigits &gt; SINGLE_MAX_NDIGITS) {</b>
<b class="nc">&nbsp;            nDigits = SINGLE_MAX_NDIGITS + 1;</b>
<b class="nc">&nbsp;            digits[SINGLE_MAX_NDIGITS] = &#39;1&#39;;</b>
&nbsp;        }
<b class="nc">&nbsp;        FDBigInteger bigD0 = new FDBigInteger(iValue, digits, kDigits, nDigits);</b>
<b class="nc">&nbsp;        exp = decExponent - nDigits;</b>
&nbsp;
<b class="nc">&nbsp;        int ieeeBits = Float.floatToRawIntBits(fValue); // IEEE-754 bits of float candidate</b>
<b class="nc">&nbsp;        final int B5 = Math.max(0, -exp); // powers of 5 in bigB, value is not modified inside correctionLoop</b>
<b class="nc">&nbsp;        final int D5 = Math.max(0, exp); // powers of 5 in bigD, value is not modified inside correctionLoop</b>
<b class="nc">&nbsp;        bigD0 = bigD0.multByPow52(D5, 0);</b>
<b class="nc">&nbsp;        bigD0.makeImmutable();   // prevent bigD0 modification inside correctionLoop</b>
<b class="nc">&nbsp;        FDBigInteger bigD = null;</b>
<b class="nc">&nbsp;        int prevD2 = 0;</b>
&nbsp;
&nbsp;        correctionLoop:
&nbsp;        while (true) {
&nbsp;            // here ieeeBits can&#39;t be NaN, Infinity or zero
<b class="nc">&nbsp;            int binexp = ieeeBits &gt;&gt;&gt; SINGLE_EXP_SHIFT;</b>
<b class="nc">&nbsp;            final int FLOAT_SIGNIF_BIT_MASK = 0x007FFFFF;</b>
<b class="nc">&nbsp;            int bigBbits = ieeeBits &amp; FLOAT_SIGNIF_BIT_MASK;</b>
<b class="nc">&nbsp;            if (binexp &gt; 0) {</b>
<b class="nc">&nbsp;                final int SINGLE_FRACT_HOB = 1 &lt;&lt; 23;</b>
<b class="nc">&nbsp;                bigBbits |= SINGLE_FRACT_HOB;</b>
<b class="nc">&nbsp;            } else { // Normalize denormalized numbers.</b>
<b class="nc">&nbsp;                assert bigBbits != 0 : bigBbits; // floatToBigInt(0.0)</b>
<b class="nc">&nbsp;                int leadingZeros = Integer.numberOfLeadingZeros(bigBbits);</b>
<b class="nc">&nbsp;                int shift = leadingZeros - (31 - SINGLE_EXP_SHIFT);</b>
<b class="nc">&nbsp;                bigBbits &lt;&lt;= shift;</b>
<b class="nc">&nbsp;                binexp = 1 - shift;</b>
&nbsp;            }
<b class="nc">&nbsp;            binexp -= FLOAT_EXP_BIAS;</b>
<b class="nc">&nbsp;            int lowOrderZeros = Integer.numberOfTrailingZeros(bigBbits);</b>
<b class="nc">&nbsp;            bigBbits &gt;&gt;&gt;= lowOrderZeros;</b>
<b class="nc">&nbsp;            final int bigIntExp = binexp - SINGLE_EXP_SHIFT + lowOrderZeros;</b>
<b class="nc">&nbsp;            final int bigIntNBits = SINGLE_EXP_SHIFT + 1 - lowOrderZeros;</b>
&nbsp;
<b class="nc">&nbsp;            int B2 = B5; // powers of 2 in bigB</b>
<b class="nc">&nbsp;            int D2 = D5; // powers of 2 in bigD</b>
&nbsp;            int Ulp2;   // powers of 2 in halfUlp.
<b class="nc">&nbsp;            if (bigIntExp &gt;= 0) {</b>
<b class="nc">&nbsp;                B2 += bigIntExp;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                D2 -= bigIntExp;</b>
&nbsp;            }
<b class="nc">&nbsp;            Ulp2 = B2;</b>
&nbsp;
&nbsp;            int hulpbias;
<b class="nc">&nbsp;            if (binexp &lt;= -FLOAT_EXP_BIAS) {</b>
<b class="nc">&nbsp;                hulpbias = binexp + lowOrderZeros + FLOAT_EXP_BIAS;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                hulpbias = 1 + lowOrderZeros;</b>
&nbsp;            }
<b class="nc">&nbsp;            B2 += hulpbias;</b>
<b class="nc">&nbsp;            D2 += hulpbias;</b>
&nbsp;
<b class="nc">&nbsp;            int common2 = Math.min(B2, Math.min(D2, Ulp2));</b>
<b class="nc">&nbsp;            B2 -= common2;</b>
<b class="nc">&nbsp;            D2 -= common2;</b>
<b class="nc">&nbsp;            Ulp2 -= common2;</b>
&nbsp;            // do multiplications by powers of 5 and 2
<b class="nc">&nbsp;            FDBigInteger bigB = FDBigInteger.valueOfMulPow52(bigBbits, B5, B2);</b>
<b class="nc">&nbsp;            if (bigD == null || prevD2 != D2) {</b>
<b class="nc">&nbsp;                bigD = bigD0.leftShift(D2);</b>
<b class="nc">&nbsp;                prevD2 = D2;</b>
&nbsp;            }
&nbsp;
&nbsp;            FDBigInteger diff;
&nbsp;            int cmpResult;
&nbsp;            boolean overvalue;
<b class="nc">&nbsp;            if ((cmpResult = bigB.cmp(bigD)) &gt; 0) {</b>
<b class="nc">&nbsp;                overvalue = true; // our candidate is too big.</b>
<b class="nc">&nbsp;                diff = bigB.leftInplaceSub(bigD); // bigB is not user further - reuse</b>
<b class="nc">&nbsp;                if ((bigIntNBits == 1) &amp;&amp; (bigIntExp &gt; -FLOAT_EXP_BIAS + 1)) {</b>
<b class="nc">&nbsp;                    Ulp2 -= 1;</b>
<b class="nc">&nbsp;                    if (Ulp2 &lt; 0) {</b>
<b class="nc">&nbsp;                        Ulp2 = 0;</b>
<b class="nc">&nbsp;                        diff = diff.leftShift(1);</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            } else if (cmpResult &lt; 0) {</b>
<b class="nc">&nbsp;                overvalue = false; // our candidate is too small.</b>
<b class="nc">&nbsp;                diff = bigD.rightInplaceSub(bigB); // bigB is not user further - reuse</b>
&nbsp;            } else {
&nbsp;                break correctionLoop;
&nbsp;            }
<b class="nc">&nbsp;            cmpResult = diff.cmpPow52(B5, Ulp2);</b>
<b class="nc">&nbsp;            if ((cmpResult) &lt; 0) {</b>
<b class="nc">&nbsp;                break correctionLoop;</b>
<b class="nc">&nbsp;            } else if (cmpResult == 0) {</b>
<b class="nc">&nbsp;                if ((ieeeBits &amp; 1) != 0) { // half ties to even</b>
<b class="nc">&nbsp;                    ieeeBits += overvalue ? -1 : 1; // nextDown or nextUp</b>
&nbsp;                }
&nbsp;                break correctionLoop;
&nbsp;            } else {
<b class="nc">&nbsp;                ieeeBits += overvalue ? -1 : 1; // nextDown or nextUp</b>
<b class="nc">&nbsp;                final int FLOAT_EXP_BIT_MASK = 0x7F800000;</b>
<b class="nc">&nbsp;                if (ieeeBits == 0 || ieeeBits == FLOAT_EXP_BIT_MASK) { // 0.0 or Float.POSITIVE_INFINITY</b>
<b class="nc">&nbsp;                    break correctionLoop; // oops. Fell off end of range.</b>
&nbsp;                }
&nbsp;                continue; // try again.
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (isNegative) {</b>
<b class="nc">&nbsp;            final int FLOAT_SIGN_BIT_MASK = 0x80000000;</b>
<b class="nc">&nbsp;            ieeeBits |= FLOAT_SIGN_BIT_MASK;</b>
&nbsp;        }
<b class="nc">&nbsp;        return Float.intBitsToFloat(ieeeBits);</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    static class Cache {</b>
&nbsp;        volatile char[] chars;
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    static final Cache CACHE = new Cache();</b>
<b class="fc">&nbsp;    static final AtomicReferenceFieldUpdater&lt;Cache, char[]&gt; CHARS_UPDATER</b>
<b class="fc">&nbsp;            = AtomicReferenceFieldUpdater.newUpdater(Cache.class, char[].class, &quot;chars&quot;);</b>
&nbsp;
&nbsp;    public static Class&lt;?&gt; getMapping(Type type) {
<b class="fc">&nbsp;        if (type == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type.getClass() == Class.class) {</b>
<b class="fc">&nbsp;            return (Class&lt;?&gt;) type;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type instanceof ParameterizedType) {</b>
<b class="fc">&nbsp;            return getMapping(((ParameterizedType) type).getRawType());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type instanceof TypeVariable) {</b>
<b class="fc">&nbsp;            Type boundType = ((TypeVariable&lt;?&gt;) type).getBounds()[0];</b>
<b class="fc">&nbsp;            if (boundType instanceof Class) {</b>
<b class="fc">&nbsp;                return (Class) boundType;</b>
&nbsp;            }
<b class="fc">&nbsp;            return getMapping(boundType);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type instanceof WildcardType) {</b>
<b class="fc">&nbsp;            Type[] upperBounds = ((WildcardType) type).getUpperBounds();</b>
<b class="fc">&nbsp;            if (upperBounds.length == 1) {</b>
<b class="fc">&nbsp;                return getMapping(upperBounds[0]);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type instanceof GenericArrayType) {</b>
<b class="fc">&nbsp;            Type genericComponentType = ((GenericArrayType) type).getGenericComponentType();</b>
<b class="fc">&nbsp;            Class&lt;?&gt; componentClass = getClass(genericComponentType);</b>
<b class="fc">&nbsp;            return getArrayClass(componentClass);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return Object.class;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Date toDate(Object obj) {
<b class="fc">&nbsp;        if (obj == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof Date) {</b>
<b class="nc">&nbsp;            return (Date) obj;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof Instant) {</b>
<b class="nc">&nbsp;            Instant instant = (Instant) obj;</b>
<b class="nc">&nbsp;            return new Date(</b>
<b class="nc">&nbsp;                    instant.toEpochMilli());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof ZonedDateTime) {</b>
<b class="nc">&nbsp;            ZonedDateTime zdt = (ZonedDateTime) obj;</b>
<b class="nc">&nbsp;            return new Date(</b>
<b class="nc">&nbsp;                    zdt.toInstant().toEpochMilli());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof LocalDate) {</b>
<b class="nc">&nbsp;            LocalDate localDate = (LocalDate) obj;</b>
<b class="nc">&nbsp;            ZonedDateTime zdt = localDate.atStartOfDay(ZoneId.systemDefault());</b>
<b class="nc">&nbsp;            return new Date(</b>
<b class="nc">&nbsp;                    zdt.toInstant().toEpochMilli());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof LocalDateTime) {</b>
<b class="fc">&nbsp;            LocalDateTime ldt = (LocalDateTime) obj;</b>
<b class="fc">&nbsp;            ZonedDateTime zdt = ldt.atZone(ZoneId.systemDefault());</b>
<b class="fc">&nbsp;            return new Date(</b>
<b class="fc">&nbsp;                    zdt.toInstant().toEpochMilli());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof String) {</b>
<b class="fc">&nbsp;            return DateUtils.parseDate((String) obj);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (obj instanceof Long || obj instanceof Integer) {</b>
<b class="nc">&nbsp;            return new Date(((Number) obj).longValue());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        throw new JSONException(&quot;can not cast to Date from &quot; + obj.getClass());</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Instant toInstant(Object obj) {
<b class="nc">&nbsp;        if (obj == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (obj instanceof Instant) {</b>
<b class="nc">&nbsp;            return (Instant) obj;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (obj instanceof Date) {</b>
<b class="nc">&nbsp;            return ((Date) obj).toInstant();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (obj instanceof ZonedDateTime) {</b>
<b class="nc">&nbsp;            ZonedDateTime zdt = (ZonedDateTime) obj;</b>
<b class="nc">&nbsp;            return zdt.toInstant();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (obj instanceof String) {</b>
<b class="nc">&nbsp;            String str = (String) obj;</b>
<b class="nc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
&nbsp;            JSONReader jsonReader;
<b class="nc">&nbsp;            if (str.charAt(0) != &#39;&quot;&#39;) {</b>
<b class="nc">&nbsp;                jsonReader = JSONReader.of(&#39;&quot;&#39; + str + &#39;&quot;&#39;);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                jsonReader = JSONReader.of(str);</b>
&nbsp;            }
<b class="nc">&nbsp;            return jsonReader.read(Instant.class);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (obj instanceof Map) {</b>
<b class="nc">&nbsp;            return (Instant) ObjectReaderImplInstant.INSTANCE.createInstance((Map) obj, 0L);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        throw new JSONException(&quot;can not cast to Date from &quot; + obj.getClass());</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Object[] cast(Object obj, Type[] types) {
<b class="nc">&nbsp;        if (obj == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        Object[] array = new Object[types.length];</b>
&nbsp;
<b class="nc">&nbsp;        if (obj instanceof Collection) {</b>
<b class="nc">&nbsp;            int i = 0;</b>
<b class="nc">&nbsp;            for (Object item : (Collection) obj) {</b>
<b class="nc">&nbsp;                int index = i++;</b>
<b class="nc">&nbsp;                array[index] = TypeUtils.cast(item, types[index]);</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        } else {</b>
<b class="nc">&nbsp;            Class&lt;?&gt; objectClass = obj.getClass();</b>
<b class="nc">&nbsp;            if (objectClass.isArray()) {</b>
<b class="nc">&nbsp;                int length = Array.getLength(obj);</b>
<b class="nc">&nbsp;                for (int i = 0; i &lt; array.length &amp;&amp; i &lt; length; i++) {</b>
<b class="nc">&nbsp;                    Object item = Array.get(obj, i);</b>
<b class="nc">&nbsp;                    array[i] = TypeUtils.cast(item, types[i]);</b>
&nbsp;                }
<b class="nc">&nbsp;            } else {</b>
<b class="nc">&nbsp;                throw new JSONException(&quot;can not cast to types &quot; + JSON.toJSONString(types) + &quot; from &quot; + objectClass);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return array;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String[] toStringArray(Object object) {
<b class="fc">&nbsp;        if (object == null || object instanceof String[]) {</b>
<b class="nc">&nbsp;            return (String[]) object;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (object instanceof Collection) {</b>
<b class="fc">&nbsp;            Collection collection = (Collection) object;</b>
<b class="fc">&nbsp;            String[] array = new String[collection.size()];</b>
<b class="fc">&nbsp;            int i = 0;</b>
<b class="fc">&nbsp;            for (Object item : (Collection) object) {</b>
<b class="fc">&nbsp;                int index = i++;</b>
<b class="fc">&nbsp;                array[index] = item == null || (item instanceof String) ? (String) item : item.toString();</b>
<b class="fc">&nbsp;            }</b>
<b class="fc">&nbsp;            return array;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        Class&lt;?&gt; objectClass = object.getClass();</b>
<b class="fc">&nbsp;        if (objectClass.isArray()) {</b>
<b class="fc">&nbsp;            int length = Array.getLength(object);</b>
<b class="fc">&nbsp;            String[] array = new String[length];</b>
<b class="fc">&nbsp;            for (int i = 0; i &lt; array.length; i++) {</b>
<b class="fc">&nbsp;                Object item = Array.get(object, i);</b>
<b class="fc">&nbsp;                array[i] = item == null || (item instanceof String) ? (String) item : item.toString();</b>
&nbsp;            }
<b class="fc">&nbsp;            return array;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return cast(object, String[].class);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T cast(Object obj, Type type) {
<b class="fc">&nbsp;        if (type instanceof Class) {</b>
<b class="fc">&nbsp;            return (T) cast(obj, (Class) type);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        ObjectReaderProvider provider = JSONFactory.getDefaultObjectReaderProvider();</b>
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof Collection) {</b>
<b class="nc">&nbsp;            ObjectReader objectReader = provider.getObjectReader(type);</b>
<b class="nc">&nbsp;            return (T) objectReader.createInstance((Collection) obj);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof Map) {</b>
<b class="nc">&nbsp;            ObjectReader objectReader = provider.getObjectReader(type);</b>
<b class="nc">&nbsp;            return (T) objectReader.createInstance((Map) obj, 0L);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        String json = JSON.toJSONString(obj);</b>
<b class="fc">&nbsp;        return JSON.parseObject(json, type);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T cast(Object obj, Class&lt;T&gt; targetClass) {
<b class="fc">&nbsp;        return cast(obj, targetClass, JSONFactory.getDefaultObjectReaderProvider());</b>
&nbsp;    }
&nbsp;
&nbsp;    public static &lt;T&gt; T cast(Object obj, Class&lt;T&gt; targetClass, ObjectReaderProvider provider) {
<b class="fc">&nbsp;        if (obj == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (targetClass.isInstance(obj)) {</b>
<b class="fc">&nbsp;            return (T) obj;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (targetClass == Date.class) {</b>
<b class="fc">&nbsp;            return (T) toDate(obj);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (targetClass == Instant.class) {</b>
<b class="nc">&nbsp;            return (T) toInstant(obj);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (targetClass == String.class) {</b>
<b class="nc">&nbsp;            if (obj instanceof Character) {</b>
<b class="nc">&nbsp;                return (T) obj.toString();</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return (T) JSON.toJSONString(obj);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (targetClass == AtomicInteger.class) {</b>
<b class="nc">&nbsp;            return (T) new AtomicInteger(toIntValue(obj));</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (targetClass == AtomicLong.class) {</b>
<b class="fc">&nbsp;            return (T) new AtomicLong(toLongValue(obj));</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (targetClass == AtomicBoolean.class) {</b>
<b class="nc">&nbsp;            return (T) new AtomicBoolean((Boolean) obj);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof Map) {</b>
<b class="fc">&nbsp;            ObjectReader objectReader = provider.getObjectReader(targetClass);</b>
<b class="fc">&nbsp;            return (T) objectReader.createInstance((Map) obj, 0L);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        Function typeConvert = provider.getTypeConvert(obj.getClass(), targetClass);</b>
<b class="fc">&nbsp;        if (typeConvert != null) {</b>
<b class="fc">&nbsp;            return (T) typeConvert.apply(obj);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof String) {</b>
<b class="fc">&nbsp;            String json = (String) obj;</b>
<b class="fc">&nbsp;            if (json.isEmpty() || &quot;null&quot;.equals(json)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
&nbsp;            JSONReader jsonReader;
<b class="fc">&nbsp;            char first = json.trim().charAt(0);</b>
<b class="fc">&nbsp;            if (first == &#39;&quot;&#39; || first == &#39;{&#39; || first == &#39;[&#39;) {</b>
<b class="fc">&nbsp;                jsonReader = JSONReader.of(json);</b>
&nbsp;            } else {
<b class="fc">&nbsp;                jsonReader = JSONReader.of(</b>
<b class="fc">&nbsp;                        JSON.toJSONString(json));</b>
&nbsp;            }
&nbsp;
&nbsp;            ObjectReader objectReader = JSONFactory
<b class="fc">&nbsp;                    .getDefaultObjectReaderProvider()</b>
<b class="fc">&nbsp;                    .getObjectReader(targetClass);</b>
<b class="fc">&nbsp;            return (T) objectReader.readObject(jsonReader, null, null, 0);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (targetClass.isEnum()) {</b>
<b class="nc">&nbsp;            if (obj instanceof Integer) {</b>
<b class="nc">&nbsp;                int intValue = ((Integer) obj).intValue();</b>
<b class="nc">&nbsp;                ObjectReader objectReader = JSONFactory.getDefaultObjectReaderProvider().getObjectReader(targetClass);</b>
<b class="nc">&nbsp;                if (objectReader instanceof ObjectReaderImplEnum) {</b>
<b class="nc">&nbsp;                    return (T) ((ObjectReaderImplEnum) objectReader).of(intValue);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if (objectReader instanceof ObjectReaderImplEnum2X4) {</b>
<b class="nc">&nbsp;                    return (T) ((ObjectReaderImplEnum2X4) objectReader).getEnumByOrdinal(intValue);</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (obj instanceof Collection) {</b>
<b class="fc">&nbsp;            ObjectReader objectReader = provider.getObjectReader(targetClass);</b>
<b class="fc">&nbsp;            return (T) objectReader.createInstance((Collection) obj);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        String className = targetClass.getName();</b>
<b class="fc">&nbsp;        if (obj instanceof Integer || obj instanceof Long) {</b>
<b class="nc">&nbsp;            long millis = ((Number) obj).longValue();</b>
<b class="nc">&nbsp;            switch (className) {</b>
&nbsp;                case &quot;java.sql.Date&quot;:
<b class="nc">&nbsp;                    return (T) JdbcSupport.createDate(millis);</b>
&nbsp;                case &quot;java.sql.Timestamp&quot;:
<b class="nc">&nbsp;                    return (T) JdbcSupport.createTimestamp(millis);</b>
&nbsp;                case &quot;java.sql.Time&quot;:
<b class="nc">&nbsp;                    return (T) JdbcSupport.createTime(millis);</b>
&nbsp;                default:
&nbsp;                    break;
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        ObjectWriter objectWriter = JSONFactory
<b class="fc">&nbsp;                .getDefaultObjectWriterProvider()</b>
<b class="fc">&nbsp;                .getObjectWriter(obj.getClass());</b>
<b class="fc">&nbsp;        if (objectWriter instanceof ObjectWriterPrimitiveImpl) {</b>
<b class="nc">&nbsp;            Function function = ((ObjectWriterPrimitiveImpl&lt;?&gt;) objectWriter).getFunction();</b>
<b class="nc">&nbsp;            if (function != null) {</b>
<b class="nc">&nbsp;                Object apply = function.apply(obj);</b>
<b class="nc">&nbsp;                if (targetClass.isInstance(apply)) {</b>
<b class="nc">&nbsp;                    return (T) apply;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to &quot; + className + &quot;, from &quot; + obj.getClass());</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    static final Map&lt;Class, String&gt; NAME_MAPPINGS = new IdentityHashMap&lt;&gt;();</b>
<b class="fc">&nbsp;    static final Map&lt;String, Class&gt; TYPE_MAPPINGS = new ConcurrentHashMap&lt;&gt;();</b>
&nbsp;
&nbsp;    static {
<b class="fc">&nbsp;        CLASS_JSON_OBJECT_1x = loadClass(&quot;com.alibaba.fastjson.JSONObject&quot;);</b>
&nbsp;        {
<b class="fc">&nbsp;            Field field = null;</b>
<b class="fc">&nbsp;            if (CLASS_JSON_OBJECT_1x != null) {</b>
&nbsp;                try {
<b class="fc">&nbsp;                    field = CLASS_JSON_OBJECT_1x.getDeclaredField(&quot;map&quot;);</b>
<b class="fc">&nbsp;                    field.setAccessible(true);</b>
<b class="nc">&nbsp;                } catch (Throwable ignore) {</b>
&nbsp;                    // ignore
<b class="fc">&nbsp;                }</b>
&nbsp;            }
<b class="fc">&nbsp;            FIELD_JSON_OBJECT_1x_map = field;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        CLASS_JSON_ARRAY_1x = loadClass(&quot;com.alibaba.fastjson.JSONArray&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(byte.class, &quot;B&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(short.class, &quot;S&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(int.class, &quot;I&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(long.class, &quot;J&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(float.class, &quot;F&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(double.class, &quot;D&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(char.class, &quot;C&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(boolean.class, &quot;Z&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Object[].class, &quot;[O&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Object[][].class, &quot;[[O&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(byte[].class, &quot;[B&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(byte[][].class, &quot;[[B&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(short[].class, &quot;[S&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(short[][].class, &quot;[[S&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(int[].class, &quot;[I&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(int[][].class, &quot;[[I&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(long[].class, &quot;[J&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(long[][].class, &quot;[[J&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(float[].class, &quot;[F&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(float[][].class, &quot;[[F&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(double[].class, &quot;[D&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(double[][].class, &quot;[[D&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(char[].class, &quot;[C&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(char[][].class, &quot;[[C&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(boolean[].class, &quot;[Z&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(boolean[][].class, &quot;[[Z&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Byte[].class, &quot;[Byte&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Byte[][].class, &quot;[[Byte&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Short[].class, &quot;[Short&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Short[][].class, &quot;[[Short&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Integer[].class, &quot;[Integer&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Integer[][].class, &quot;[[Integer&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Long[].class, &quot;[Long&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Long[][].class, &quot;[[Long&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Float[].class, &quot;[Float&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Float[][].class, &quot;[[Float&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Double[].class, &quot;[Double&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Double[][].class, &quot;[[Double&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Character[].class, &quot;[Character&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Character[][].class, &quot;[[Character&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Boolean[].class, &quot;[Boolean&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Boolean[][].class, &quot;[[Boolean&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(String[].class, &quot;[String&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(String[][].class, &quot;[[String&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(BigDecimal[].class, &quot;[BigDecimal&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(BigDecimal[][].class, &quot;[[BigDecimal&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(BigInteger[].class, &quot;[BigInteger&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(BigInteger[][].class, &quot;[[BigInteger&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(UUID[].class, &quot;[UUID&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(UUID[][].class, &quot;[[UUID&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Object.class, &quot;Object&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Object[].class, &quot;[O&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(HashMap.class, &quot;M&quot;);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;HashMap&quot;, HashMap.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.HashMap&quot;, HashMap.class);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(LinkedHashMap.class, &quot;LM&quot;);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;LinkedHashMap&quot;, LinkedHashMap.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.LinkedHashMap&quot;, LinkedHashMap.class);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(TreeMap.class, &quot;TM&quot;);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;TreeMap&quot;, TreeMap.class);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(ArrayList.class, &quot;A&quot;);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;ArrayList&quot;, ArrayList.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.ArrayList&quot;, ArrayList.class);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(LinkedList.class, &quot;LA&quot;);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;LA&quot;, LinkedList.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;LinkedList&quot;, LinkedList.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.LinkedList&quot;, LinkedList.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.concurrent.ConcurrentLinkedQueue&quot;, ConcurrentLinkedQueue.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.concurrent.ConcurrentLinkedDeque&quot;, ConcurrentLinkedDeque.class);</b>
&nbsp;
&nbsp;        //java.util.LinkedHashMap.class,
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(HashSet.class, &quot;HashSet&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(TreeSet.class, &quot;TreeSet&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(LinkedHashSet.class, &quot;LinkedHashSet&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(ConcurrentHashMap.class, &quot;ConcurrentHashMap&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(ConcurrentLinkedQueue.class, &quot;ConcurrentLinkedQueue&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(ConcurrentLinkedDeque.class, &quot;ConcurrentLinkedDeque&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(JSONObject.class, &quot;JSONObject&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(JSONArray.class, &quot;JSONArray&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(Currency.class, &quot;Currency&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(TimeUnit.class, &quot;TimeUnit&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        Class&lt;?&gt;[] classes = new Class[]{</b>
&nbsp;                Object.class,
&nbsp;                Cloneable.class,
&nbsp;                AutoCloseable.class,
&nbsp;                java.lang.Exception.class,
&nbsp;                java.lang.RuntimeException.class,
&nbsp;                java.lang.IllegalAccessError.class,
&nbsp;                java.lang.IllegalAccessException.class,
&nbsp;                java.lang.IllegalArgumentException.class,
&nbsp;                java.lang.IllegalMonitorStateException.class,
&nbsp;                java.lang.IllegalStateException.class,
&nbsp;                java.lang.IllegalThreadStateException.class,
&nbsp;                java.lang.IndexOutOfBoundsException.class,
&nbsp;                java.lang.InstantiationError.class,
&nbsp;                java.lang.InstantiationException.class,
&nbsp;                java.lang.InternalError.class,
&nbsp;                java.lang.InterruptedException.class,
&nbsp;                java.lang.LinkageError.class,
&nbsp;                java.lang.NegativeArraySizeException.class,
&nbsp;                java.lang.NoClassDefFoundError.class,
&nbsp;                java.lang.NoSuchFieldError.class,
&nbsp;                java.lang.NoSuchFieldException.class,
&nbsp;                java.lang.NoSuchMethodError.class,
&nbsp;                java.lang.NoSuchMethodException.class,
&nbsp;                java.lang.NullPointerException.class,
&nbsp;                java.lang.NumberFormatException.class,
&nbsp;                java.lang.OutOfMemoryError.class,
&nbsp;                java.lang.SecurityException.class,
&nbsp;                java.lang.StackOverflowError.class,
&nbsp;                java.lang.StringIndexOutOfBoundsException.class,
&nbsp;                java.lang.TypeNotPresentException.class,
&nbsp;                java.lang.VerifyError.class,
&nbsp;                java.lang.StackTraceElement.class,
&nbsp;                java.util.Hashtable.class,
&nbsp;                java.util.TreeMap.class,
&nbsp;                java.util.IdentityHashMap.class,
&nbsp;                java.util.WeakHashMap.class,
&nbsp;                java.util.HashSet.class,
&nbsp;                java.util.LinkedHashSet.class,
&nbsp;                java.util.TreeSet.class,
&nbsp;                java.util.LinkedList.class,
&nbsp;                java.util.concurrent.TimeUnit.class,
&nbsp;                java.util.concurrent.ConcurrentHashMap.class,
&nbsp;                java.util.concurrent.atomic.AtomicInteger.class,
&nbsp;                java.util.concurrent.atomic.AtomicLong.class,
<b class="fc">&nbsp;                java.util.Collections.EMPTY_MAP.getClass(),</b>
&nbsp;                java.lang.Boolean.class,
&nbsp;                java.lang.Character.class,
&nbsp;                java.lang.Byte.class,
&nbsp;                java.lang.Short.class,
&nbsp;                java.lang.Integer.class,
&nbsp;                java.lang.Long.class,
&nbsp;                java.lang.Float.class,
&nbsp;                java.lang.Double.class,
&nbsp;                java.lang.Number.class,
&nbsp;                java.lang.String.class,
&nbsp;                java.math.BigDecimal.class,
&nbsp;                java.math.BigInteger.class,
&nbsp;                java.util.BitSet.class,
&nbsp;                java.util.Calendar.class,
&nbsp;                java.util.Date.class,
&nbsp;                java.util.Locale.class,
&nbsp;                java.util.UUID.class,
&nbsp;                java.util.Currency.class,
&nbsp;                java.text.SimpleDateFormat.class,
&nbsp;                JSONObject.class,
&nbsp;                JSONArray.class,
&nbsp;                java.util.concurrent.ConcurrentSkipListMap.class,
&nbsp;                java.util.concurrent.ConcurrentSkipListSet.class,
&nbsp;        };
<b class="fc">&nbsp;        for (Class clazz : classes) {</b>
<b class="fc">&nbsp;            TYPE_MAPPINGS.put(clazz.getSimpleName(), clazz);</b>
<b class="fc">&nbsp;            TYPE_MAPPINGS.put(clazz.getName(), clazz);</b>
<b class="fc">&nbsp;            NAME_MAPPINGS.put(clazz, clazz.getSimpleName());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;JO10&quot;, JSONObject1O.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;[O&quot;, Object[].class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;[Ljava.lang.Object;&quot;, Object[].class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;[java.lang.Object&quot;, Object[].class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;[Object&quot;, Object[].class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;StackTraceElement&quot;, StackTraceElement.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;[StackTraceElement&quot;, StackTraceElement[].class);</b>
&nbsp;
<b class="fc">&nbsp;        String[] items = new String[]{</b>
&nbsp;                &quot;java.util.Collections$UnmodifiableMap&quot;,
&nbsp;                &quot;java.util.Collections$UnmodifiableCollection&quot;,
&nbsp;        };
&nbsp;
<b class="fc">&nbsp;        for (String className : items) {</b>
<b class="fc">&nbsp;            Class&lt;?&gt; clazz = loadClass(className);</b>
<b class="fc">&nbsp;            TYPE_MAPPINGS.put(clazz.getName(), clazz);</b>
&nbsp;        }
&nbsp;
&nbsp;        {
<b class="fc">&nbsp;            if (CLASS_JSON_OBJECT_1x != null) {</b>
<b class="fc">&nbsp;                TYPE_MAPPINGS.putIfAbsent(&quot;JO1&quot;, CLASS_JSON_OBJECT_1x);</b>
<b class="fc">&nbsp;                TYPE_MAPPINGS.putIfAbsent(CLASS_JSON_OBJECT_1x.getName(), CLASS_JSON_OBJECT_1x);</b>
&nbsp;            }
<b class="fc">&nbsp;            if (CLASS_JSON_ARRAY_1x != null) {</b>
<b class="fc">&nbsp;                TYPE_MAPPINGS.putIfAbsent(&quot;JA1&quot;, CLASS_JSON_ARRAY_1x);</b>
<b class="fc">&nbsp;                TYPE_MAPPINGS.putIfAbsent(CLASS_JSON_ARRAY_1x.getName(), CLASS_JSON_ARRAY_1x);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(new HashMap().keySet().getClass(), &quot;Set&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(new LinkedHashMap().keySet().getClass(), &quot;Set&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(new TreeMap&lt;&gt;().keySet().getClass(), &quot;Set&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(((Map) new ConcurrentHashMap()).keySet().getClass(), &quot;Set&quot;); // bug fix for android9</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(((Map) new ConcurrentSkipListMap()).keySet().getClass(), &quot;Set&quot;); // bug fix for android9</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;Set&quot;, HashSet.class);</b>
&nbsp;
<b class="fc">&nbsp;        NAME_MAPPINGS.put(new HashMap().values().getClass(), &quot;List&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(new LinkedHashMap().values().getClass(), &quot;List&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(new TreeMap().values().getClass(), &quot;List&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(new ConcurrentHashMap().values().getClass(), &quot;List&quot;);</b>
<b class="fc">&nbsp;        NAME_MAPPINGS.put(new ConcurrentSkipListMap().values().getClass(), &quot;List&quot;);</b>
&nbsp;
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;List&quot;, ArrayList.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.ImmutableCollections$Map1&quot;, HashMap.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.ImmutableCollections$MapN&quot;, LinkedHashMap.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.ImmutableCollections$Set12&quot;, LinkedHashSet.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.ImmutableCollections$SetN&quot;, LinkedHashSet.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.ImmutableCollections$List12&quot;, ArrayList.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.ImmutableCollections$ListN&quot;, ArrayList.class);</b>
<b class="fc">&nbsp;        TYPE_MAPPINGS.put(&quot;java.util.ImmutableCollections$SubList&quot;, ArrayList.class);</b>
&nbsp;
<b class="fc">&nbsp;        for (Map.Entry&lt;Class, String&gt; entry : NAME_MAPPINGS.entrySet()) {</b>
<b class="fc">&nbsp;            TYPE_MAPPINGS.putIfAbsent(entry.getValue(), entry.getKey());</b>
<b class="fc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getTypeName(Class type) {
<b class="fc">&nbsp;        String mapTypeName = NAME_MAPPINGS.get(type);</b>
<b class="fc">&nbsp;        if (mapTypeName != null) {</b>
<b class="fc">&nbsp;            return mapTypeName;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (Proxy.isProxyClass(type)) {</b>
<b class="fc">&nbsp;            Class[] interfaces = type.getInterfaces();</b>
<b class="fc">&nbsp;            if (interfaces.length &gt; 0) {</b>
<b class="fc">&nbsp;                type = interfaces[0];</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        String typeName = type.getTypeName();</b>
<b class="fc">&nbsp;        switch (typeName) {</b>
&nbsp;            case &quot;com.alibaba.fastjson.JSONObject&quot;:
<b class="fc">&nbsp;                NAME_MAPPINGS.putIfAbsent(type, &quot;JO1&quot;);</b>
<b class="fc">&nbsp;                return NAME_MAPPINGS.get(type);</b>
&nbsp;            case &quot;com.alibaba.fastjson.JSONArray&quot;:
<b class="fc">&nbsp;                NAME_MAPPINGS.putIfAbsent(type, &quot;JA1&quot;);</b>
<b class="fc">&nbsp;                return NAME_MAPPINGS.get(type);</b>
&nbsp;//            case &quot;org.apache.commons.lang3.tuple.ImmutablePair&quot;:
&nbsp;//                NAME_MAPPINGS.putIfAbsent(type, &quot;org.apache.commons.lang3.tuple.Pair&quot;);
&nbsp;//                return NAME_MAPPINGS.get(type);
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int index = typeName.indexOf(&#39;$&#39;);</b>
<b class="fc">&nbsp;        if (index != -1 &amp;&amp; TypeUtils.isInteger(typeName.substring(index + 1))) {</b>
<b class="fc">&nbsp;            Class superclass = type.getSuperclass();</b>
<b class="fc">&nbsp;            if (Map.class.isAssignableFrom(superclass)) {</b>
<b class="fc">&nbsp;                return getTypeName(superclass);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return typeName;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Class getMapping(String typeName) {
<b class="fc">&nbsp;        return TYPE_MAPPINGS.get(typeName);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigDecimal toBigDecimal(Object value) {
<b class="fc">&nbsp;        if (value == null || value instanceof BigDecimal) {</b>
<b class="fc">&nbsp;            return (BigDecimal) value;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Byte || value instanceof Short || value instanceof Integer || value instanceof Long) {</b>
<b class="fc">&nbsp;            return BigDecimal.valueOf(((Number) value).longValue());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="fc">&nbsp;            return new BigDecimal(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return cast(value, BigDecimal.class);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigDecimal toBigDecimal(long i) {
<b class="nc">&nbsp;        return BigDecimal.valueOf(i);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigDecimal toBigDecimal(float f) {
<b class="nc">&nbsp;        byte[] bytes = new byte[15];</b>
<b class="nc">&nbsp;        int size = DoubleToDecimal.toString(f, bytes, 0, true);</b>
<b class="nc">&nbsp;        return parseBigDecimal(bytes, 0, size);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigDecimal toBigDecimal(double d) {
<b class="nc">&nbsp;        byte[] bytes = new byte[24];</b>
<b class="nc">&nbsp;        int size = DoubleToDecimal.toString(d, bytes, 0, true);</b>
<b class="nc">&nbsp;        return parseBigDecimal(bytes, 0, size);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigDecimal toBigDecimal(String str) {
<b class="fc">&nbsp;        if (str == null || str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (JDKUtils.STRING_CODER != null) {</b>
<b class="fc">&nbsp;            int code = JDKUtils.STRING_CODER.applyAsInt(str);</b>
<b class="fc">&nbsp;            if (code == JDKUtils.LATIN1 &amp;&amp; JDKUtils.STRING_VALUE != null) {</b>
<b class="nc">&nbsp;                byte[] bytes = JDKUtils.STRING_VALUE.apply(str);</b>
<b class="nc">&nbsp;                return parseBigDecimal(bytes, 0, bytes.length);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        char[] chars = JDKUtils.getCharArray(str);</b>
<b class="fc">&nbsp;        return parseBigDecimal(chars, 0, chars.length);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigDecimal toBigDecimal(char[] chars) {
<b class="nc">&nbsp;        if (chars == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
<b class="nc">&nbsp;        return parseBigDecimal(chars, 0, chars.length);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigDecimal toBigDecimal(byte[] strBytes) {
<b class="nc">&nbsp;        if (strBytes == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
<b class="nc">&nbsp;        return parseBigDecimal(strBytes, 0, strBytes.length);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isInt32(BigInteger value) {
<b class="fc">&nbsp;        return value.compareTo(BIGINT_INT32_MIN) &gt;= 0 &amp;&amp; value.compareTo(BIGINT_INT32_MAX) &lt;= 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isInt64(BigInteger value) {
<b class="fc">&nbsp;        return value.compareTo(BIGINT_INT64_MIN) &gt;= 0 &amp;&amp; value.compareTo(BIGINT_INT64_MAX) &lt;= 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * decimal is integer, check has non-zero small
&nbsp;     *
&nbsp;     * @param decimal
&nbsp;     * @return
&nbsp;     */
&nbsp;    public static boolean isInteger(BigDecimal decimal) {
<b class="fc">&nbsp;        int scale = decimal.scale();</b>
<b class="fc">&nbsp;        if (scale == 0) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int precision = decimal.precision();</b>
<b class="fc">&nbsp;        if (precision &lt; 20) {</b>
<b class="fc">&nbsp;            if (FIELD_DECIMAL_INT_COMPACT_OFFSET != -1) {</b>
<b class="fc">&nbsp;                long intCompact = UnsafeUtils.getLong(decimal, FIELD_DECIMAL_INT_COMPACT_OFFSET);</b>
<b class="fc">&nbsp;                switch (scale) {</b>
&nbsp;                    case 1:
<b class="fc">&nbsp;                        return intCompact % 10 == 0;</b>
&nbsp;                    case 2:
<b class="nc">&nbsp;                        return intCompact % 100 == 0;</b>
&nbsp;                    case 3:
<b class="nc">&nbsp;                        return intCompact % 1000 == 0;</b>
&nbsp;                    case 4:
<b class="nc">&nbsp;                        return intCompact % 10000 == 0;</b>
&nbsp;                    case 5:
<b class="nc">&nbsp;                        return intCompact % 100000 == 0;</b>
&nbsp;                    case 6:
<b class="nc">&nbsp;                        return intCompact % 1000000 == 0;</b>
&nbsp;                    case 7:
<b class="nc">&nbsp;                        return intCompact % 10000000 == 0;</b>
&nbsp;                    case 8:
<b class="nc">&nbsp;                        return intCompact % 100000000 == 0;</b>
&nbsp;                    case 9:
<b class="nc">&nbsp;                        return intCompact % 1000000000 == 0;</b>
&nbsp;                    default:
&nbsp;                        break;
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return decimal.stripTrailingZeros().scale() == 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigInteger toBigInteger(Object value) {
<b class="fc">&nbsp;        if (value == null || value instanceof BigInteger) {</b>
<b class="fc">&nbsp;            return (BigInteger) value;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Byte || value instanceof Short || value instanceof Integer || value instanceof Long) {</b>
<b class="nc">&nbsp;            return BigInteger.valueOf(((Number) value).longValue());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="fc">&nbsp;            return new BigInteger(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to bigint&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Long toLong(Object value) {
<b class="fc">&nbsp;        if (value == null || value instanceof Long) {</b>
<b class="fc">&nbsp;            return (Long) value;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Number) {</b>
<b class="fc">&nbsp;            return Long.valueOf(((Number) value).longValue());</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof String) {</b>
<b class="nc">&nbsp;            String str = (String) value;</b>
<b class="nc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            return Long.parseLong(str);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        throw new JSONException(&quot;can not cast to long, class &quot; + value.getClass());</b>
&nbsp;    }
&nbsp;
&nbsp;    public static long toLongValue(Object value) {
<b class="fc">&nbsp;        if (value == null) {</b>
<b class="nc">&nbsp;            return 0L;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Long) {</b>
<b class="fc">&nbsp;            return (Long) value;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Number) {</b>
<b class="fc">&nbsp;            return ((Number) value).longValue();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
<b class="fc">&nbsp;            return Long.parseLong(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to long from &quot; + value.getClass());</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Boolean parseBoolean(byte[] bytes, int off, int len) {
<b class="fc">&nbsp;        switch (len) {</b>
&nbsp;            case 0:
<b class="nc">&nbsp;                return null;</b>
&nbsp;            case 1: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                if (b0 == &#39;1&#39; || b0 == &#39;Y&#39;) {</b>
<b class="nc">&nbsp;                    return Boolean.TRUE;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (b0 == &#39;0&#39; || b0 == &#39;N&#39;) {</b>
<b class="nc">&nbsp;                    return Boolean.FALSE;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 4:
<b class="fc">&nbsp;                if (bytes[off] == &#39;t&#39; &amp;&amp; bytes[off + 1] == &#39;r&#39; &amp;&amp; bytes[off + 2] == &#39;u&#39; &amp;&amp; bytes[off + 3] == &#39;e&#39;) {</b>
<b class="fc">&nbsp;                    return Boolean.TRUE;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            case 5:
<b class="nc">&nbsp;                if (bytes[off] == &#39;f&#39;</b>
&nbsp;                        &amp;&amp; bytes[off + 1] == &#39;a&#39;
&nbsp;                        &amp;&amp; bytes[off + 2] == &#39;l&#39;
&nbsp;                        &amp;&amp; bytes[off + 3] == &#39;s&#39;
&nbsp;                        &amp;&amp; bytes[off + 4] == &#39;e&#39;) {
<b class="nc">&nbsp;                    return Boolean.FALSE;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String str = new String(bytes, off, len);</b>
<b class="nc">&nbsp;        return Boolean.parseBoolean(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Boolean parseBoolean(char[] bytes, int off, int len) {
<b class="fc">&nbsp;        switch (len) {</b>
&nbsp;            case 0:
<b class="nc">&nbsp;                return null;</b>
&nbsp;            case 1: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                if (b0 == &#39;1&#39; || b0 == &#39;Y&#39;) {</b>
<b class="nc">&nbsp;                    return Boolean.TRUE;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (b0 == &#39;0&#39; || b0 == &#39;N&#39;) {</b>
<b class="nc">&nbsp;                    return Boolean.FALSE;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 4:
<b class="fc">&nbsp;                if (bytes[off] == &#39;t&#39; &amp;&amp; bytes[off + 1] == &#39;r&#39; &amp;&amp; bytes[off + 2] == &#39;u&#39; &amp;&amp; bytes[off + 3] == &#39;e&#39;) {</b>
<b class="fc">&nbsp;                    return Boolean.TRUE;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            case 5:
<b class="nc">&nbsp;                if (bytes[off] == &#39;f&#39;</b>
&nbsp;                        &amp;&amp; bytes[off + 1] == &#39;a&#39;
&nbsp;                        &amp;&amp; bytes[off + 2] == &#39;l&#39;
&nbsp;                        &amp;&amp; bytes[off + 3] == &#39;s&#39;
&nbsp;                        &amp;&amp; bytes[off + 4] == &#39;e&#39;) {
<b class="nc">&nbsp;                    return Boolean.FALSE;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String str = new String(bytes, off, len);</b>
<b class="nc">&nbsp;        return Boolean.parseBoolean(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static int parseInt(byte[] bytes, int off, int len) {
<b class="fc">&nbsp;        switch (len) {</b>
&nbsp;            case 1: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;) {</b>
<b class="nc">&nbsp;                    return b0 - &#39;0&#39;;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 2: {
<b class="fc">&nbsp;                byte b0 = bytes[off];</b>
<b class="fc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="fc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;) {
<b class="fc">&nbsp;                    return (b0 - &#39;0&#39;) * 10</b>
&nbsp;                            + (b1 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 3: {
<b class="fc">&nbsp;                byte b0 = bytes[off];</b>
<b class="fc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="fc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="fc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;) {
<b class="fc">&nbsp;                    return (b0 - &#39;0&#39;) * 100</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 10
&nbsp;                            + (b2 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 4: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 1000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 100
&nbsp;                            + (b2 - &#39;0&#39;) * 10
&nbsp;                            + (b3 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 5: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                byte b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 10_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 1000
&nbsp;                            + (b2 - &#39;0&#39;) * 100
&nbsp;                            + (b3 - &#39;0&#39;) * 10
&nbsp;                            + (b4 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 6: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                byte b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                byte b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 100_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 10_000
&nbsp;                            + (b2 - &#39;0&#39;) * 1_000
&nbsp;                            + (b3 - &#39;0&#39;) * 100
&nbsp;                            + (b4 - &#39;0&#39;) * 10
&nbsp;                            + (b5 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 7: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                byte b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                byte b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                byte b6 = bytes[off + 6];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b6 &gt;= &#39;0&#39; &amp;&amp; b6 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 1_000_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 100_000
&nbsp;                            + (b2 - &#39;0&#39;) * 10_000
&nbsp;                            + (b3 - &#39;0&#39;) * 1_000
&nbsp;                            + (b4 - &#39;0&#39;) * 100
&nbsp;                            + (b5 - &#39;0&#39;) * 10
&nbsp;                            + (b6 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 8: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                byte b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                byte b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                byte b6 = bytes[off + 6];</b>
<b class="nc">&nbsp;                byte b7 = bytes[off + 7];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b6 &gt;= &#39;0&#39; &amp;&amp; b6 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b7 &gt;= &#39;0&#39; &amp;&amp; b7 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 10_000_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 1_000_000
&nbsp;                            + (b2 - &#39;0&#39;) * 100_000
&nbsp;                            + (b3 - &#39;0&#39;) * 10_000
&nbsp;                            + (b4 - &#39;0&#39;) * 1_000
&nbsp;                            + (b5 - &#39;0&#39;) * 100
&nbsp;                            + (b6 - &#39;0&#39;) * 10
&nbsp;                            + (b7 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String str = new String(bytes, off, len);</b>
<b class="nc">&nbsp;        return Integer.parseInt(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static int parseInt(char[] bytes, int off, int len) {
<b class="fc">&nbsp;        switch (len) {</b>
&nbsp;            case 1: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;) {</b>
<b class="nc">&nbsp;                    return b0 - &#39;0&#39;;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 2: {
<b class="fc">&nbsp;                char b0 = bytes[off];</b>
<b class="fc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="fc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;) {
<b class="fc">&nbsp;                    return (b0 - &#39;0&#39;) * 10</b>
&nbsp;                            + (b1 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 3: {
<b class="fc">&nbsp;                char b0 = bytes[off];</b>
<b class="fc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="fc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="fc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;) {
<b class="fc">&nbsp;                    return (b0 - &#39;0&#39;) * 100</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 10
&nbsp;                            + (b2 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 4: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 1000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 100
&nbsp;                            + (b2 - &#39;0&#39;) * 10
&nbsp;                            + (b3 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 5: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                char b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 10_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 1000
&nbsp;                            + (b2 - &#39;0&#39;) * 100
&nbsp;                            + (b3 - &#39;0&#39;) * 10
&nbsp;                            + (b4 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 6: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                char b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                char b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 100_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 10_000
&nbsp;                            + (b2 - &#39;0&#39;) * 1_000
&nbsp;                            + (b3 - &#39;0&#39;) * 100
&nbsp;                            + (b4 - &#39;0&#39;) * 10
&nbsp;                            + (b5 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 7: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                char b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                char b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                char b6 = bytes[off + 6];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b6 &gt;= &#39;0&#39; &amp;&amp; b6 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 1_000_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 100_000
&nbsp;                            + (b2 - &#39;0&#39;) * 10_000
&nbsp;                            + (b3 - &#39;0&#39;) * 1_000
&nbsp;                            + (b4 - &#39;0&#39;) * 100
&nbsp;                            + (b5 - &#39;0&#39;) * 10
&nbsp;                            + (b6 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 8: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                char b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                char b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                char b6 = bytes[off + 6];</b>
<b class="nc">&nbsp;                char b7 = bytes[off + 7];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b6 &gt;= &#39;0&#39; &amp;&amp; b6 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b7 &gt;= &#39;0&#39; &amp;&amp; b7 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (b0 - &#39;0&#39;) * 10_000_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 1_000_000
&nbsp;                            + (b2 - &#39;0&#39;) * 100_000
&nbsp;                            + (b3 - &#39;0&#39;) * 10_000
&nbsp;                            + (b4 - &#39;0&#39;) * 1_000
&nbsp;                            + (b5 - &#39;0&#39;) * 100
&nbsp;                            + (b6 - &#39;0&#39;) * 10
&nbsp;                            + (b7 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String str = new String(bytes, off, len);</b>
<b class="nc">&nbsp;        return Integer.parseInt(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static long parseLong(byte[] bytes, int off, int len) {
<b class="fc">&nbsp;        switch (len) {</b>
&nbsp;            case 1: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;) {</b>
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;);</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 2: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 10</b>
&nbsp;                            + (b1 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 3: {
<b class="fc">&nbsp;                byte b0 = bytes[off];</b>
<b class="fc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="fc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="fc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;) {
<b class="fc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 100</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 10
&nbsp;                            + (b2 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 4: {
<b class="fc">&nbsp;                byte b0 = bytes[off];</b>
<b class="fc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="fc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="fc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="fc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;) {
<b class="fc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 1000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 100
&nbsp;                            + (b2 - &#39;0&#39;) * 10
&nbsp;                            + (b3 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 5: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                byte b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 10_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 1000
&nbsp;                            + (b2 - &#39;0&#39;) * 100
&nbsp;                            + (b3 - &#39;0&#39;) * 10
&nbsp;                            + (b4 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 6: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                byte b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                byte b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 100_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 10_000
&nbsp;                            + (b2 - &#39;0&#39;) * 1_000
&nbsp;                            + (b3 - &#39;0&#39;) * 100
&nbsp;                            + (b4 - &#39;0&#39;) * 10
&nbsp;                            + (b5 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 7: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                byte b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                byte b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                byte b6 = bytes[off + 6];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b6 &gt;= &#39;0&#39; &amp;&amp; b6 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 1_000_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 100_000
&nbsp;                            + (b2 - &#39;0&#39;) * 10_000
&nbsp;                            + (b3 - &#39;0&#39;) * 1_000
&nbsp;                            + (b4 - &#39;0&#39;) * 100
&nbsp;                            + (b5 - &#39;0&#39;) * 10
&nbsp;                            + (b6 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 8: {
<b class="nc">&nbsp;                byte b0 = bytes[off];</b>
<b class="nc">&nbsp;                byte b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                byte b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                byte b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                byte b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                byte b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                byte b6 = bytes[off + 6];</b>
<b class="nc">&nbsp;                byte b7 = bytes[off + 7];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b6 &gt;= &#39;0&#39; &amp;&amp; b6 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b7 &gt;= &#39;0&#39; &amp;&amp; b7 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 10_000_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 1_000_000
&nbsp;                            + (b2 - &#39;0&#39;) * 100_000
&nbsp;                            + (b3 - &#39;0&#39;) * 10_000
&nbsp;                            + (b4 - &#39;0&#39;) * 1_000
&nbsp;                            + (b5 - &#39;0&#39;) * 100
&nbsp;                            + (b6 - &#39;0&#39;) * 10
&nbsp;                            + (b7 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String str = new String(bytes, off, len);</b>
<b class="nc">&nbsp;        return Long.parseLong(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static long parseLong(char[] bytes, int off, int len) {
<b class="fc">&nbsp;        switch (len) {</b>
&nbsp;            case 1: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;) {</b>
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;);</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 2: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 10</b>
&nbsp;                            + (b1 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 3: {
<b class="fc">&nbsp;                char b0 = bytes[off];</b>
<b class="fc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="fc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="fc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;) {
<b class="fc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 100</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 10
&nbsp;                            + (b2 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 4: {
<b class="fc">&nbsp;                char b0 = bytes[off];</b>
<b class="fc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="fc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="fc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="fc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;) {
<b class="fc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 1000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 100
&nbsp;                            + (b2 - &#39;0&#39;) * 10
&nbsp;                            + (b3 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 5: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                char b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 10_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 1000
&nbsp;                            + (b2 - &#39;0&#39;) * 100
&nbsp;                            + (b3 - &#39;0&#39;) * 10
&nbsp;                            + (b4 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 6: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                char b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                char b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 100_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 10_000
&nbsp;                            + (b2 - &#39;0&#39;) * 1_000
&nbsp;                            + (b3 - &#39;0&#39;) * 100
&nbsp;                            + (b4 - &#39;0&#39;) * 10
&nbsp;                            + (b5 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 7: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                char b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                char b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                char b6 = bytes[off + 6];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b6 &gt;= &#39;0&#39; &amp;&amp; b6 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 1_000_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 100_000
&nbsp;                            + (b2 - &#39;0&#39;) * 10_000
&nbsp;                            + (b3 - &#39;0&#39;) * 1_000
&nbsp;                            + (b4 - &#39;0&#39;) * 100
&nbsp;                            + (b5 - &#39;0&#39;) * 10
&nbsp;                            + (b6 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            case 8: {
<b class="nc">&nbsp;                char b0 = bytes[off];</b>
<b class="nc">&nbsp;                char b1 = bytes[off + 1];</b>
<b class="nc">&nbsp;                char b2 = bytes[off + 2];</b>
<b class="nc">&nbsp;                char b3 = bytes[off + 3];</b>
<b class="nc">&nbsp;                char b4 = bytes[off + 4];</b>
<b class="nc">&nbsp;                char b5 = bytes[off + 5];</b>
<b class="nc">&nbsp;                char b6 = bytes[off + 6];</b>
<b class="nc">&nbsp;                char b7 = bytes[off + 7];</b>
<b class="nc">&nbsp;                if (b0 &gt;= &#39;0&#39; &amp;&amp; b0 &lt;= &#39;9&#39;</b>
&nbsp;                        &amp;&amp; b1 &gt;= &#39;0&#39; &amp;&amp; b1 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b2 &gt;= &#39;0&#39; &amp;&amp; b2 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b3 &gt;= &#39;0&#39; &amp;&amp; b3 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b4 &gt;= &#39;0&#39; &amp;&amp; b4 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b5 &gt;= &#39;0&#39; &amp;&amp; b5 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b6 &gt;= &#39;0&#39; &amp;&amp; b6 &lt;= &#39;9&#39;
&nbsp;                        &amp;&amp; b7 &gt;= &#39;0&#39; &amp;&amp; b7 &lt;= &#39;9&#39;
&nbsp;                ) {
<b class="nc">&nbsp;                    return (long) (b0 - &#39;0&#39;) * 10_000_000</b>
&nbsp;                            + (b1 - &#39;0&#39;) * 1_000_000
&nbsp;                            + (b2 - &#39;0&#39;) * 100_000
&nbsp;                            + (b3 - &#39;0&#39;) * 10_000
&nbsp;                            + (b4 - &#39;0&#39;) * 1_000
&nbsp;                            + (b5 - &#39;0&#39;) * 100
&nbsp;                            + (b6 - &#39;0&#39;) * 10
&nbsp;                            + (b7 - &#39;0&#39;);
&nbsp;                }
&nbsp;                break;
&nbsp;            }
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        String str = new String(bytes, off, len);</b>
<b class="nc">&nbsp;        return Long.parseLong(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigDecimal parseBigDecimal(char[] bytes, int off, int len) {
<b class="fc">&nbsp;        if (bytes == null || len == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        boolean negative = false;</b>
<b class="fc">&nbsp;        int j = off;</b>
<b class="fc">&nbsp;        if (bytes[off] == &#39;-&#39;) {</b>
<b class="fc">&nbsp;            negative = true;</b>
<b class="fc">&nbsp;            j++;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (len &lt;= 20 || (negative &amp;&amp; len == 21)) {</b>
<b class="fc">&nbsp;            int end = off + len;</b>
<b class="fc">&nbsp;            int dot = 0;</b>
<b class="fc">&nbsp;            int dotIndex = -1;</b>
<b class="fc">&nbsp;            long unscaleValue = 0;</b>
<b class="fc">&nbsp;            for (; j &lt; end; j++) {</b>
<b class="fc">&nbsp;                char b = bytes[j];</b>
<b class="fc">&nbsp;                if (b == &#39;.&#39;) {</b>
<b class="fc">&nbsp;                    dot++;</b>
<b class="fc">&nbsp;                    if (dot &gt; 1) {</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    }
<b class="fc">&nbsp;                    dotIndex = j;</b>
<b class="fc">&nbsp;                } else if (b &gt;= &#39;0&#39; &amp;&amp; b &lt;= &#39;9&#39;) {</b>
<b class="fc">&nbsp;                    unscaleValue = unscaleValue * 10 + (b - &#39;0&#39;);</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    unscaleValue = -1;</b>
<b class="fc">&nbsp;                    break;</b>
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;            int scale = 0;</b>
<b class="fc">&nbsp;            if (unscaleValue &gt;= 0 &amp;&amp; dot &lt;= 1) {</b>
<b class="fc">&nbsp;                if (negative) {</b>
<b class="nc">&nbsp;                    unscaleValue = -unscaleValue;</b>
&nbsp;                }
<b class="fc">&nbsp;                if (dotIndex != -1) {</b>
<b class="fc">&nbsp;                    scale = len - (dotIndex - off) - 1;</b>
&nbsp;                }
<b class="fc">&nbsp;                return BigDecimal.valueOf(unscaleValue, scale);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return new BigDecimal(bytes, off, len);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static BigDecimal parseBigDecimal(byte[] bytes, int off, int len) {
<b class="fc">&nbsp;        if (bytes == null || len == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        boolean negative = false;</b>
<b class="fc">&nbsp;        int j = off;</b>
<b class="fc">&nbsp;        if (bytes[off] == &#39;-&#39;) {</b>
<b class="nc">&nbsp;            negative = true;</b>
<b class="nc">&nbsp;            j++;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (len &lt;= 20 || (negative &amp;&amp; len == 21)) {</b>
<b class="fc">&nbsp;            int end = off + len;</b>
<b class="fc">&nbsp;            int dot = 0;</b>
<b class="fc">&nbsp;            int dotIndex = -1;</b>
<b class="fc">&nbsp;            long unscaleValue = 0;</b>
<b class="fc">&nbsp;            for (; j &lt; end; j++) {</b>
<b class="fc">&nbsp;                byte b = bytes[j];</b>
<b class="fc">&nbsp;                if (b == &#39;.&#39;) {</b>
<b class="fc">&nbsp;                    dot++;</b>
<b class="fc">&nbsp;                    if (dot &gt; 1) {</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    }
<b class="fc">&nbsp;                    dotIndex = j;</b>
<b class="fc">&nbsp;                } else if (b &gt;= &#39;0&#39; &amp;&amp; b &lt;= &#39;9&#39;) {</b>
<b class="fc">&nbsp;                    unscaleValue = unscaleValue * 10 + (b - &#39;0&#39;);</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    unscaleValue = -1;</b>
<b class="fc">&nbsp;                    break;</b>
&nbsp;                }
&nbsp;            }
<b class="fc">&nbsp;            int scale = 0;</b>
<b class="fc">&nbsp;            if (unscaleValue &gt;= 0 &amp;&amp; dot &lt;= 1) {</b>
<b class="fc">&nbsp;                if (negative) {</b>
<b class="nc">&nbsp;                    unscaleValue = -unscaleValue;</b>
&nbsp;                }
<b class="fc">&nbsp;                if (dotIndex != -1) {</b>
<b class="fc">&nbsp;                    scale = len - (dotIndex - off) - 1;</b>
&nbsp;                }
<b class="fc">&nbsp;                return BigDecimal.valueOf(unscaleValue, scale);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        char[] chars;
<b class="fc">&nbsp;        if (off == 0 &amp;&amp; len == bytes.length) {</b>
<b class="fc">&nbsp;            chars = X1.TO_CHARS.apply(bytes);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            chars = new char[len];</b>
<b class="nc">&nbsp;            for (int i = 0; i &lt; len; i++) {</b>
<b class="nc">&nbsp;                chars[i] = (char) bytes[off + i];</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return new BigDecimal(chars, 0, chars.length);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Integer toInteger(Object value) {
<b class="fc">&nbsp;        if (value == null || value instanceof Integer) {</b>
<b class="fc">&nbsp;            return (Integer) value;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Number) {</b>
<b class="fc">&nbsp;            return Integer.valueOf(((Number) value).intValue());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="fc">&nbsp;            return Integer.parseInt(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Map &amp;&amp; ((Map&lt;?, ?&gt;) value).isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Boolean) {</b>
<b class="nc">&nbsp;            return ((Boolean) value).booleanValue() ? 1 : 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to integer&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Byte toByte(Object value) {
<b class="fc">&nbsp;        if (value == null || value instanceof Byte) {</b>
<b class="fc">&nbsp;            return (Byte) value;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof Number) {</b>
<b class="nc">&nbsp;            return ((Number) value).byteValue();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof String) {</b>
<b class="nc">&nbsp;            String str = (String) value;</b>
<b class="nc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            return Byte.parseByte(str);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        throw new JSONException(&quot;can not cast to byte&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static byte toByteValue(Object value) {
<b class="fc">&nbsp;        if (value == null) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Byte) {</b>
<b class="fc">&nbsp;            return (Byte) value;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof Number) {</b>
<b class="nc">&nbsp;            return ((Number) value).byteValue();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof String) {</b>
<b class="nc">&nbsp;            String str = (String) value;</b>
<b class="nc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
<b class="nc">&nbsp;            return Byte.parseByte(str);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        throw new JSONException(&quot;can not cast to byte&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Short toShort(Object value) {
<b class="fc">&nbsp;        if (value == null || value instanceof Short) {</b>
<b class="fc">&nbsp;            return (Short) value;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Number) {</b>
<b class="fc">&nbsp;            return ((Number) value).shortValue();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="fc">&nbsp;            return Short.parseShort(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to byte&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static short toShortValue(Object value) {
<b class="fc">&nbsp;        if (value == null) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Short) {</b>
<b class="fc">&nbsp;            return (Short) value;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Number) {</b>
<b class="fc">&nbsp;            return (byte) ((Number) value).shortValue();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
<b class="fc">&nbsp;            return Short.parseShort(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to byte&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static int toIntValue(Object value) {
<b class="fc">&nbsp;        if (value == null) {</b>
<b class="fc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Integer) {</b>
<b class="fc">&nbsp;            return (Integer) value;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Number) {</b>
<b class="fc">&nbsp;            return Integer.valueOf(((Number) value).intValue());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (str.indexOf(&#39;.&#39;) != -1) {</b>
<b class="nc">&nbsp;                return new BigDecimal(str).intValueExact();</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            return Integer.parseInt(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to decimal&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean toBooleanValue(Object value) {
<b class="fc">&nbsp;        if (value == null) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Boolean) {</b>
<b class="fc">&nbsp;            return ((Boolean) value).booleanValue();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="fc">&nbsp;            return Boolean.parseBoolean(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Number) {</b>
<b class="fc">&nbsp;            int intValue = ((Number) value).intValue();</b>
<b class="fc">&nbsp;            if (intValue == 1) {</b>
<b class="fc">&nbsp;                return true;</b>
&nbsp;            }
<b class="fc">&nbsp;            if (intValue == 0) {</b>
<b class="fc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to boolean&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Boolean toBoolean(Object value) {
<b class="fc">&nbsp;        if (value == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Boolean) {</b>
<b class="fc">&nbsp;            return ((Boolean) value).booleanValue();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="fc">&nbsp;            return Boolean.parseBoolean(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Number) {</b>
<b class="fc">&nbsp;            int intValue = ((Number) value).intValue();</b>
<b class="fc">&nbsp;            if (intValue == 1) {</b>
<b class="fc">&nbsp;                return true;</b>
&nbsp;            }
<b class="fc">&nbsp;            if (intValue == 0) {</b>
<b class="fc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to boolean&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static float toFloatValue(Object value) {
<b class="fc">&nbsp;        if (value == null) {</b>
<b class="nc">&nbsp;            return 0F;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Float) {</b>
<b class="fc">&nbsp;            return (Float) value;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof Number) {</b>
<b class="nc">&nbsp;            return ((Number) value).floatValue();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof String) {</b>
<b class="nc">&nbsp;            String str = (String) value;</b>
<b class="nc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            }
<b class="nc">&nbsp;            return Float.parseFloat(str);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        throw new JSONException(&quot;can not cast to decimal&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Float toFloat(Object value) {
<b class="nc">&nbsp;        if (value == null || value instanceof Float) {</b>
<b class="nc">&nbsp;            return (Float) value;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof Number) {</b>
<b class="nc">&nbsp;            return ((Number) value).floatValue();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof String) {</b>
<b class="nc">&nbsp;            String str = (String) value;</b>
<b class="nc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            return Float.parseFloat(str);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        throw new JSONException(&quot;can not cast to decimal&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static double toDoubleValue(Object value) {
<b class="fc">&nbsp;        if (value == null) {</b>
<b class="nc">&nbsp;            return 0D;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Double) {</b>
<b class="fc">&nbsp;            return (Double) value;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof Number) {</b>
<b class="nc">&nbsp;            return ((Number) value).doubleValue();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (value instanceof String) {</b>
<b class="nc">&nbsp;            String str = (String) value;</b>
<b class="nc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return 0D;</b>
&nbsp;            }
<b class="nc">&nbsp;            return Double.parseDouble(str);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        throw new JSONException(&quot;can not cast to decimal&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Double toDouble(Object value) {
<b class="fc">&nbsp;        if (value == null || value instanceof Double) {</b>
<b class="fc">&nbsp;            return (Double) value;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof Number) {</b>
<b class="nc">&nbsp;            return ((Number) value).doubleValue();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (value instanceof String) {</b>
<b class="fc">&nbsp;            String str = (String) value;</b>
<b class="fc">&nbsp;            if (str.isEmpty() || &quot;null&quot;.equals(str)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="fc">&nbsp;            return Double.parseDouble(str);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        throw new JSONException(&quot;can not cast to decimal&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static int compare(Object a, Object b) {
<b class="nc">&nbsp;        if (a.getClass() == b.getClass()) {</b>
<b class="nc">&nbsp;            return ((Comparable) a).compareTo(b);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        Class typeA = a.getClass();</b>
<b class="nc">&nbsp;        Class typeB = b.getClass();</b>
&nbsp;
<b class="nc">&nbsp;        if (typeA == BigDecimal.class) {</b>
<b class="nc">&nbsp;            if (typeB == Integer.class) {</b>
<b class="nc">&nbsp;                b = new BigDecimal((Integer) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Long.class) {</b>
<b class="nc">&nbsp;                b = new BigDecimal((Long) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Float.class) {</b>
<b class="nc">&nbsp;                b = BigDecimal.valueOf((Float) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Double.class) {</b>
<b class="nc">&nbsp;                b = BigDecimal.valueOf((Double) b);</b>
<b class="nc">&nbsp;            } else if (typeB == BigInteger.class) {</b>
<b class="nc">&nbsp;                b = new BigDecimal((BigInteger) b);</b>
&nbsp;            }
<b class="nc">&nbsp;        } else if (typeA == BigInteger.class) {</b>
<b class="nc">&nbsp;            if (typeB == Integer.class) {</b>
<b class="nc">&nbsp;                b = BigInteger.valueOf((Integer) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Long.class) {</b>
<b class="nc">&nbsp;                b = BigInteger.valueOf((Long) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Float.class) {</b>
<b class="nc">&nbsp;                b = BigDecimal.valueOf((Float) b);</b>
<b class="nc">&nbsp;                a = new BigDecimal((BigInteger) a);</b>
<b class="nc">&nbsp;            } else if (typeB == Double.class) {</b>
<b class="nc">&nbsp;                b = BigDecimal.valueOf((Double) b);</b>
<b class="nc">&nbsp;                a = new BigDecimal((BigInteger) a);</b>
<b class="nc">&nbsp;            } else if (typeB == BigDecimal.class) {</b>
<b class="nc">&nbsp;                a = new BigDecimal((BigInteger) a);</b>
&nbsp;            }
<b class="nc">&nbsp;        } else if (typeA == Long.class) {</b>
<b class="nc">&nbsp;            if (typeB == Integer.class) {</b>
<b class="nc">&nbsp;                b = new Long((Integer) b);</b>
<b class="nc">&nbsp;            } else if (typeB == BigDecimal.class) {</b>
<b class="nc">&nbsp;                a = new BigDecimal((Long) a);</b>
<b class="nc">&nbsp;            } else if (typeB == Float.class) {</b>
<b class="nc">&nbsp;                a = new Float((Long) a);</b>
<b class="nc">&nbsp;            } else if (typeB == Double.class) {</b>
<b class="nc">&nbsp;                a = new Double((Long) a);</b>
<b class="nc">&nbsp;            } else if (typeB == BigInteger.class) {</b>
<b class="nc">&nbsp;                a = BigInteger.valueOf((Long) a);</b>
<b class="nc">&nbsp;            } else if (typeB == String.class) {</b>
<b class="nc">&nbsp;                a = BigDecimal.valueOf((Long) a);</b>
<b class="nc">&nbsp;                b = new BigDecimal((String) b);</b>
&nbsp;            }
<b class="nc">&nbsp;        } else if (typeA == Integer.class) {</b>
<b class="nc">&nbsp;            if (typeB == Long.class) {</b>
<b class="nc">&nbsp;                a = new Long((Integer) a);</b>
<b class="nc">&nbsp;            } else if (typeB == BigDecimal.class) {</b>
<b class="nc">&nbsp;                a = new BigDecimal((Integer) a);</b>
<b class="nc">&nbsp;            } else if (typeB == BigInteger.class) {</b>
<b class="nc">&nbsp;                a = BigInteger.valueOf((Integer) a);</b>
<b class="nc">&nbsp;            } else if (typeB == Float.class) {</b>
<b class="nc">&nbsp;                a = new Float((Integer) a);</b>
<b class="nc">&nbsp;            } else if (typeB == Double.class) {</b>
<b class="nc">&nbsp;                a = new Double((Integer) a);</b>
<b class="nc">&nbsp;            } else if (typeB == String.class) {</b>
<b class="nc">&nbsp;                a = BigDecimal.valueOf((Integer) a);</b>
<b class="nc">&nbsp;                b = new BigDecimal((String) b);</b>
&nbsp;            }
<b class="nc">&nbsp;        } else if (typeA == Double.class) {</b>
<b class="nc">&nbsp;            if (typeB == Integer.class) {</b>
<b class="nc">&nbsp;                b = new Double((Integer) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Long.class) {</b>
<b class="nc">&nbsp;                b = new Double((Long) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Float.class) {</b>
<b class="nc">&nbsp;                b = new Double((Float) b);</b>
<b class="nc">&nbsp;            } else if (typeB == BigDecimal.class) {</b>
<b class="nc">&nbsp;                a = BigDecimal.valueOf((Double) a);</b>
<b class="nc">&nbsp;            } else if (typeB == String.class) {</b>
<b class="nc">&nbsp;                a = BigDecimal.valueOf((Double) a);</b>
<b class="nc">&nbsp;                b = new BigDecimal((String) b);</b>
<b class="nc">&nbsp;            } else if (typeB == BigInteger.class) {</b>
<b class="nc">&nbsp;                a = BigDecimal.valueOf((Double) a);</b>
<b class="nc">&nbsp;                b = new BigDecimal((BigInteger) b);</b>
&nbsp;            }
<b class="nc">&nbsp;        } else if (typeA == Float.class) {</b>
<b class="nc">&nbsp;            if (typeB == Integer.class) {</b>
<b class="nc">&nbsp;                b = new Float((Integer) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Long.class) {</b>
<b class="nc">&nbsp;                b = new Float((Long) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Double.class) {</b>
<b class="nc">&nbsp;                a = new Double((Float) a);</b>
<b class="nc">&nbsp;            } else if (typeB == BigDecimal.class) {</b>
<b class="nc">&nbsp;                a = BigDecimal.valueOf((Float) a);</b>
<b class="nc">&nbsp;            } else if (typeB == String.class) {</b>
<b class="nc">&nbsp;                a = BigDecimal.valueOf((Float) a);</b>
<b class="nc">&nbsp;                b = new BigDecimal((String) b);</b>
<b class="nc">&nbsp;            } else if (typeB == BigInteger.class) {</b>
<b class="nc">&nbsp;                a = BigDecimal.valueOf((Float) a);</b>
<b class="nc">&nbsp;                b = new BigDecimal((BigInteger) b);</b>
&nbsp;            }
<b class="nc">&nbsp;        } else if (typeA == String.class) {</b>
<b class="nc">&nbsp;            String strA = (String) a;</b>
<b class="nc">&nbsp;            if (typeB == Integer.class) {</b>
<b class="nc">&nbsp;                NumberFormatException error = null;</b>
&nbsp;                try {
<b class="nc">&nbsp;                    a = Integer.parseInt(strA);</b>
<b class="nc">&nbsp;                } catch (NumberFormatException ex) {</b>
<b class="nc">&nbsp;                    error = ex;</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                if (error != null) {</b>
&nbsp;                    try {
<b class="nc">&nbsp;                        a = Long.parseLong(strA);</b>
<b class="nc">&nbsp;                        b = Long.valueOf((Integer) b);</b>
<b class="nc">&nbsp;                        error = null;</b>
<b class="nc">&nbsp;                    } catch (NumberFormatException ex) {</b>
<b class="nc">&nbsp;                        error = ex;</b>
<b class="nc">&nbsp;                    }</b>
&nbsp;                }
<b class="nc">&nbsp;                if (error != null) {</b>
<b class="nc">&nbsp;                    a = new BigDecimal(strA);</b>
<b class="nc">&nbsp;                    b = BigDecimal.valueOf((Integer) b);</b>
&nbsp;                }
<b class="nc">&nbsp;            } else if (typeB == Long.class) {</b>
<b class="nc">&nbsp;                a = new BigDecimal(strA);</b>
<b class="nc">&nbsp;                b = BigDecimal.valueOf((Long) b);</b>
<b class="nc">&nbsp;            } else if (typeB == Float.class) {</b>
<b class="nc">&nbsp;                a = Float.parseFloat(strA);</b>
<b class="nc">&nbsp;            } else if (typeB == Double.class) {</b>
<b class="nc">&nbsp;                a = Double.parseDouble(strA);</b>
<b class="nc">&nbsp;            } else if (typeB == BigInteger.class) {</b>
<b class="nc">&nbsp;                a = new BigInteger(strA);</b>
<b class="nc">&nbsp;            } else if (typeB == BigDecimal.class) {</b>
<b class="nc">&nbsp;                a = new BigDecimal(strA);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return ((Comparable) a).compareTo(b);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Object getDefaultValue(Type paramType) {
<b class="fc">&nbsp;        if (paramType == int.class) {</b>
<b class="fc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == long.class) {</b>
<b class="nc">&nbsp;            return 0L;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == float.class) {</b>
<b class="nc">&nbsp;            return 0F;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == double.class) {</b>
<b class="nc">&nbsp;            return 0D;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == boolean.class) {</b>
<b class="nc">&nbsp;            return Boolean.FALSE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == short.class) {</b>
<b class="nc">&nbsp;            return (short) 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == byte.class) {</b>
<b class="nc">&nbsp;            return (byte) 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == char.class) {</b>
<b class="nc">&nbsp;            return (char) 0;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == Optional.class) {</b>
<b class="nc">&nbsp;            return Optional.empty();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == OptionalInt.class) {</b>
<b class="nc">&nbsp;            return OptionalInt.empty();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == OptionalLong.class) {</b>
<b class="nc">&nbsp;            return OptionalLong.empty();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (paramType == OptionalDouble.class) {</b>
<b class="nc">&nbsp;            return OptionalDouble.empty();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Class loadClass(String className) {
<b class="fc">&nbsp;        if (className.length() &gt;= 192) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        switch (className) {</b>
&nbsp;            case &quot;O&quot;:
&nbsp;            case &quot;Object&quot;:
&nbsp;            case &quot;java.lang.Object&quot;:
<b class="nc">&nbsp;                return Object.class;</b>
&nbsp;            case &quot;java.util.Collections$EmptyMap&quot;:
<b class="nc">&nbsp;                return Collections.EMPTY_MAP.getClass();</b>
&nbsp;            case &quot;java.util.Collections$EmptyList&quot;:
<b class="nc">&nbsp;                return Collections.EMPTY_LIST.getClass();</b>
&nbsp;            case &quot;java.util.Collections$EmptySet&quot;:
<b class="fc">&nbsp;                return Collections.EMPTY_SET.getClass();</b>
&nbsp;            case &quot;java.util.Optional&quot;:
<b class="nc">&nbsp;                return Optional.class;</b>
&nbsp;            case &quot;java.util.OptionalInt&quot;:
<b class="nc">&nbsp;                return OptionalInt.class;</b>
&nbsp;            case &quot;java.util.OptionalLong&quot;:
<b class="nc">&nbsp;                return OptionalLong.class;</b>
&nbsp;            case &quot;List&quot;:
&nbsp;            case &quot;java.util.List&quot;:
<b class="nc">&nbsp;                return List.class;</b>
&nbsp;            case &quot;A&quot;:
&nbsp;            case &quot;ArrayList&quot;:
&nbsp;            case &quot;java.util.ArrayList&quot;:
<b class="nc">&nbsp;                return ArrayList.class;</b>
&nbsp;            case &quot;LA&quot;:
&nbsp;            case &quot;LinkedList&quot;:
&nbsp;            case &quot;java.util.LinkedList&quot;:
<b class="nc">&nbsp;                return LinkedList.class;</b>
&nbsp;            case &quot;Map&quot;:
&nbsp;            case &quot;java.util.Map&quot;:
<b class="nc">&nbsp;                return Map.class;</b>
&nbsp;            case &quot;M&quot;:
&nbsp;            case &quot;HashMap&quot;:
&nbsp;            case &quot;java.util.HashMap&quot;:
<b class="fc">&nbsp;                return HashMap.class;</b>
&nbsp;            case &quot;LM&quot;:
&nbsp;            case &quot;LinkedHashMap&quot;:
&nbsp;            case &quot;java.util.LinkedHashMap&quot;:
<b class="nc">&nbsp;                return LinkedHashMap.class;</b>
&nbsp;            case &quot;ConcurrentHashMap&quot;:
<b class="nc">&nbsp;                return ConcurrentHashMap.class;</b>
&nbsp;            case &quot;ConcurrentLinkedQueue&quot;:
<b class="nc">&nbsp;                return ConcurrentLinkedQueue.class;</b>
&nbsp;            case &quot;ConcurrentLinkedDeque&quot;:
<b class="nc">&nbsp;                return ConcurrentLinkedDeque.class;</b>
&nbsp;            case &quot;JSONObject&quot;:
<b class="nc">&nbsp;                return JSONObject.class;</b>
&nbsp;            case &quot;JO1&quot;:
<b class="nc">&nbsp;                className = &quot;com.alibaba.fastjson.JSONObject&quot;;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case &quot;Set&quot;:
&nbsp;            case &quot;java.util.Set&quot;:
<b class="nc">&nbsp;                return Set.class;</b>
&nbsp;            case &quot;HashSet&quot;:
&nbsp;            case &quot;java.util.HashSet&quot;:
<b class="nc">&nbsp;                return HashSet.class;</b>
&nbsp;            case &quot;LinkedHashSet&quot;:
&nbsp;            case &quot;java.util.LinkedHashSet&quot;:
<b class="nc">&nbsp;                return LinkedHashSet.class;</b>
&nbsp;            case &quot;TreeSet&quot;:
&nbsp;            case &quot;java.util.TreeSet&quot;:
<b class="nc">&nbsp;                return TreeSet.class;</b>
&nbsp;            case &quot;java.lang.Class&quot;:
<b class="fc">&nbsp;                return Class.class;</b>
&nbsp;            case &quot;java.lang.Integer&quot;:
<b class="nc">&nbsp;                return Integer.class;</b>
&nbsp;            case &quot;java.lang.Long&quot;:
<b class="nc">&nbsp;                return Long.class;</b>
&nbsp;            case &quot;String&quot;:
&nbsp;            case &quot;java.lang.String&quot;:
<b class="fc">&nbsp;                return String.class;</b>
&nbsp;            case &quot;[String&quot;:
<b class="nc">&nbsp;                return String[].class;</b>
&nbsp;            case &quot;I&quot;:
&nbsp;            case &quot;int&quot;:
<b class="fc">&nbsp;                return int.class;</b>
&nbsp;            case &quot;S&quot;:
&nbsp;            case &quot;short&quot;:
<b class="nc">&nbsp;                return short.class;</b>
&nbsp;            case &quot;J&quot;:
&nbsp;            case &quot;long&quot;:
<b class="nc">&nbsp;                return long.class;</b>
&nbsp;            case &quot;Z&quot;:
&nbsp;            case &quot;boolean&quot;:
<b class="nc">&nbsp;                return boolean.class;</b>
&nbsp;            case &quot;B&quot;:
&nbsp;            case &quot;byte&quot;:
<b class="nc">&nbsp;                return byte.class;</b>
&nbsp;            case &quot;F&quot;:
&nbsp;            case &quot;float&quot;:
<b class="nc">&nbsp;                return float.class;</b>
&nbsp;            case &quot;D&quot;:
&nbsp;            case &quot;double&quot;:
<b class="nc">&nbsp;                return double.class;</b>
&nbsp;            case &quot;C&quot;:
&nbsp;            case &quot;char&quot;:
<b class="nc">&nbsp;                return char.class;</b>
&nbsp;            case &quot;[B&quot;:
&nbsp;            case &quot;byte[]&quot;:
<b class="nc">&nbsp;                return byte[].class;</b>
&nbsp;            case &quot;[S&quot;:
&nbsp;            case &quot;short[]&quot;:
<b class="nc">&nbsp;                return short[].class;</b>
&nbsp;            case &quot;[I&quot;:
&nbsp;            case &quot;int[]&quot;:
<b class="nc">&nbsp;                return int[].class;</b>
&nbsp;            case &quot;[J&quot;:
&nbsp;            case &quot;long[]&quot;:
<b class="nc">&nbsp;                return long[].class;</b>
&nbsp;            case &quot;[F&quot;:
&nbsp;            case &quot;float[]&quot;:
<b class="nc">&nbsp;                return float[].class;</b>
&nbsp;            case &quot;[D&quot;:
&nbsp;            case &quot;double[]&quot;:
<b class="nc">&nbsp;                return double[].class;</b>
&nbsp;            case &quot;[C&quot;:
&nbsp;            case &quot;char[]&quot;:
<b class="nc">&nbsp;                return char[].class;</b>
&nbsp;            case &quot;[Z&quot;:
&nbsp;            case &quot;boolean[]&quot;:
<b class="nc">&nbsp;                return boolean[].class;</b>
&nbsp;            case &quot;[O&quot;:
<b class="nc">&nbsp;                return Object[].class;</b>
&nbsp;            case &quot;UUID&quot;:
<b class="nc">&nbsp;                return UUID.class;</b>
&nbsp;            case &quot;Date&quot;:
<b class="nc">&nbsp;                return Date.class;</b>
&nbsp;            case &quot;Calendar&quot;:
<b class="nc">&nbsp;                return Calendar.class;</b>
&nbsp;            case &quot;java.io.IOException&quot;:
<b class="fc">&nbsp;                return java.io.IOException.class;</b>
&nbsp;            case &quot;java.util.Collections$UnmodifiableRandomAccessList&quot;:
<b class="fc">&nbsp;                return CLASS_UNMODIFIABLE_LIST;</b>
&nbsp;            case &quot;java.util.Arrays$ArrayList&quot;:
<b class="fc">&nbsp;                return Arrays.asList(1).getClass();</b>
&nbsp;            case &quot;java.util.Collections$SingletonList&quot;:
<b class="fc">&nbsp;                return CLASS_SINGLE_LIST;</b>
&nbsp;            case &quot;java.util.Collections$SingletonSet&quot;:
<b class="fc">&nbsp;                return CLASS_SINGLE_SET;</b>
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        Class mapping = TYPE_MAPPINGS.get(className);</b>
<b class="fc">&nbsp;        if (mapping != null) {</b>
<b class="fc">&nbsp;            return mapping;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (className.startsWith(&quot;java.util.ImmutableCollections$&quot;)) {</b>
&nbsp;            try {
<b class="nc">&nbsp;                return Class.forName(className);</b>
<b class="nc">&nbsp;            } catch (ClassNotFoundException e) {</b>
<b class="nc">&nbsp;                return CLASS_UNMODIFIABLE_LIST;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (className.charAt(0) == &#39;L&#39; &amp;&amp; className.charAt(className.length() - 1) == &#39;;&#39;) {</b>
<b class="nc">&nbsp;            className = className.substring(1, className.length() - 1);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (className.charAt(0) == &#39;[&#39; || className.endsWith(&quot;[]&quot;)) {</b>
<b class="fc">&nbsp;            String itemClassName = className.charAt(0) == &#39;[&#39; ? className.substring(1) : className.substring(0, className.length() - 2);</b>
<b class="fc">&nbsp;            Class itemClass = loadClass(itemClassName);</b>
<b class="fc">&nbsp;            if (itemClass == null) {</b>
<b class="nc">&nbsp;                throw new JSONException(&quot;load class error &quot; + className);</b>
&nbsp;            }
<b class="fc">&nbsp;            return Array.newInstance(itemClass, 0).getClass();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        ClassLoader contextClassLoader = Thread.currentThread().getContextClassLoader();</b>
<b class="fc">&nbsp;        if (contextClassLoader != null) {</b>
&nbsp;            try {
<b class="fc">&nbsp;                return contextClassLoader.loadClass(className);</b>
<b class="nc">&nbsp;            } catch (ClassNotFoundException ignored) {</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            return JSON.class.getClassLoader().loadClass(className);</b>
<b class="nc">&nbsp;        } catch (ClassNotFoundException ignored) {</b>
&nbsp;        }
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            return Class.forName(className);</b>
<b class="nc">&nbsp;        } catch (ClassNotFoundException ignored) {</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Class&lt;?&gt; getArrayClass(Class componentClass) {
<b class="fc">&nbsp;        if (componentClass == int.class) {</b>
<b class="nc">&nbsp;            return int[].class;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (componentClass == byte.class) {</b>
<b class="nc">&nbsp;            return byte[].class;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (componentClass == short.class) {</b>
<b class="nc">&nbsp;            return short[].class;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (componentClass == long.class) {</b>
<b class="nc">&nbsp;            return long[].class;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (componentClass == String.class) {</b>
<b class="fc">&nbsp;            return String[].class;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (componentClass == Object.class) {</b>
<b class="fc">&nbsp;            return Object[].class;</b>
&nbsp;        }
<b class="fc">&nbsp;        return Array.newInstance(componentClass, 1).getClass();</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Class nonePrimitive(Class type) {
<b class="fc">&nbsp;        if (type.isPrimitive()) {</b>
<b class="fc">&nbsp;            String name = type.getName();</b>
<b class="fc">&nbsp;            switch (name) {</b>
&nbsp;                case &quot;byte&quot;:
<b class="fc">&nbsp;                    return Byte.class;</b>
&nbsp;                case &quot;short&quot;:
<b class="fc">&nbsp;                    return Short.class;</b>
&nbsp;                case &quot;int&quot;:
<b class="fc">&nbsp;                    return Integer.class;</b>
&nbsp;                case &quot;long&quot;:
<b class="fc">&nbsp;                    return Long.class;</b>
&nbsp;                case &quot;float&quot;:
<b class="fc">&nbsp;                    return Float.class;</b>
&nbsp;                case &quot;double&quot;:
<b class="fc">&nbsp;                    return Double.class;</b>
&nbsp;                case &quot;char&quot;:
<b class="nc">&nbsp;                    return Character.class;</b>
&nbsp;                case &quot;boolean&quot;:
<b class="fc">&nbsp;                    return Boolean.class;</b>
&nbsp;                default:
&nbsp;                    break;
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return type;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Class&lt;?&gt; getClass(Type type) {
<b class="fc">&nbsp;        if (type == null) {</b>
<b class="fc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type.getClass() == Class.class) {</b>
<b class="fc">&nbsp;            return (Class&lt;?&gt;) type;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type instanceof ParameterizedType) {</b>
<b class="fc">&nbsp;            return getClass(((ParameterizedType) type).getRawType());</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type instanceof TypeVariable) {</b>
<b class="fc">&nbsp;            Type boundType = ((TypeVariable&lt;?&gt;) type).getBounds()[0];</b>
<b class="fc">&nbsp;            if (boundType instanceof Class) {</b>
<b class="fc">&nbsp;                return (Class) boundType;</b>
&nbsp;            }
<b class="fc">&nbsp;            return getClass(boundType);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type instanceof WildcardType) {</b>
<b class="fc">&nbsp;            Type[] upperBounds = ((WildcardType) type).getUpperBounds();</b>
<b class="fc">&nbsp;            if (upperBounds.length == 1) {</b>
<b class="fc">&nbsp;                return getClass(upperBounds[0]);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (type instanceof GenericArrayType) {</b>
<b class="fc">&nbsp;            GenericArrayType genericArrayType = (GenericArrayType) type;</b>
<b class="fc">&nbsp;            Type componentType = genericArrayType.getGenericComponentType();</b>
<b class="fc">&nbsp;            Class&lt;?&gt; componentClass = getClass(componentType);</b>
<b class="fc">&nbsp;            return getArrayClass(componentClass);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return Object.class;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isProxy(Class&lt;?&gt; clazz) {
<b class="fc">&nbsp;        for (Class&lt;?&gt; item : clazz.getInterfaces()) {</b>
<b class="fc">&nbsp;            String interfaceName = item.getName();</b>
<b class="fc">&nbsp;            switch (interfaceName) {</b>
&nbsp;                case &quot;org.springframework.cglib.proxy.Factory&quot;:
&nbsp;                case &quot;javassist.util.proxy.ProxyObject&quot;:
&nbsp;                case &quot;org.apache.ibatis.javassist.util.proxy.ProxyObject&quot;:
&nbsp;                case &quot;org.hibernate.proxy.HibernateProxy&quot;:
&nbsp;                case &quot;org.springframework.context.annotation.ConfigurationClassEnhancer$EnhancedConfiguration&quot;:
&nbsp;                case &quot;org.mockito.cglib.proxy.Factory&quot;:
&nbsp;                case &quot;net.sf.cglib.proxy.Factory&quot;:
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                default:
&nbsp;                    break;
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static Map getInnerMap(Map object) {
<b class="nc">&nbsp;        if (object == null || CLASS_JSON_OBJECT_1x == null || !CLASS_JSON_OBJECT_1x.isInstance(object) || FIELD_JSON_OBJECT_1x_map == null) {</b>
<b class="nc">&nbsp;            return object;</b>
&nbsp;        }
&nbsp;
&nbsp;        try {
<b class="nc">&nbsp;            object = (Map) FIELD_JSON_OBJECT_1x_map.get(object);</b>
<b class="nc">&nbsp;        } catch (IllegalAccessException ignore) {</b>
&nbsp;            // ignore
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        return object;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isFunction(Class type) {
<b class="fc">&nbsp;        if (type.isInterface()) {</b>
<b class="fc">&nbsp;            String typeName = type.getName();</b>
<b class="fc">&nbsp;            if (typeName.startsWith(&quot;java.util.function.&quot;)) {</b>
<b class="fc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (type.isAnnotationPresent(FunctionalInterface.class)) {</b>
<b class="fc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isInteger(String str) {
<b class="fc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        char ch = str.charAt(0);</b>
<b class="fc">&nbsp;        boolean sign = ch == &#39;-&#39; || ch == &#39;+&#39;;</b>
<b class="fc">&nbsp;        if (sign) {</b>
<b class="nc">&nbsp;            if (str.length() == 1) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="fc">&nbsp;        } else if (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        for (int i = 1; i &lt; str.length(); ++i) {</b>
<b class="nc">&nbsp;            ch = str.charAt(i);</b>
<b class="nc">&nbsp;            if (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isInteger(byte[] str, int off, int len) {
<b class="fc">&nbsp;        if (str == null || len == 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        char ch = (char) str[off];</b>
<b class="fc">&nbsp;        boolean sign = ch == &#39;-&#39; || ch == &#39;+&#39;;</b>
<b class="fc">&nbsp;        if (sign) {</b>
<b class="nc">&nbsp;            if (len == 1) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="fc">&nbsp;        } else if (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        final int end = off + len;</b>
<b class="fc">&nbsp;        for (int i = off + 1; i &lt; end; ++i) {</b>
<b class="fc">&nbsp;            ch = (char) str[i];</b>
<b class="fc">&nbsp;            if (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isInteger(char[] str, int off, int len) {
<b class="fc">&nbsp;        if (str == null || len == 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        char ch = (char) str[off];</b>
<b class="fc">&nbsp;        boolean sign = ch == &#39;-&#39; || ch == &#39;+&#39;;</b>
<b class="fc">&nbsp;        if (sign) {</b>
<b class="nc">&nbsp;            if (len == 1) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="fc">&nbsp;        } else if (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        final int end = off + len;</b>
<b class="fc">&nbsp;        for (int i = off + 1; i &lt; end; ++i) {</b>
<b class="fc">&nbsp;            ch = (char) str[i];</b>
<b class="fc">&nbsp;            if (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
<b class="fc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isNumber(String str) {
<b class="fc">&nbsp;        if (str == null || str.isEmpty()) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        char ch = str.charAt(0);</b>
&nbsp;        int offset;
<b class="fc">&nbsp;        boolean sign = ch == &#39;-&#39; || ch == &#39;+&#39;;</b>
<b class="fc">&nbsp;        if (sign) {</b>
<b class="nc">&nbsp;            if (str.length() == 1) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="nc">&nbsp;            ch = str.charAt(1);</b>
<b class="nc">&nbsp;            offset = 1;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            if (ch == &#39;.&#39;) {</b>
<b class="nc">&nbsp;                if (str.length() == 1) {</b>
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                offset = 1;</b>
&nbsp;            } else {
<b class="fc">&nbsp;                offset = 0;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int end = str.length();</b>
<b class="fc">&nbsp;        boolean dot = ch == &#39;.&#39;;</b>
<b class="fc">&nbsp;        boolean space = false;</b>
<b class="fc">&nbsp;        boolean num = false;</b>
<b class="fc">&nbsp;        if (!dot &amp;&amp; (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;)) {</b>
<b class="fc">&nbsp;            num = true;</b>
&nbsp;            for (; ; ) {
<b class="fc">&nbsp;                if (offset &lt; end) {</b>
<b class="fc">&nbsp;                    ch = str.charAt(offset++);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return true;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (space || ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        boolean small = false;</b>
<b class="fc">&nbsp;        if (ch == &#39;.&#39;) {</b>
<b class="fc">&nbsp;            small = true;</b>
<b class="fc">&nbsp;            if (offset &lt; end) {</b>
<b class="fc">&nbsp;                ch = str.charAt(offset++);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) {</b>
&nbsp;                for (; ; ) {
<b class="fc">&nbsp;                    if (offset &lt; end) {</b>
<b class="nc">&nbsp;                        ch = str.charAt(offset++);</b>
&nbsp;                    } else {
<b class="fc">&nbsp;                        return true;</b>
&nbsp;                    }
&nbsp;
<b class="nc">&nbsp;                    if (space || ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (!num &amp;&amp; !small) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (ch == &#39;e&#39; || ch == &#39;E&#39;) {</b>
<b class="nc">&nbsp;            if (offset == end) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            ch = str.charAt(offset++);</b>
&nbsp;
<b class="nc">&nbsp;            boolean eSign = false;</b>
<b class="nc">&nbsp;            if (ch == &#39;+&#39; || ch == &#39;-&#39;) {</b>
<b class="nc">&nbsp;                eSign = true;</b>
<b class="nc">&nbsp;                if (offset &lt; end) {</b>
<b class="nc">&nbsp;                    ch = str.charAt(offset++);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) {</b>
&nbsp;                for (; ; ) {
<b class="nc">&nbsp;                    if (offset &lt; end) {</b>
<b class="nc">&nbsp;                        ch = str.charAt(offset++);</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return true;</b>
&nbsp;                    }
&nbsp;
<b class="nc">&nbsp;                    if (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            } else if (eSign) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isNumber(byte[] str, int off, int len) {
<b class="fc">&nbsp;        if (str == null || len == 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        char ch = (char) str[off];</b>
&nbsp;        int offset;
<b class="fc">&nbsp;        boolean sign = ch == &#39;-&#39; || ch == &#39;+&#39;;</b>
<b class="fc">&nbsp;        if (sign) {</b>
<b class="nc">&nbsp;            if (len == 1) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="nc">&nbsp;            ch = (char) str[off + 1];</b>
<b class="nc">&nbsp;            offset = off + 1;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            if (ch == &#39;.&#39;) {</b>
<b class="nc">&nbsp;                if (len == 1) {</b>
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                offset = off + 1;</b>
&nbsp;            } else {
<b class="fc">&nbsp;                offset = off;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int end = off + len;</b>
<b class="fc">&nbsp;        boolean dot = ch == &#39;.&#39;;</b>
<b class="fc">&nbsp;        boolean space = false;</b>
<b class="fc">&nbsp;        boolean num = false;</b>
<b class="fc">&nbsp;        if (!dot &amp;&amp; (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;)) {</b>
<b class="fc">&nbsp;            num = true;</b>
&nbsp;            for (; ; ) {
<b class="fc">&nbsp;                if (offset &lt; end) {</b>
<b class="fc">&nbsp;                    ch = (char) str[offset++];</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    return true;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (space || ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        boolean small = false;</b>
<b class="fc">&nbsp;        if (ch == &#39;.&#39;) {</b>
<b class="nc">&nbsp;            small = true;</b>
<b class="nc">&nbsp;            if (offset &lt; end) {</b>
<b class="nc">&nbsp;                ch = (char) str[offset++];</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) {</b>
&nbsp;                for (; ; ) {
<b class="nc">&nbsp;                    if (offset &lt; end) {</b>
<b class="nc">&nbsp;                        ch = (char) str[offset++];</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return true;</b>
&nbsp;                    }
&nbsp;
<b class="nc">&nbsp;                    if (space || ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (!num &amp;&amp; !small) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (ch == &#39;e&#39; || ch == &#39;E&#39;) {</b>
<b class="nc">&nbsp;            if (offset == end) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            ch = (char) str[offset++];</b>
&nbsp;
<b class="nc">&nbsp;            boolean eSign = false;</b>
<b class="nc">&nbsp;            if (ch == &#39;+&#39; || ch == &#39;-&#39;) {</b>
<b class="nc">&nbsp;                eSign = true;</b>
<b class="nc">&nbsp;                if (offset &lt; end) {</b>
<b class="nc">&nbsp;                    ch = (char) str[offset++];</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) {</b>
&nbsp;                for (; ; ) {
<b class="nc">&nbsp;                    if (offset &lt; end) {</b>
<b class="nc">&nbsp;                        ch = (char) str[offset++];</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return true;</b>
&nbsp;                    }
&nbsp;
<b class="nc">&nbsp;                    if (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            } else if (eSign) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isNumber(char[] str, int off, int len) {
<b class="fc">&nbsp;        if (str == null || len == 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        char ch = str[off];</b>
&nbsp;        int offset;
<b class="fc">&nbsp;        boolean sign = ch == &#39;-&#39; || ch == &#39;+&#39;;</b>
<b class="fc">&nbsp;        if (sign) {</b>
<b class="nc">&nbsp;            if (len == 1) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="nc">&nbsp;            ch = str[off + 1];</b>
<b class="nc">&nbsp;            offset = off + 1;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            if (ch == &#39;.&#39;) {</b>
<b class="nc">&nbsp;                if (len == 1) {</b>
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                offset = off + 1;</b>
&nbsp;            } else {
<b class="fc">&nbsp;                offset = off;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int end = off + len;</b>
<b class="fc">&nbsp;        boolean dot = ch == &#39;.&#39;;</b>
<b class="fc">&nbsp;        boolean space = false;</b>
<b class="fc">&nbsp;        boolean num = false;</b>
<b class="fc">&nbsp;        if (!dot &amp;&amp; (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;)) {</b>
<b class="fc">&nbsp;            num = true;</b>
&nbsp;            for (; ; ) {
<b class="fc">&nbsp;                if (offset &lt; end) {</b>
<b class="fc">&nbsp;                    ch = str[offset++];</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    return true;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (space || ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        boolean small = false;</b>
<b class="fc">&nbsp;        if (ch == &#39;.&#39;) {</b>
<b class="nc">&nbsp;            small = true;</b>
<b class="nc">&nbsp;            if (offset &lt; end) {</b>
<b class="nc">&nbsp;                ch = str[offset++];</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) {</b>
&nbsp;                for (; ; ) {
<b class="nc">&nbsp;                    if (offset &lt; end) {</b>
<b class="nc">&nbsp;                        ch = str[offset++];</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return true;</b>
&nbsp;                    }
&nbsp;
<b class="nc">&nbsp;                    if (space || ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (!num &amp;&amp; !small) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (ch == &#39;e&#39; || ch == &#39;E&#39;) {</b>
<b class="nc">&nbsp;            if (offset == end) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            ch = str[offset++];</b>
&nbsp;
<b class="nc">&nbsp;            boolean eSign = false;</b>
<b class="nc">&nbsp;            if (ch == &#39;+&#39; || ch == &#39;-&#39;) {</b>
<b class="nc">&nbsp;                eSign = true;</b>
<b class="nc">&nbsp;                if (offset &lt; end) {</b>
<b class="nc">&nbsp;                    ch = str[offset++];</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) {</b>
&nbsp;                for (; ; ) {
<b class="nc">&nbsp;                    if (offset &lt; end) {</b>
<b class="nc">&nbsp;                        ch = str[offset++];</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return true;</b>
&nbsp;                    }
&nbsp;
<b class="nc">&nbsp;                    if (ch &lt; &#39;0&#39; || ch &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            } else if (eSign) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean isUUID(String str) {
<b class="nc">&nbsp;        if (str == null) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (str.length() == 32) {</b>
<b class="nc">&nbsp;            for (int i = 0; i &lt; 32; i++) {</b>
<b class="nc">&nbsp;                char ch = str.charAt(i);</b>
<b class="nc">&nbsp;                boolean valid = (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) || (ch &gt;= &#39;A&#39; &amp;&amp; ch &lt;= &#39;F&#39;) || (ch &gt;= &#39;a&#39; &amp;&amp; ch &lt;= &#39;f&#39;);</b>
<b class="nc">&nbsp;                if (!valid) {</b>
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (str.length() == 36) {</b>
<b class="nc">&nbsp;            for (int i = 0; i &lt; 36; i++) {</b>
<b class="nc">&nbsp;                char ch = str.charAt(i);</b>
&nbsp;
<b class="nc">&nbsp;                if (i == 8 || i == 13 || i == 18 || i == 23) {</b>
<b class="nc">&nbsp;                    if (ch != &#39;-&#39;) {</b>
<b class="nc">&nbsp;                        return false;</b>
&nbsp;                    }
&nbsp;                    continue;
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                boolean valid = (ch &gt;= &#39;0&#39; &amp;&amp; ch &lt;= &#39;9&#39;) || (ch &gt;= &#39;A&#39; &amp;&amp; ch &lt;= &#39;F&#39;) || (ch &gt;= &#39;a&#39; &amp;&amp; ch &lt;= &#39;f&#39;);</b>
<b class="nc">&nbsp;                if (!valid) {</b>
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean validateIPv4(String str) {
<b class="fc">&nbsp;        return validateIPv4(str, 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    static boolean validateIPv4(String str, int off) {
<b class="fc">&nbsp;        if (str == null) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int strlen = str.length();</b>
&nbsp;        {
<b class="fc">&nbsp;            final int len = strlen - off;</b>
<b class="fc">&nbsp;            if (len &lt; 7 || len &gt; 25) {</b>
<b class="fc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int start = off;</b>
<b class="fc">&nbsp;        int dotCount = 0;</b>
<b class="fc">&nbsp;        for (int i = off; i &lt; strlen; i++) {</b>
<b class="fc">&nbsp;            char ch = str.charAt(i);</b>
<b class="fc">&nbsp;            if (ch == &#39;.&#39; || i == strlen - 1) {</b>
<b class="fc">&nbsp;                int end = ch == &#39;.&#39; ? i : i + 1;</b>
<b class="fc">&nbsp;                int n = end - start;</b>
&nbsp;
&nbsp;                char c0, c1, c2;
<b class="fc">&nbsp;                switch (n) {</b>
&nbsp;                    case 1:
<b class="fc">&nbsp;                        c0 = str.charAt(end - 1);</b>
<b class="fc">&nbsp;                        if (c0 &lt; &#39;0&#39; || c0 &gt; &#39;9&#39;) {</b>
<b class="fc">&nbsp;                            return false;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 2:
<b class="fc">&nbsp;                        c0 = str.charAt(end - 2);</b>
<b class="fc">&nbsp;                        c1 = str.charAt(end - 1);</b>
&nbsp;
<b class="fc">&nbsp;                        if (c0 &lt; &#39;0&#39; || c0 &gt; &#39;9&#39;) {</b>
<b class="fc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="nc">&nbsp;                        if (c1 &lt; &#39;0&#39; || c1 &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 3:
<b class="fc">&nbsp;                        c0 = str.charAt(end - 3);</b>
<b class="fc">&nbsp;                        c1 = str.charAt(end - 2);</b>
<b class="fc">&nbsp;                        c2 = str.charAt(end - 1);</b>
&nbsp;
<b class="fc">&nbsp;                        if (c0 &lt; &#39;0&#39; || c0 &gt; &#39;2&#39;) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="fc">&nbsp;                        if (c1 &lt; &#39;0&#39; || c1 &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="fc">&nbsp;                        if (c2 &lt; &#39;0&#39; || c2 &gt; &#39;9&#39;) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="fc">&nbsp;                        int value = (c0 - &#39;0&#39;) * 100 + (c1 - &#39;0&#39;) * 10 + (c2 - &#39;0&#39;);</b>
<b class="fc">&nbsp;                        if (value &gt; 255) {</b>
<b class="fc">&nbsp;                            return false;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    default:
<b class="fc">&nbsp;                        return false;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (ch == &#39;.&#39;) {</b>
<b class="fc">&nbsp;                    dotCount++;</b>
<b class="fc">&nbsp;                    start = i + 1;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return dotCount == 3;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static boolean validateIPv6(String str) {
<b class="fc">&nbsp;        if (str == null) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        final int len = str.length();</b>
<b class="fc">&nbsp;        if (len &lt; 2 || len &gt; 39) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        int start = 0;</b>
<b class="fc">&nbsp;        int colonCount = 0;</b>
<b class="fc">&nbsp;        for (int i = 0; i &lt; len; i++) {</b>
<b class="fc">&nbsp;            char ch = str.charAt(i);</b>
<b class="fc">&nbsp;            if (ch == &#39;.&#39;) {</b>
<b class="fc">&nbsp;                boolean ipV4 = validateIPv4(str, start);</b>
<b class="fc">&nbsp;                if (!ipV4) {</b>
<b class="fc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            }
<b class="fc">&nbsp;            if (ch == &#39;:&#39; || i == len - 1) {</b>
<b class="fc">&nbsp;                int end = ch == &#39;:&#39; ? i : i + 1;</b>
<b class="fc">&nbsp;                int n = end - start;</b>
&nbsp;
&nbsp;                char c0, c1, c2, c3;
<b class="fc">&nbsp;                switch (n) {</b>
&nbsp;                    case 0:
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    case 1:
<b class="fc">&nbsp;                        c0 = str.charAt(end - 1);</b>
<b class="fc">&nbsp;                        if (!(c0 &gt;= &#39;0&#39; &amp;&amp; c0 &lt;= &#39;9&#39; || (c0 &gt;= &#39;A&#39; &amp;&amp; c0 &lt;= &#39;F&#39;) || (c0 &gt;= &#39;a&#39; &amp;&amp; c0 &lt;= &#39;f&#39;))) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 2:
<b class="nc">&nbsp;                        c0 = str.charAt(end - 2);</b>
<b class="nc">&nbsp;                        c1 = str.charAt(end - 1);</b>
&nbsp;
<b class="nc">&nbsp;                        if (!(c0 &gt;= &#39;0&#39; &amp;&amp; c0 &lt;= &#39;9&#39; || (c0 &gt;= &#39;A&#39; &amp;&amp; c0 &lt;= &#39;F&#39;) || (c0 &gt;= &#39;a&#39; &amp;&amp; c0 &lt;= &#39;f&#39;))) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="nc">&nbsp;                        if (!(c1 &gt;= &#39;0&#39; &amp;&amp; c1 &lt;= &#39;9&#39; || (c1 &gt;= &#39;A&#39; &amp;&amp; c1 &lt;= &#39;F&#39;) || (c1 &gt;= &#39;a&#39; &amp;&amp; c1 &lt;= &#39;f&#39;))) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 3:
<b class="nc">&nbsp;                        c0 = str.charAt(end - 3);</b>
<b class="nc">&nbsp;                        c1 = str.charAt(end - 2);</b>
<b class="nc">&nbsp;                        c2 = str.charAt(end - 1);</b>
&nbsp;
<b class="nc">&nbsp;                        if (!(c0 &gt;= &#39;0&#39; &amp;&amp; c0 &lt;= &#39;9&#39; || (c0 &gt;= &#39;A&#39; &amp;&amp; c0 &lt;= &#39;F&#39;) || (c0 &gt;= &#39;a&#39; &amp;&amp; c0 &lt;= &#39;f&#39;))) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="nc">&nbsp;                        if (!(c1 &gt;= &#39;0&#39; &amp;&amp; c1 &lt;= &#39;9&#39; || (c1 &gt;= &#39;A&#39; &amp;&amp; c1 &lt;= &#39;F&#39;) || (c1 &gt;= &#39;a&#39; &amp;&amp; c1 &lt;= &#39;f&#39;))) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="nc">&nbsp;                        if (!(c2 &gt;= &#39;0&#39; &amp;&amp; c2 &lt;= &#39;9&#39; || (c2 &gt;= &#39;A&#39; &amp;&amp; c2 &lt;= &#39;F&#39;) || (c2 &gt;= &#39;a&#39; &amp;&amp; c2 &lt;= &#39;f&#39;))) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case 4:
<b class="fc">&nbsp;                        c0 = str.charAt(end - 4);</b>
<b class="fc">&nbsp;                        c1 = str.charAt(end - 3);</b>
<b class="fc">&nbsp;                        c2 = str.charAt(end - 2);</b>
<b class="fc">&nbsp;                        c3 = str.charAt(end - 1);</b>
&nbsp;
<b class="fc">&nbsp;                        if (!(c0 &gt;= &#39;0&#39; &amp;&amp; c0 &lt;= &#39;9&#39; || (c0 &gt;= &#39;A&#39; &amp;&amp; c0 &lt;= &#39;F&#39;) || (c0 &gt;= &#39;a&#39; &amp;&amp; c0 &lt;= &#39;f&#39;))) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="fc">&nbsp;                        if (!(c1 &gt;= &#39;0&#39; &amp;&amp; c1 &lt;= &#39;9&#39; || (c1 &gt;= &#39;A&#39; &amp;&amp; c1 &lt;= &#39;F&#39;) || (c1 &gt;= &#39;a&#39; &amp;&amp; c1 &lt;= &#39;f&#39;))) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="fc">&nbsp;                        if (!(c2 &gt;= &#39;0&#39; &amp;&amp; c2 &lt;= &#39;9&#39; || (c2 &gt;= &#39;A&#39; &amp;&amp; c2 &lt;= &#39;F&#39;) || (c2 &gt;= &#39;a&#39; &amp;&amp; c2 &lt;= &#39;f&#39;))) {</b>
<b class="nc">&nbsp;                            return false;</b>
&nbsp;                        }
<b class="fc">&nbsp;                        if (!(c3 &gt;= &#39;0&#39; &amp;&amp; c3 &lt;= &#39;9&#39; || (c3 &gt;= &#39;A&#39; &amp;&amp; c3 &lt;= &#39;F&#39;) || (c3 &gt;= &#39;a&#39; &amp;&amp; c3 &lt;= &#39;f&#39;))) {</b>
<b class="fc">&nbsp;                            return false;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    default:
<b class="fc">&nbsp;                        return false;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (ch == &#39;:&#39;) {</b>
<b class="fc">&nbsp;                    colonCount++;</b>
<b class="fc">&nbsp;                    start = i + 1;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return colonCount &gt; 0 &amp;&amp; colonCount &lt; 8;</b>
&nbsp;    }
&nbsp;
&nbsp;    private static final BigInteger[] BIG_TEN_POWERS_TABLE;
&nbsp;
&nbsp;    static {
<b class="fc">&nbsp;        BigInteger[] bigInts = new BigInteger[128];</b>
<b class="fc">&nbsp;        bigInts[0] = BigInteger.ONE;</b>
<b class="fc">&nbsp;        bigInts[1] = BigInteger.TEN;</b>
<b class="fc">&nbsp;        long longValue = 10;</b>
<b class="fc">&nbsp;        for (int i = 2; i &lt; 19; ++i) {</b>
<b class="fc">&nbsp;            longValue *= 10;</b>
<b class="fc">&nbsp;            bigInts[i] = BigInteger.valueOf(longValue);</b>
&nbsp;        }
<b class="fc">&nbsp;        BigInteger bigInt = bigInts[18];</b>
<b class="fc">&nbsp;        for (int i = 19; i &lt; 128; ++i) {</b>
<b class="fc">&nbsp;            bigInt = bigInt.multiply(BigInteger.TEN);</b>
<b class="fc">&nbsp;            bigInts[i] = bigInt;</b>
&nbsp;        }
<b class="fc">&nbsp;        BIG_TEN_POWERS_TABLE = bigInts;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static double doubleValue(int signNum, long intCompact, int scale) {
<b class="fc">&nbsp;        final int P_D = 53; // Double.PRECISION</b>
<b class="fc">&nbsp;        final int Q_MIN_D = -1074; //(Double.MIN_EXPONENT - (P_D - 1));</b>
<b class="fc">&nbsp;        final int Q_MAX_D = 971; // (Double.MAX_EXPONENT - (P_D - 1));</b>
<b class="fc">&nbsp;        final double L = 3.321928094887362;</b>
&nbsp;
<b class="fc">&nbsp;        int bitLength = 64 - Long.numberOfLeadingZeros(intCompact);</b>
<b class="fc">&nbsp;        long qb = bitLength - (long) Math.ceil(scale * L);</b>
<b class="fc">&nbsp;        if (qb &lt; Q_MIN_D - 2) {  // qb &lt; -1_076</b>
<b class="nc">&nbsp;            return signNum * 0.0;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (qb &gt; Q_MAX_D + P_D + 1) {  // qb &gt; 1_025</b>
&nbsp;            /* If s &lt;= -309 then qb &gt;= 1_027, so these cases all end up here. */
<b class="nc">&nbsp;            return signNum * Double.POSITIVE_INFINITY;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (scale &lt; 0) {</b>
<b class="fc">&nbsp;            BigInteger pow10 = BIG_TEN_POWERS_TABLE[-scale];</b>
<b class="fc">&nbsp;            BigInteger w = BigInteger.valueOf(intCompact);</b>
<b class="fc">&nbsp;            return signNum * w.multiply(pow10).doubleValue();</b>
&nbsp;        }
<b class="fc">&nbsp;        if (scale == 0) {</b>
<b class="nc">&nbsp;            return signNum * (double) intCompact;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        BigInteger w = BigInteger.valueOf(intCompact);</b>
<b class="fc">&nbsp;        int ql = (int) qb - (P_D + 3);  // narrowing qb to an int is safe</b>
<b class="fc">&nbsp;        BigInteger pow10 = BIG_TEN_POWERS_TABLE[scale];</b>
&nbsp;        BigInteger m, n;
<b class="fc">&nbsp;        if (ql &lt;= 0) {</b>
<b class="fc">&nbsp;            m = w.shiftLeft(-ql);</b>
<b class="fc">&nbsp;            n = pow10;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            m = w;</b>
<b class="nc">&nbsp;            n = pow10.shiftLeft(ql);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        BigInteger[] qr = m.divideAndRemainder(n);</b>
<b class="fc">&nbsp;        long i = qr[0].longValue();</b>
<b class="fc">&nbsp;        int sb = qr[1].signum();</b>
<b class="fc">&nbsp;        int dq = (Long.SIZE - (P_D + 2)) - Long.numberOfLeadingZeros(i);</b>
<b class="fc">&nbsp;        int eq = (Q_MIN_D - 2) - ql;</b>
<b class="fc">&nbsp;        if (dq &gt;= eq) {</b>
<b class="fc">&nbsp;            return signNum * Math.scalb((double) (i | sb), ql);</b>
&nbsp;        }
&nbsp;
&nbsp;        /* Subnormal */
<b class="nc">&nbsp;        long mask = (1L &lt;&lt; eq) - 1;</b>
<b class="nc">&nbsp;        long j = i &gt;&gt; eq | Long.signum(i &amp; mask) | sb;</b>
<b class="nc">&nbsp;        return signNum * Math.scalb((double) j, Q_MIN_D - 2);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static float floatValue(int signNum, long intCompact, int scale) {
<b class="fc">&nbsp;        final int P_F = 24;</b>
<b class="fc">&nbsp;        final int Q_MIN_F = -149;</b>
<b class="fc">&nbsp;        final int Q_MAX_F = 104;</b>
<b class="fc">&nbsp;        final double L = 3.321928094887362;</b>
&nbsp;
<b class="fc">&nbsp;        int bitLength = 64 - Long.numberOfLeadingZeros(intCompact);</b>
<b class="fc">&nbsp;        long qb = bitLength - (long) Math.ceil(scale * L);</b>
<b class="fc">&nbsp;        if (qb &lt; Q_MIN_F - 2) {  // qb &lt; -151</b>
<b class="nc">&nbsp;            return signNum * 0.0f;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (qb &gt; Q_MAX_F + P_F + 1) {  // qb &gt; 129</b>
<b class="nc">&nbsp;            return signNum * Float.POSITIVE_INFINITY;</b>
&nbsp;        }
<b class="fc">&nbsp;        if (scale &lt; 0) {</b>
<b class="fc">&nbsp;            BigInteger w = BigInteger.valueOf(intCompact);</b>
<b class="fc">&nbsp;            return signNum * w.multiply(BIG_TEN_POWERS_TABLE[-scale]).floatValue();</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        BigInteger w = BigInteger.valueOf(intCompact);</b>
<b class="fc">&nbsp;        int ql = (int) qb - (P_F + 3);</b>
<b class="fc">&nbsp;        BigInteger pow10 = BIG_TEN_POWERS_TABLE[scale];</b>
&nbsp;        BigInteger m, n;
<b class="fc">&nbsp;        if (ql &lt;= 0) {</b>
<b class="fc">&nbsp;            m = w.shiftLeft(-ql);</b>
<b class="fc">&nbsp;            n = pow10;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            m = w;</b>
<b class="nc">&nbsp;            n = pow10.shiftLeft(ql);</b>
&nbsp;        }
<b class="fc">&nbsp;        BigInteger[] qr = m.divideAndRemainder(n);</b>
<b class="fc">&nbsp;        int i = qr[0].intValue();</b>
<b class="fc">&nbsp;        int sb = qr[1].signum();</b>
<b class="fc">&nbsp;        int dq = (Integer.SIZE - (P_F + 2)) - Integer.numberOfLeadingZeros(i);</b>
<b class="fc">&nbsp;        int eq = (Q_MIN_F - 2) - ql;</b>
<b class="fc">&nbsp;        if (dq &gt;= eq) {</b>
<b class="fc">&nbsp;            return signNum * Math.scalb((float) (i | sb), ql);</b>
&nbsp;        }
<b class="fc">&nbsp;        int mask = (1 &lt;&lt; eq) - 1;</b>
<b class="fc">&nbsp;        int j = i &gt;&gt; eq | (Integer.signum(i &amp; mask)) | sb;</b>
<b class="fc">&nbsp;        return signNum * Math.scalb((float) j, Q_MIN_F - 2);</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-09 22:29</div>
</div>
</body>
</html>
