


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > JSON</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.alibaba.fastjson2</a>
</div>

<h1>Coverage Summary for Class: JSON (com.alibaba.fastjson2)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">JSON</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/114)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1292)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.alibaba.fastjson2;
&nbsp;
&nbsp;import com.alibaba.fastjson2.filter.*;
&nbsp;import com.alibaba.fastjson2.modules.ObjectReaderModule;
&nbsp;import com.alibaba.fastjson2.modules.ObjectWriterModule;
&nbsp;import com.alibaba.fastjson2.reader.FieldReader;
&nbsp;import com.alibaba.fastjson2.reader.ObjectReader;
&nbsp;import com.alibaba.fastjson2.reader.ObjectReaderBean;
&nbsp;import com.alibaba.fastjson2.reader.ObjectReaderNoneDefaultConstructor;
&nbsp;import com.alibaba.fastjson2.util.TypeUtils;
&nbsp;import com.alibaba.fastjson2.writer.FieldWriter;
&nbsp;import com.alibaba.fastjson2.writer.ObjectWriter;
&nbsp;import com.alibaba.fastjson2.writer.ObjectWriterAdapter;
&nbsp;import com.alibaba.fastjson2.writer.ObjectWriterProvider;
&nbsp;
&nbsp;import java.io.IOException;
&nbsp;import java.io.InputStream;
&nbsp;import java.io.OutputStream;
&nbsp;import java.io.Reader;
&nbsp;import java.lang.reflect.Type;
&nbsp;import java.net.URL;
&nbsp;import java.nio.charset.Charset;
&nbsp;import java.nio.charset.StandardCharsets;
&nbsp;import java.util.*;
&nbsp;import java.util.function.Consumer;
&nbsp;import java.util.function.Function;
&nbsp;
&nbsp;import static com.alibaba.fastjson2.JSONFactory.*;
&nbsp;import static com.alibaba.fastjson2.JSONReader.EOI;
&nbsp;import static com.alibaba.fastjson2.JSONReader.Feature.IgnoreCheckClose;
&nbsp;import static com.alibaba.fastjson2.util.JDKUtils.JVM_VERSION;
&nbsp;
&nbsp;public interface JSON {
&nbsp;    /**
&nbsp;     * FASTJSON2 version name
&nbsp;     */
&nbsp;    String VERSION = &quot;2.0.19&quot;;
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONArray} or {@link JSONObject}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @return Object
&nbsp;     */
&nbsp;    static Object parse(String text) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            ObjectReader&lt;?&gt; objectReader = reader.getObjectReader(Object.class);</b>
<b class="nc">&nbsp;            Object object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONArray} or {@link JSONObject} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return Object
&nbsp;     */
&nbsp;    static Object parse(String text, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;?&gt; objectReader = reader.getObjectReader(Object.class);</b>
<b class="nc">&nbsp;            Object object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONArray} or {@link JSONObject} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of bytes to parse
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return Object
&nbsp;     */
&nbsp;    static Object parse(String text, int offset, int length, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty() || length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text, offset, length)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;?&gt; objectReader = reader.getObjectReader(Object.class);</b>
<b class="nc">&nbsp;            Object object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONArray} or {@link JSONObject} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param context specify the context use by JSONReader
&nbsp;     * @return Object
&nbsp;     */
&nbsp;    static Object parse(String text, JSONReader.Context context) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text, context)) {</b>
<b class="nc">&nbsp;            ObjectReader&lt;?&gt; objectReader = reader.getObjectReader(Object.class);</b>
<b class="nc">&nbsp;            Object object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link JSONArray} or {@link JSONObject} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param bytes the UTF8 Bytes to be parsed
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return Object
&nbsp;     */
&nbsp;    static Object parse(byte[] bytes, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;?&gt; objectReader = reader.getObjectReader(Object.class);</b>
<b class="nc">&nbsp;            Object object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON char array into {@link JSONArray} or {@link JSONObject} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param chars the char array to be parsed
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return Object
&nbsp;     */
&nbsp;    static Object parse(char[] chars, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (chars == null || chars.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(chars)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;?&gt; objectReader = reader.getObjectReader(Object.class);</b>
<b class="nc">&nbsp;            Object object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(String text) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0L);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(String text, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of bytes to parse
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(String text, int offset, int length, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty() || length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text, offset, length)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param context specify the context use by JSONReader
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(String text, JSONReader.Context context) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text, context)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse Reader into into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param input the JSON {@link InputStream} to be parsed
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(Reader input, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (input == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(input)) {</b>
<b class="nc">&nbsp;            if (reader.isEnd()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 inputStream into into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param input the JSON {@link InputStream} to be parsed
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(InputStream input, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (input == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(input, StandardCharsets.UTF_8)) {</b>
<b class="nc">&nbsp;            if (reader.isEnd()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(byte[] bytes) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0L);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON char array into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param chars JSON char array to parse
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(char[] chars) {
<b class="nc">&nbsp;        if (chars == null || chars.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(chars)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0L);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param in the JSON {@link InputStream} to be parsed
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(InputStream in, Charset charset) {
<b class="nc">&nbsp;        if (in == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(in, charset)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param url the JSON {@link URL} to be parsed
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(URL url) {
<b class="nc">&nbsp;        if (url == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (InputStream is = url.openStream()) {</b>
<b class="nc">&nbsp;            return parseObject(is, StandardCharsets.UTF_8);</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#parseObject cannot parse &#39;&quot; + url + &quot;&#39;&quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(byte[] bytes, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of bytes to parse
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(byte[] bytes, int offset, int length, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0 || length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes, offset, length)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON char array into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param chars JSON char array to parse
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of chars to parse
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(char[] chars, int offset, int length, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (chars == null || chars.length == 0 || length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(chars, offset, length)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link JSONObject}
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of bytes to parse
&nbsp;     * @param charset specify {@link Charset} to parse
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return JSONObject
&nbsp;     */
&nbsp;    static JSONObject parseObject(byte[] bytes,
&nbsp;                                  int offset,
&nbsp;                                  int length,
&nbsp;                                  Charset charset,
&nbsp;                                  JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0 || length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes, offset, length, charset)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            JSONObject object = new JSONObject();</b>
<b class="nc">&nbsp;            reader.read(object, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into Java Object
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     * @return Class
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(String text, Class&lt;T&gt; clazz) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
&nbsp;
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(clazz, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into Java Object
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     * @param filter specify filter to be enabled
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return Class
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(
&nbsp;            String text,
&nbsp;            Class&lt;T&gt; clazz,
&nbsp;            Filter filter,
&nbsp;            JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            reader.context.config(filter, features);</b>
&nbsp;
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(clazz, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into Java Object
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param format the specified date format
&nbsp;     * @param filters specify filters to be enabled
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return Class
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(
&nbsp;            String text,
&nbsp;            Type type,
&nbsp;            String format,
&nbsp;            Filter[] filters,
&nbsp;            JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            context.setDateFormat(format);</b>
<b class="nc">&nbsp;            context.config(filters, features);</b>
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(type, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into Java Object
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(String text, Type type) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.context.provider.getObjectReader(type);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into Java Object
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param typeReference specify the {@link TypeReference} to be converted
&nbsp;     */
&nbsp;    @SuppressWarnings({&quot;unchecked&quot;, &quot;rawtypes&quot;})
&nbsp;    static &lt;T&gt; T parseObject(String text, TypeReference typeReference, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            context.config(features);</b>
<b class="nc">&nbsp;            Type type = typeReference.getType();</b>
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(type, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into Java Object
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param typeReference specify the {@link TypeReference} to be converted
&nbsp;     * @param filter specify filters to be enabled
&nbsp;     */
&nbsp;    @SuppressWarnings({&quot;unchecked&quot;, &quot;rawtypes&quot;})
&nbsp;    static &lt;T&gt; T parseObject(String text, TypeReference typeReference, Filter filter, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            context.config(filter, features);</b>
<b class="nc">&nbsp;            Type type = typeReference.getType();</b>
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(type, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(String text, Class&lt;T&gt; clazz, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            context.config(features);</b>
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
&nbsp;
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(clazz, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of bytes to parse
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(String text, int offset, int length, Class&lt;T&gt; clazz, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty() || length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text, offset, length)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            context.config(features);</b>
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
&nbsp;
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(clazz, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(String text, Class&lt;T&gt; clazz, JSONReader.Context context) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text, context)) {</b>
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
&nbsp;
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(clazz, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     * @param format the specified date format
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(String text, Class&lt;T&gt; clazz, String format, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            if (format != null &amp;&amp; !format.isEmpty()) {</b>
<b class="nc">&nbsp;                context.setDateFormat(format);</b>
&nbsp;            }
<b class="nc">&nbsp;            context.config(features);</b>
&nbsp;
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(clazz, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(String text, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param filter specify filters to be enabled
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(String text, Type type, Filter filter, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            reader.context.config(filter, features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param format the specified date format
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(String text, Type type, String format, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            if (format != null &amp;&amp; !format.isEmpty()) {</b>
<b class="nc">&nbsp;                context.setDateFormat(format);</b>
&nbsp;            }
<b class="nc">&nbsp;            context.config(features);</b>
&nbsp;
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON char array into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param chars JSON char array to parse
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of bytes to parse
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @since 2.0.13
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(char[] chars, int offset, int length, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (chars == null || chars.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(chars, offset, length)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON char array into a Java object
&nbsp;     *
&nbsp;     * @param chars JSON char array to parse
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     * @since 2.0.13
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(char[] chars, Class&lt;T&gt; clazz) {
<b class="nc">&nbsp;        if (chars == null || chars.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(chars)) {</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(clazz);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of bytes to parse
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @since 2.0.13
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(byte[] bytes, int offset, int length, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes, offset, length)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(byte[] bytes, Type type) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONReader reader = JSONReader.of(bytes);</b>
<b class="nc">&nbsp;        ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;        T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;        if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;            reader.handleResolveTasks(object);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;            throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;        }
<b class="nc">&nbsp;        return object;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(byte[] bytes, Class&lt;T&gt; clazz) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(clazz);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object
&nbsp;     *
&nbsp;     * @param utf8Bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     * @param filter specify filter to be enabled
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return Class
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(
&nbsp;            byte[] utf8Bytes,
&nbsp;            Class&lt;T&gt; clazz,
&nbsp;            Filter filter,
&nbsp;            JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (utf8Bytes == null || utf8Bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(utf8Bytes)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            reader.context.config(filter, features);</b>
&nbsp;
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(clazz, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object
&nbsp;     *
&nbsp;     * @param utf8Bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     * @param context specify the context use by JSONReader
&nbsp;     * @return Class
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(
&nbsp;            byte[] utf8Bytes,
&nbsp;            Class&lt;T&gt; clazz,
&nbsp;            JSONReader.Context context) {
<b class="nc">&nbsp;        if (utf8Bytes == null || utf8Bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(utf8Bytes, context)) {</b>
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(clazz, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object
&nbsp;     *
&nbsp;     * @param utf8Bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param format the specified date format
&nbsp;     * @param filters specify filters to be enabled
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @return Class
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(
&nbsp;            byte[] utf8Bytes,
&nbsp;            Type type,
&nbsp;            String format,
&nbsp;            Filter[] filters,
&nbsp;            JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (utf8Bytes == null || utf8Bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(utf8Bytes)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            context.setDateFormat(format);</b>
<b class="nc">&nbsp;            context.config(filters, features);</b>
&nbsp;
<b class="nc">&nbsp;            boolean fieldBased = (context.features &amp; JSONReader.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = context.provider.getObjectReader(type, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param clazz specify the Class to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(byte[] bytes, Class&lt;T&gt; clazz, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(clazz);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(byte[] bytes, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param filter specify filters to be enabled
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(byte[] bytes, Type type, Filter filter, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            reader.context.config(filter, features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param format the specified date format
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(byte[] bytes, Type type, String format, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            if (format != null &amp;&amp; !format.isEmpty()) {</b>
<b class="nc">&nbsp;                context.setDateFormat(format);</b>
&nbsp;            }
<b class="nc">&nbsp;            context.config(features);</b>
&nbsp;
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse Reader into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param input the JSON {@link InputStream} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(Reader input, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (input == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(input)) {</b>
<b class="nc">&nbsp;            if (reader.isEnd()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 inputStream into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param input the JSON {@link InputStream} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(InputStream input, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (input == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(input, StandardCharsets.UTF_8)) {</b>
<b class="nc">&nbsp;            if (reader.isEnd()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
&nbsp;
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 URL Resource into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param url the JSON {@link URL} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @throws JSONException if an I/O error occurs. In particular, a {@link JSONException} may be thrown if the output stream has been closed
&nbsp;     * @since 2.0.4
&nbsp;     */
&nbsp;    static &lt;T&gt; T parseObject(URL url, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (url == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (InputStream is = url.openStream()) {</b>
<b class="nc">&nbsp;            return parseObject(is, type, features);</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;parseObject error&quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 URL Resource into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param url the JSON {@link URL} to be parsed
&nbsp;     * @param objectClass specify the {@link Class} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @throws JSONException if an I/O error occurs. In particular, a {@link JSONException} may be thrown if the output stream has been closed
&nbsp;     * @since 2.0.9
&nbsp;     */
&nbsp;    static &lt;T&gt; T parseObject(URL url, Class&lt;T&gt; objectClass, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (url == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (InputStream is = url.openStream()) {</b>
<b class="nc">&nbsp;            return parseObject(is, objectClass, features);</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#parseObject cannot parse &#39;&quot; + url + &quot;&#39; to &#39;&quot; + objectClass + &quot;&#39;&quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 URL Resource into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param url the JSON {@link URL} to be parsed
&nbsp;     * @param function specify the {@link Function} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @throws JSONException if an I/O error occurs. In particular, a {@link JSONException} may be thrown if the output stream has been closed
&nbsp;     * @since 2.0.4
&nbsp;     */
&nbsp;    static &lt;T&gt; T parseObject(URL url, Function&lt;JSONObject, T&gt; function, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (url == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (InputStream is = url.openStream()) {</b>
<b class="nc">&nbsp;            JSONObject object = parseObject(is, features);</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            return function.apply(object);</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#parseObject cannot parse &#39;&quot; + url + &quot;&#39;&quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 inputStream into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param input the JSON {@link InputStream} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param format the specified date format
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(InputStream input, Type type, String format, JSONReader.Feature... features) {
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(input, StandardCharsets.UTF_8)) {</b>
<b class="nc">&nbsp;            JSONReader.Context context = reader.context;</b>
<b class="nc">&nbsp;            if (format != null &amp;&amp; !format.isEmpty()) {</b>
<b class="nc">&nbsp;                context.setDateFormat(format);</b>
&nbsp;            }
<b class="nc">&nbsp;            context.config(features);</b>
&nbsp;
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 inputStream into a Java object with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param input the JSON {@link InputStream} to be parsed
&nbsp;     * @param charset inputStream charset
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(InputStream input, Charset charset, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(input, charset)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parses the JSON byte array of the specified {@link Charset} into a Java Object
&nbsp;     *
&nbsp;     * @param bytes JSON byte array to parse
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of bytes to parse
&nbsp;     * @param charset specify {@link Charset} to parse
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @throws IndexOutOfBoundsException If the offset and the length arguments index characters outside the bounds of the bytes array
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(byte[] bytes, int offset, int length, Charset charset, Type type) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes, offset, length, charset)) {</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parses the JSON byte array of the specified {@link Charset} into a Java Object
&nbsp;     *
&nbsp;     * @param bytes JSON byte array to parse
&nbsp;     * @param offset the index of the first byte to parse
&nbsp;     * @param length the number of bytes to parse
&nbsp;     * @param charset specify {@link Charset} to parse
&nbsp;     * @param type specify the {@link Class} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @throws IndexOutOfBoundsException If the offset and the length arguments index characters outside the bounds of the bytes array
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; T parseObject(byte[] bytes,
&nbsp;                             int offset,
&nbsp;                             int length,
&nbsp;                             Charset charset,
&nbsp;                             Class&lt;T&gt; type,
&nbsp;                             JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes, offset, length, charset)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            ObjectReader&lt;T&gt; objectReader = reader.getObjectReader(type);</b>
<b class="nc">&nbsp;            T object = objectReader.readObject(reader, null, null, 0);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(object);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return object;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse {@link InputStream} into a Java object with specified {@link JSONReader.Feature}s enabled and consume it
&nbsp;     *
&nbsp;     * @param input the JSON {@link InputStream} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param consumer the consumer of the parsing result object
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @throws JSONException If the first byte cannot be read for any reason other than end of file, or if the input stream has been closed, or if some other I/O error occurs
&nbsp;     * @see JSON#parseObject(InputStream, Charset, char, Type, Consumer, JSONReader.Feature...)
&nbsp;     * @since 2.0.2
&nbsp;     */
&nbsp;    static &lt;T&gt; void parseObject(InputStream input, Type type, Consumer&lt;T&gt; consumer, JSONReader.Feature... features) {
<b class="nc">&nbsp;        parseObject(input, StandardCharsets.UTF_8, &#39;\n&#39;, type, consumer, features);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse {@link InputStream} into a Java object with specified {@link JSONReader.Feature}s enabled and consume it
&nbsp;     *
&nbsp;     * @param input the JSON {@link InputStream} to be parsed
&nbsp;     * @param charset specify {@link Charset} to parse
&nbsp;     * @param delimiter specify the delimiter
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param consumer the consumer of the parsing result object
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @throws JSONException If the first byte cannot be read for any reason other than end of file, or if the input stream has been closed, or if some other I/O error occurs
&nbsp;     * @since 2.0.2
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; void parseObject(InputStream input,
&nbsp;                                Charset charset,
&nbsp;                                char delimiter,
&nbsp;                                Type type,
&nbsp;                                Consumer&lt;T&gt; consumer,
&nbsp;                                JSONReader.Feature... features) {
<b class="nc">&nbsp;        int cachedIndex = System.identityHashCode(Thread.currentThread()) &amp; (CACHE_SIZE - 1);</b>
<b class="nc">&nbsp;        byte[] bytes = JSONFactory.allocateByteArray(cachedIndex);</b>
&nbsp;
<b class="nc">&nbsp;        int offset = 0, start = 0, end;</b>
<b class="nc">&nbsp;        ObjectReader&lt;? extends T&gt; objectReader = null;</b>
&nbsp;
&nbsp;        try {
&nbsp;            while (true) {
<b class="nc">&nbsp;                int n = input.read(bytes, offset, bytes.length - offset);</b>
<b class="nc">&nbsp;                if (n == -1) {</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                int k = offset;</b>
<b class="nc">&nbsp;                offset += n;</b>
<b class="nc">&nbsp;                boolean dispose = false;</b>
&nbsp;
<b class="nc">&nbsp;                for (; k &lt; offset; ++k) {</b>
<b class="nc">&nbsp;                    if (bytes[k] == delimiter) {</b>
<b class="nc">&nbsp;                        end = k;</b>
&nbsp;
<b class="nc">&nbsp;                        JSONReader jsonReader = JSONReader.of(bytes, start, end - start, charset);</b>
<b class="nc">&nbsp;                        jsonReader.context.config(features);</b>
<b class="nc">&nbsp;                        if (objectReader == null) {</b>
<b class="nc">&nbsp;                            objectReader = jsonReader.getObjectReader(type);</b>
&nbsp;                        }
&nbsp;
<b class="nc">&nbsp;                        T object = objectReader.readObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;                        if (jsonReader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                            jsonReader.handleResolveTasks(object);</b>
&nbsp;                        }
<b class="nc">&nbsp;                        if (jsonReader.ch != EOI &amp;&amp; (jsonReader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                            throw new JSONException(jsonReader.info(&quot;input not end&quot;));</b>
&nbsp;                        }
&nbsp;
<b class="nc">&nbsp;                        consumer.accept(</b>
&nbsp;                                object
&nbsp;                        );
<b class="nc">&nbsp;                        start = end + 1;</b>
<b class="nc">&nbsp;                        dispose = true;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if (offset == bytes.length) {</b>
<b class="nc">&nbsp;                    if (dispose) {</b>
<b class="nc">&nbsp;                        int len = bytes.length - start;</b>
<b class="nc">&nbsp;                        System.arraycopy(bytes, start, bytes, 0, len);</b>
<b class="nc">&nbsp;                        start = 0;</b>
<b class="nc">&nbsp;                        offset = len;</b>
<b class="nc">&nbsp;                    } else {</b>
<b class="nc">&nbsp;                        bytes = Arrays.copyOf(bytes, bytes.length + 8192);</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#parseObject cannot parse the &#39;InputStream&#39; to &#39;&quot; + type + &quot;&#39;&quot;, e);</b>
&nbsp;        } finally {
<b class="nc">&nbsp;            JSONFactory.releaseByteArray(cachedIndex, bytes);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse {@link Reader} into a Java object with specified {@link JSONReader.Feature}s enabled and consume it
&nbsp;     *
&nbsp;     * @param input the JSON {@link Reader} to be parsed
&nbsp;     * @param delimiter specify the delimiter
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param consumer the consumer of the parsing result object
&nbsp;     * @throws JSONException If the first byte cannot be read for any reason other than end of file, or if the input stream has been closed, or if some other I/O error occurs
&nbsp;     * @since 2.0.2
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; void parseObject(Reader input, char delimiter, Type type, Consumer&lt;T&gt; consumer) {
<b class="nc">&nbsp;        final int cachedIndex = System.identityHashCode(Thread.currentThread()) &amp; (CACHE_SIZE - 1);</b>
<b class="nc">&nbsp;        char[] chars = JSONFactory.allocateCharArray(cachedIndex);</b>
&nbsp;
<b class="nc">&nbsp;        int offset = 0, start = 0, end;</b>
<b class="nc">&nbsp;        ObjectReader&lt;? extends T&gt; objectReader = null;</b>
&nbsp;
&nbsp;        try {
&nbsp;            while (true) {
<b class="nc">&nbsp;                int n = input.read(chars, offset, chars.length - offset);</b>
<b class="nc">&nbsp;                if (n == -1) {</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                int k = offset;</b>
<b class="nc">&nbsp;                offset += n;</b>
<b class="nc">&nbsp;                boolean dispose = false;</b>
&nbsp;
<b class="nc">&nbsp;                for (; k &lt; offset; ++k) {</b>
<b class="nc">&nbsp;                    if (chars[k] == delimiter) {</b>
<b class="nc">&nbsp;                        end = k;</b>
&nbsp;
<b class="nc">&nbsp;                        JSONReader jsonReader = JSONReader.of(chars, start, end - start);</b>
<b class="nc">&nbsp;                        if (objectReader == null) {</b>
<b class="nc">&nbsp;                            objectReader = jsonReader.getObjectReader(type);</b>
&nbsp;                        }
&nbsp;
<b class="nc">&nbsp;                        consumer.accept(</b>
<b class="nc">&nbsp;                                objectReader.readObject(jsonReader, null, null, 0)</b>
&nbsp;                        );
<b class="nc">&nbsp;                        start = end + 1;</b>
<b class="nc">&nbsp;                        dispose = true;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                if (offset == chars.length) {</b>
<b class="nc">&nbsp;                    if (dispose) {</b>
<b class="nc">&nbsp;                        int len = chars.length - start;</b>
<b class="nc">&nbsp;                        System.arraycopy(chars, start, chars, 0, len);</b>
<b class="nc">&nbsp;                        start = 0;</b>
<b class="nc">&nbsp;                        offset = len;</b>
<b class="nc">&nbsp;                    } else {</b>
<b class="nc">&nbsp;                        chars = Arrays.copyOf(chars, chars.length + 8192);</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#parseObject cannot parse the &#39;Reader&#39; to &#39;&quot; + type + &quot;&#39;&quot;, e);</b>
&nbsp;        } finally {
<b class="nc">&nbsp;            JSONFactory.releaseCharArray(cachedIndex, chars);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONArray}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     */
&nbsp;    static JSONArray parseArray(String text) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            JSONArray array = new JSONArray();</b>
<b class="nc">&nbsp;            reader.read(array);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(array);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return array;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONArray}
&nbsp;     *
&nbsp;     * @param bytes the JSON {@link String} to be parsed
&nbsp;     */
&nbsp;    static JSONArray parseArray(byte[] bytes) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            JSONArray array = new JSONArray();</b>
<b class="nc">&nbsp;            reader.read(array);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(array);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return array;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONArray}
&nbsp;     *
&nbsp;     * @param bytes the JSON {@link String} to be parsed
&nbsp;     * @param offset the index of the first byte to validate
&nbsp;     * @param length the number of bytes to validate
&nbsp;     * @param charset specify {@link Charset} to validate
&nbsp;     * @since 2.0.13
&nbsp;     */
&nbsp;    static JSONArray parseArray(byte[] bytes, int offset, int length, Charset charset) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes, offset, length, charset)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            JSONArray array = new JSONArray();</b>
<b class="nc">&nbsp;            reader.read(array);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(array);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return array;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONArray}
&nbsp;     *
&nbsp;     * @param chars the JSON {@link String} to be parsed
&nbsp;     */
&nbsp;    static JSONArray parseArray(char[] chars) {
<b class="nc">&nbsp;        if (chars == null || chars.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(chars)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            JSONArray array = new JSONArray();</b>
<b class="nc">&nbsp;            reader.read(array);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(array);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return array;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link JSONArray}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    static JSONArray parseArray(String text, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            JSONArray array = new JSONArray();</b>
<b class="nc">&nbsp;            reader.read(array);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(array);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return array;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link InputStream} into {@link JSONArray}
&nbsp;     *
&nbsp;     * @param url the JSON {@link URL} to be parsed
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    static JSONArray parseArray(URL url, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (url == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (InputStream is = url.openStream()) {</b>
<b class="nc">&nbsp;            return parseArray(is, features);</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#parseArray cannot parse &#39;&quot; + url + &quot;&#39; to &#39;&quot; + JSONArray.class + &quot;&#39;&quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link InputStream} into {@link JSONArray}
&nbsp;     *
&nbsp;     * @param in the JSON {@link InputStream} to be parsed
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    static JSONArray parseArray(InputStream in, JSONReader.Feature... features) {
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(in, StandardCharsets.UTF_8)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            JSONArray array = new JSONArray();</b>
<b class="nc">&nbsp;            reader.read(array);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(array);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return array;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link List}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; List&lt;T&gt; parseArray(String text, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            List&lt;T&gt; list = reader.readArray(type);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(list);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return list;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link List}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param type specify the {@link Class} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; List&lt;T&gt; parseArray(String text, Class&lt;T&gt; type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            List&lt;T&gt; list = reader.readArray(type);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(list);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return list;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link List}
&nbsp;     *
&nbsp;     * @param chars the JSON {@link String} to be parsed
&nbsp;     * @param type specify the {@link Class} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     * @since 2.0.13
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; List&lt;T&gt; parseArray(char[] chars, Class&lt;T&gt; type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (chars == null || chars.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(chars)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            List&lt;T&gt; list = reader.readArray(type);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(list);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return list;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse JSON {@link String} into {@link List}
&nbsp;     *
&nbsp;     * @param text the JSON {@link String} to be parsed
&nbsp;     * @param types specify some {@link Type}s to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    static &lt;T&gt; List&lt;T&gt; parseArray(String text, Type[] types, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        List&lt;T&gt; array = new ArrayList&lt;&gt;(types.length);</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            if (reader.nextIfNull()) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            reader.context.config(features);</b>
&nbsp;
<b class="nc">&nbsp;            reader.startArray();</b>
<b class="nc">&nbsp;            for (Type itemType : types) {</b>
<b class="nc">&nbsp;                array.add(</b>
<b class="nc">&nbsp;                        reader.read(itemType)</b>
&nbsp;                );
&nbsp;            }
<b class="nc">&nbsp;            reader.endArray();</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(array);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return array;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link List} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param type specify the {@link Type} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; List&lt;T&gt; parseArray(byte[] bytes, Type type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            List&lt;T&gt; list = reader.readArray(type);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(list);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return list;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link List} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param type specify the {@link Class} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; List&lt;T&gt; parseArray(byte[] bytes, Class&lt;T&gt; type, JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            List&lt;T&gt; list = reader.readArray(type);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(list);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return list;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parse UTF8 encoded JSON byte array into {@link List} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param bytes UTF8 encoded JSON byte array to parse
&nbsp;     * @param offset the index of the first byte to validate
&nbsp;     * @param length the number of bytes to validate
&nbsp;     * @param charset specify {@link Charset} to validate
&nbsp;     * @param type specify the {@link Class} to be converted
&nbsp;     * @param features features to be enabled in parsing
&nbsp;     */
&nbsp;    @SuppressWarnings(&quot;unchecked&quot;)
&nbsp;    static &lt;T&gt; List&lt;T&gt; parseArray(byte[] bytes,
&nbsp;                                  int offset,
&nbsp;                                  int length,
&nbsp;                                  Charset charset,
&nbsp;                                  Class&lt;T&gt; type,
&nbsp;                                  JSONReader.Feature... features) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader reader = JSONReader.of(bytes, offset, length, charset)) {</b>
<b class="nc">&nbsp;            reader.context.config(features);</b>
<b class="nc">&nbsp;            List&lt;T&gt; list = reader.readArray(type);</b>
<b class="nc">&nbsp;            if (reader.resolveTasks != null) {</b>
<b class="nc">&nbsp;                reader.handleResolveTasks(list);</b>
&nbsp;            }
<b class="nc">&nbsp;            if (reader.ch != EOI &amp;&amp; (reader.context.features &amp; IgnoreCheckClose.mask) == 0) {</b>
<b class="nc">&nbsp;                throw new JSONException(reader.info(&quot;input not end&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            return list;</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON {@link String}
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON {@link String}
&nbsp;     */
&nbsp;    static String toJSONString(Object object) {
<b class="nc">&nbsp;        JSONWriter.Context writeContext = new JSONWriter.Context(JSONFactory.defaultObjectWriterProvider);</b>
&nbsp;
<b class="nc">&nbsp;        boolean pretty = (writeContext.features &amp; JSONWriter.Feature.PrettyFormat.mask) != 0;</b>
&nbsp;
&nbsp;        JSONWriter jsonWriter;
<b class="nc">&nbsp;        if (JVM_VERSION == 8) {</b>
<b class="nc">&nbsp;            jsonWriter = new JSONWriterUTF16JDK8(writeContext);</b>
<b class="nc">&nbsp;        } else if ((writeContext.features &amp; JSONWriter.Feature.OptimizedForAscii.mask) != 0) {</b>
<b class="nc">&nbsp;            jsonWriter = new JSONWriterUTF8JDK9(writeContext);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            jsonWriter = new JSONWriterUTF16(writeContext);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONWriter writer = pretty ?</b>
&nbsp;                new JSONWriterPretty(jsonWriter) : jsonWriter) {
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                if (valueClass == JSONObject.class) {</b>
<b class="nc">&nbsp;                    writer.write((JSONObject) object);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    JSONWriter.Context context = writer.context;</b>
<b class="nc">&nbsp;                    boolean fieldBased = (context.features &amp; JSONWriter.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;                    ObjectWriter&lt;?&gt; objectWriter = context.provider.getObjectWriter(valueClass, valueClass, fieldBased);</b>
<b class="nc">&nbsp;                    objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        } catch (NullPointerException | NumberFormatException e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#toJSONString cannot serialize &#39;&quot; + object + &quot;&#39;&quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON {@link String}
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON {@link String}
&nbsp;     * @param context
&nbsp;     */
&nbsp;    static String toJSONString(Object object, JSONWriter.Context context) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(context)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        } catch (NullPointerException | NumberFormatException e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#toJSONString cannot serialize &#39;&quot; + object + &quot;&#39;&quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON {@link String} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON {@link String}
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     */
&nbsp;    static String toJSONString(Object object, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        JSONWriter.Context writeContext = new JSONWriter.Context(JSONFactory.defaultObjectWriterProvider, features);</b>
&nbsp;
<b class="nc">&nbsp;        boolean pretty = (writeContext.features &amp; JSONWriter.Feature.PrettyFormat.mask) != 0;</b>
&nbsp;
&nbsp;        JSONWriter jsonWriter;
<b class="nc">&nbsp;        if (JVM_VERSION == 8) {</b>
<b class="nc">&nbsp;            jsonWriter = new JSONWriterUTF16JDK8(writeContext);</b>
<b class="nc">&nbsp;        } else if ((writeContext.features &amp; JSONWriter.Feature.OptimizedForAscii.mask) != 0) {</b>
<b class="nc">&nbsp;            jsonWriter = new JSONWriterUTF8JDK9(writeContext);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            jsonWriter = new JSONWriterUTF16(writeContext);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONWriter writer = pretty ?</b>
&nbsp;                new JSONWriterPretty(jsonWriter) : jsonWriter) {
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
&nbsp;
<b class="nc">&nbsp;                boolean fieldBased = (writeContext.features &amp; JSONWriter.Feature.FieldBased.mask) != 0;</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writeContext.provider.getObjectWriter(valueClass, valueClass, fieldBased);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON {@link String} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON {@link String}
&nbsp;     * @param filter specify a filter to use in serialization
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     */
&nbsp;    static String toJSONString(Object object, Filter filter, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                if (filter != null) {</b>
<b class="nc">&nbsp;                    writer.context.configFilter(filter);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON {@link String} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON {@link String}
&nbsp;     * @param filters specifies the filter to use in serialization
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     */
&nbsp;    static String toJSONString(Object object, Filter[] filters, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                if (filters != null &amp;&amp; filters.length != 0) {</b>
<b class="nc">&nbsp;                    writer.context.configFilter(filters);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON {@link String} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON {@link String}
&nbsp;     * @param format the specified date format
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     */
&nbsp;    static String toJSONString(Object object, String format, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                if (format != null &amp;&amp; !format.isEmpty()) {</b>
<b class="nc">&nbsp;                    writer.context.setDateFormat(format);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON {@link String} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON {@link String}
&nbsp;     * @param format the specified date format
&nbsp;     * @param filters specifies the filter to use in serialization
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     */
&nbsp;    static String toJSONString(Object object, String format, Filter[] filters, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                if (format != null &amp;&amp; !format.isEmpty()) {</b>
<b class="nc">&nbsp;                    writer.context.setDateFormat(format);</b>
&nbsp;                }
<b class="nc">&nbsp;                if (filters != null &amp;&amp; filters.length != 0) {</b>
<b class="nc">&nbsp;                    writer.context.configFilter(filters);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.toString();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON byte array
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON byte array
&nbsp;     */
&nbsp;    static byte[] toJSONBytes(Object object) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8()) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.getBytes();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON byte array
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON byte array
&nbsp;     * @param filters specifies the filter to use in serialization
&nbsp;     */
&nbsp;    static byte[] toJSONBytes(Object object, Filter... filters) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8()) {</b>
<b class="nc">&nbsp;            if (filters != null &amp;&amp; filters.length != 0) {</b>
<b class="nc">&nbsp;                writer.context.configFilter(filters);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.getBytes();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON byte array with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON byte array
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     */
&nbsp;    static byte[] toJSONBytes(Object object, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.getBytes();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON byte array with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON byte array
&nbsp;     * @param filters specifies the filter to use in serialization
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     */
&nbsp;    static byte[] toJSONBytes(Object object, Filter[] filters, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                if (filters != null &amp;&amp; filters.length != 0) {</b>
<b class="nc">&nbsp;                    writer.context.configFilter(filters);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.getBytes();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON byte array with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param object Java Object to be serialized into JSON byte array
&nbsp;     * @param format the specified date format
&nbsp;     * @param filters specifies the filter to use in serialization
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     */
&nbsp;    static byte[] toJSONBytes(Object object, String format, Filter[] filters, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                if (format != null &amp;&amp; !format.isEmpty()) {</b>
<b class="nc">&nbsp;                    writer.context.setDateFormat(format);</b>
&nbsp;                }
<b class="nc">&nbsp;                if (filters != null &amp;&amp; filters.length != 0) {</b>
<b class="nc">&nbsp;                    writer.context.configFilter(filters);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
<b class="nc">&nbsp;            return writer.getBytes();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON and write to {@link OutputStream} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param out {@link OutputStream} to be written
&nbsp;     * @param object Java Object to be serialized into JSON
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     * @throws JSONException if an I/O error occurs. In particular, a {@link JSONException} may be thrown if the output stream has been closed
&nbsp;     */
&nbsp;    static int writeTo(OutputStream out, Object object, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.flushTo(out);</b>
<b class="nc">&nbsp;        } catch (Exception e) {</b>
<b class="nc">&nbsp;            throw new JSONException(e.getMessage(), e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON and write to {@link OutputStream} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param out {@link OutputStream} to be written
&nbsp;     * @param object Java Object to be serialized into JSON
&nbsp;     * @param filters specifies the filter to use in serialization
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     * @throws JSONException if an I/O error occurs. In particular, a {@link JSONException} may be thrown if the output stream has been closed
&nbsp;     */
&nbsp;    static int writeTo(OutputStream out, Object object, Filter[] filters, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                if (filters != null &amp;&amp; filters.length != 0) {</b>
<b class="nc">&nbsp;                    writer.context.configFilter(filters);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.flushTo(out);</b>
<b class="nc">&nbsp;        } catch (Exception e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#writeTo cannot serialize &#39;&quot; + object + &quot;&#39; to &#39;OutputStream&#39;&quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Serialize Java Object to JSON and write to {@link OutputStream} with specified {@link JSONReader.Feature}s enabled
&nbsp;     *
&nbsp;     * @param out {@link OutputStream} to be written
&nbsp;     * @param object Java Object to be serialized into JSON
&nbsp;     * @param format the specified date format
&nbsp;     * @param filters specifies the filter to use in serialization
&nbsp;     * @param features features to be enabled in serialization
&nbsp;     * @throws JSONException if an I/O error occurs. In particular, a {@link JSONException} may be thrown if the output stream has been closed
&nbsp;     */
&nbsp;    static int writeTo(OutputStream out,
&nbsp;                       Object object,
&nbsp;                       String format,
&nbsp;                       Filter[] filters,
&nbsp;                       JSONWriter.Feature... features) {
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofUTF8(features)) {</b>
<b class="nc">&nbsp;            if (object == null) {</b>
<b class="nc">&nbsp;                writer.writeNull();</b>
&nbsp;            } else {
<b class="nc">&nbsp;                writer.setRootObject(object);</b>
<b class="nc">&nbsp;                if (format != null &amp;&amp; !format.isEmpty()) {</b>
<b class="nc">&nbsp;                    writer.context.setDateFormat(format);</b>
&nbsp;                }
<b class="nc">&nbsp;                if (filters != null &amp;&amp; filters.length != 0) {</b>
<b class="nc">&nbsp;                    writer.context.configFilter(filters);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;                ObjectWriter&lt;?&gt; objectWriter = writer.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;                objectWriter.write(writer, object, null, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return writer.flushTo(out);</b>
<b class="nc">&nbsp;        } catch (Exception e) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;JSON#writeTo cannot serialize &#39;&quot; + object + &quot;&#39; to &#39;OutputStream&#39;&quot;, e);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Verify the {@link String} is JSON
&nbsp;     *
&nbsp;     * @param text the {@link String} to validate
&nbsp;     * @return {@code true} or {@code false}
&nbsp;     */
&nbsp;    static boolean isValid(String text) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            jsonReader.skipValue();</b>
<b class="nc">&nbsp;            return jsonReader.isEnd();</b>
<b class="nc">&nbsp;        } catch (JSONException error) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Verify the char array is JSON
&nbsp;     *
&nbsp;     * @param chars the {@link String} to validate
&nbsp;     * @return {@code true} or {@code false}
&nbsp;     */
&nbsp;    static boolean isValid(char[] chars) {
<b class="nc">&nbsp;        if (chars == null || chars.length == 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(chars)) {</b>
<b class="nc">&nbsp;            jsonReader.skipValue();</b>
<b class="nc">&nbsp;            return jsonReader.isEnd();</b>
<b class="nc">&nbsp;        } catch (JSONException error) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Verify the {@link String} is JSON Object
&nbsp;     *
&nbsp;     * @param text the {@link String} to validate
&nbsp;     * @return {@code true} or {@code false}
&nbsp;     */
&nbsp;    static boolean isValidObject(String text) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            if (!jsonReader.isObject()) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="nc">&nbsp;            jsonReader.skipValue();</b>
<b class="nc">&nbsp;            return jsonReader.isEnd();</b>
<b class="nc">&nbsp;        } catch (JSONException error) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Verify the byte array is JSON Object
&nbsp;     *
&nbsp;     * @param bytes the byte array to validate
&nbsp;     * @return {@code true} or {@code false}
&nbsp;     */
&nbsp;    static boolean isValidObject(byte[] bytes) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            if (!jsonReader.isObject()) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="nc">&nbsp;            jsonReader.skipValue();</b>
<b class="nc">&nbsp;            return jsonReader.isEnd();</b>
<b class="nc">&nbsp;        } catch (JSONException error) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Verify the {@link String} is JSON Array
&nbsp;     *
&nbsp;     * @param text the {@link String} to validate
&nbsp;     * @return {@code true} or {@code false}
&nbsp;     */
&nbsp;    static boolean isValidArray(String text) {
<b class="nc">&nbsp;        if (text == null || text.isEmpty()) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(text)) {</b>
<b class="nc">&nbsp;            if (!jsonReader.isArray()) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="nc">&nbsp;            jsonReader.skipValue();</b>
<b class="nc">&nbsp;            return jsonReader.isEnd();</b>
<b class="nc">&nbsp;        } catch (JSONException error) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Verify the byte array is JSON Object
&nbsp;     *
&nbsp;     * @param bytes the byte array to validate
&nbsp;     * @return {@code true} or {@code false}
&nbsp;     */
&nbsp;    static boolean isValid(byte[] bytes) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            jsonReader.skipValue();</b>
<b class="nc">&nbsp;            return jsonReader.isEnd();</b>
<b class="nc">&nbsp;        } catch (JSONException error) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Verify the byte array is JSON Array
&nbsp;     *
&nbsp;     * @param bytes the byte array to validate
&nbsp;     * @return {@code true} or {@code false}
&nbsp;     */
&nbsp;    static boolean isValidArray(byte[] bytes) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(bytes)) {</b>
<b class="nc">&nbsp;            if (!jsonReader.isArray()) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="nc">&nbsp;            jsonReader.skipValue();</b>
<b class="nc">&nbsp;            return jsonReader.isEnd();</b>
<b class="nc">&nbsp;        } catch (JSONException error) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Verify the byte array is JSON Object
&nbsp;     *
&nbsp;     * @param bytes the byte array to validate
&nbsp;     * @param offset the index of the first byte to validate
&nbsp;     * @param length the number of bytes to validate
&nbsp;     * @param charset specify {@link Charset} to validate
&nbsp;     * @return {@code true} or {@code false}
&nbsp;     */
&nbsp;    static boolean isValid(byte[] bytes, int offset, int length, Charset charset) {
<b class="nc">&nbsp;        if (bytes == null || bytes.length == 0) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.of(bytes, offset, length, charset)) {</b>
<b class="nc">&nbsp;            jsonReader.skipValue();</b>
<b class="nc">&nbsp;            return jsonReader.isEnd();</b>
<b class="nc">&nbsp;        } catch (JSONException error) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Convert Java object order to {@link JSONArray} or {@link JSONObject}
&nbsp;     *
&nbsp;     * @param object Java Object to be converted
&nbsp;     * @return Java Object
&nbsp;     */
&nbsp;    static Object toJSON(Object object) {
<b class="nc">&nbsp;        return toJSON(object, new JSONWriter.Feature[0]);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Convert Java object order to {@link JSONArray} or {@link JSONObject}
&nbsp;     *
&nbsp;     * @param object Java Object to be converted
&nbsp;     * @return Java Object
&nbsp;     */
&nbsp;    @SuppressWarnings({&quot;unchecked&quot;, &quot;rawtypes&quot;})
&nbsp;    static Object toJSON(Object object, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        if (object == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (object instanceof JSONObject || object instanceof JSONArray) {</b>
<b class="nc">&nbsp;            return object;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        JSONWriter.Context writeContext = JSONFactory.createWriteContext(features);</b>
<b class="nc">&nbsp;        Class&lt;?&gt; valueClass = object.getClass();</b>
<b class="nc">&nbsp;        ObjectWriter&lt;?&gt; objectWriter = writeContext.getObjectWriter(valueClass, valueClass);</b>
<b class="nc">&nbsp;        if (objectWriter instanceof ObjectWriterAdapter &amp;&amp; !writeContext.isEnabled(JSONWriter.Feature.ReferenceDetection)) {</b>
<b class="nc">&nbsp;            ObjectWriterAdapter objectWriterAdapter = (ObjectWriterAdapter) objectWriter;</b>
<b class="nc">&nbsp;            return objectWriterAdapter.toJSONObject(object);</b>
&nbsp;        }
&nbsp;
&nbsp;        String str;
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.of(writeContext)) {</b>
<b class="nc">&nbsp;            objectWriter.write(writer, object, null, null, 0);</b>
<b class="nc">&nbsp;            str = writer.toString();</b>
<b class="nc">&nbsp;        } catch (NullPointerException | NumberFormatException ex) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;toJSONString error&quot;, ex);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        return parse(str);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Convert the Object to the target type
&nbsp;     *
&nbsp;     * @param clazz converted goal class
&nbsp;     * @param object Java Object to be converted
&nbsp;     * @since 2.0.4
&nbsp;     */
&nbsp;    static &lt;T&gt; T to(Class&lt;T&gt; clazz, Object object) {
<b class="nc">&nbsp;        if (object == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (object instanceof JSONObject) {</b>
<b class="nc">&nbsp;            return ((JSONObject) object).to(clazz);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return TypeUtils.cast(object, clazz, JSONFactory.getDefaultObjectReaderProvider());</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Convert the Object to the target type
&nbsp;     *
&nbsp;     * @param object Java Object to be converted
&nbsp;     * @param clazz converted goal class
&nbsp;     * @deprecated since 2.0.4, please use {@link #to(Class, Object)}
&nbsp;     */
&nbsp;    static &lt;T&gt; T toJavaObject(Object object, Class&lt;T&gt; clazz) {
<b class="nc">&nbsp;        return to(clazz, object);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @since 2.0.2
&nbsp;     */
&nbsp;    static void mixIn(Class&lt;?&gt; target, Class&lt;?&gt; mixinSource) {
<b class="nc">&nbsp;        JSONFactory.defaultObjectWriterProvider.mixIn(target, mixinSource);</b>
<b class="nc">&nbsp;        JSONFactory.getDefaultObjectReaderProvider().mixIn(target, mixinSource);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Register an {@link ObjectReader} for {@link Type} in default {@link com.alibaba.fastjson2.reader.ObjectReaderProvider}
&nbsp;     *
&nbsp;     * @see JSONFactory#getDefaultObjectReaderProvider()
&nbsp;     * @see com.alibaba.fastjson2.reader.ObjectReaderProvider#register(Type, ObjectReader)
&nbsp;     * @since 2.0.2
&nbsp;     */
&nbsp;    static ObjectReader&lt;?&gt; register(Type type, ObjectReader&lt;?&gt; objectReader) {
<b class="nc">&nbsp;        return JSONFactory.getDefaultObjectReaderProvider().register(type, objectReader);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Register if absent an {@link ObjectReader} for {@link Type} in default {@link com.alibaba.fastjson2.reader.ObjectReaderProvider}
&nbsp;     *
&nbsp;     * @see JSONFactory#getDefaultObjectReaderProvider()
&nbsp;     * @see com.alibaba.fastjson2.reader.ObjectReaderProvider#registerIfAbsent(Type, ObjectReader)
&nbsp;     * @since 2.0.6
&nbsp;     */
&nbsp;    static ObjectReader&lt;?&gt; registerIfAbsent(Type type, ObjectReader&lt;?&gt; objectReader) {
<b class="nc">&nbsp;        return JSONFactory.getDefaultObjectReaderProvider().registerIfAbsent(type, objectReader);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Register an {@link ObjectReaderModule} in default {@link com.alibaba.fastjson2.reader.ObjectReaderProvider}
&nbsp;     *
&nbsp;     * @see JSONFactory#getDefaultObjectReaderProvider()
&nbsp;     * @see com.alibaba.fastjson2.reader.ObjectReaderProvider#register(ObjectReaderModule)
&nbsp;     */
&nbsp;    static boolean register(ObjectReaderModule objectReaderModule) {
<b class="nc">&nbsp;        return JSONFactory.getDefaultObjectReaderProvider().register(objectReaderModule);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Register an {@link ObjectWriterModule} in default {@link  com.alibaba.fastjson2.writer.ObjectWriterProvider}
&nbsp;     *
&nbsp;     * @see JSONFactory#getDefaultObjectWriterProvider()
&nbsp;     * @see com.alibaba.fastjson2.writer.ObjectWriterProvider#register(ObjectWriterModule)
&nbsp;     */
&nbsp;    static boolean register(ObjectWriterModule objectWriterModule) {
<b class="nc">&nbsp;        return JSONFactory.getDefaultObjectWriterProvider().register(objectWriterModule);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Register an {@link ObjectWriter} for {@link Type} in default {@link  com.alibaba.fastjson2.writer.ObjectWriterProvider}
&nbsp;     *
&nbsp;     * @see JSONFactory#getDefaultObjectWriterProvider()
&nbsp;     * @see com.alibaba.fastjson2.writer.ObjectWriterProvider#register(Type, ObjectWriter)
&nbsp;     * @since 2.0.2
&nbsp;     */
&nbsp;    static ObjectWriter&lt;?&gt; register(Type type, ObjectWriter&lt;?&gt; objectWriter) {
<b class="nc">&nbsp;        return JSONFactory.getDefaultObjectWriterProvider().register(type, objectWriter);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Register if absent an {@link ObjectWriter} for {@link Type} in default {@link  com.alibaba.fastjson2.writer.ObjectWriterProvider}
&nbsp;     *
&nbsp;     * @see JSONFactory#getDefaultObjectWriterProvider()
&nbsp;     * @see com.alibaba.fastjson2.writer.ObjectWriterProvider#registerIfAbsent(Type, ObjectWriter)
&nbsp;     * @since 2.0.6
&nbsp;     */
&nbsp;    static ObjectWriter&lt;?&gt; registerIfAbsent(Type type, ObjectWriter&lt;?&gt; objectWriter) {
<b class="nc">&nbsp;        return JSONFactory.getDefaultObjectWriterProvider().registerIfAbsent(type, objectWriter);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Register ObjectWriterFilter
&nbsp;     * @param type
&nbsp;     * @param filter
&nbsp;     * @since 2.0.19
&nbsp;     */
&nbsp;    static void register(Class type, Filter filter) {
<b class="nc">&nbsp;        boolean writerFilter</b>
&nbsp;                = filter instanceof AfterFilter
&nbsp;                || filter instanceof BeforeFilter
&nbsp;                || filter instanceof ContextNameFilter
&nbsp;                || filter instanceof ContextValueFilter
&nbsp;                || filter instanceof LabelFilter
&nbsp;                || filter instanceof NameFilter
&nbsp;                || filter instanceof PropertyFilter
&nbsp;                || filter instanceof PropertyPreFilter
&nbsp;                || filter instanceof ValueFilter;
<b class="nc">&nbsp;        if (writerFilter) {</b>
&nbsp;            ObjectWriter objectWriter
&nbsp;                    = JSONFactory
<b class="nc">&nbsp;                    .getDefaultObjectWriterProvider()</b>
<b class="nc">&nbsp;                    .getObjectWriter(type);</b>
<b class="nc">&nbsp;            objectWriter.setFilter(filter);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Enable the specified features in default reader
&nbsp;     *
&nbsp;     * @param features the specified features to be used
&nbsp;     * @since 2.0.6
&nbsp;     */
&nbsp;    static void config(JSONReader.Feature... features) {
<b class="nc">&nbsp;        for (JSONReader.Feature feature : features) {</b>
<b class="nc">&nbsp;            if (feature == JSONReader.Feature.SupportAutoType) {</b>
<b class="nc">&nbsp;                throw new JSONException(&quot;not support config global autotype support&quot;);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            JSONFactory.defaultReaderFeatures |= feature.mask;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Enable or disable the specified features in default reader
&nbsp;     *
&nbsp;     * @param feature the specified feature to be used
&nbsp;     * @param state enable this feature if and only if {@code state} is {@code true}, disable otherwise
&nbsp;     * @since 2.0.6
&nbsp;     */
&nbsp;    static void config(JSONReader.Feature feature, boolean state) {
<b class="nc">&nbsp;        if (feature == JSONReader.Feature.SupportAutoType &amp;&amp; state) {</b>
<b class="nc">&nbsp;            throw new JSONException(&quot;not support config global autotype support&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if (state) {</b>
<b class="nc">&nbsp;            JSONFactory.defaultReaderFeatures |= feature.mask;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            JSONFactory.defaultReaderFeatures &amp;= ~feature.mask;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Check if the default reader enables the specified feature
&nbsp;     *
&nbsp;     * @param feature the specified feature
&nbsp;     * @since 2.0.6
&nbsp;     */
&nbsp;    static boolean isEnabled(JSONReader.Feature feature) {
<b class="nc">&nbsp;        return (JSONFactory.defaultReaderFeatures &amp; feature.mask) != 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Enable the specified features in default writer
&nbsp;     *
&nbsp;     * @param features the specified features to be used
&nbsp;     * @since 2.0.6
&nbsp;     */
&nbsp;    static void config(JSONWriter.Feature... features) {
<b class="nc">&nbsp;        for (JSONWriter.Feature feature : features) {</b>
<b class="nc">&nbsp;            JSONFactory.defaultWriterFeatures |= feature.mask;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Enable or disable the specified features in default writer
&nbsp;     *
&nbsp;     * @param feature the specified feature to be used
&nbsp;     * @param state enable this feature if and only if {@code state} is {@code true}, disable otherwise
&nbsp;     * @since 2.0.6
&nbsp;     */
&nbsp;    static void config(JSONWriter.Feature feature, boolean state) {
<b class="nc">&nbsp;        if (state) {</b>
<b class="nc">&nbsp;            JSONFactory.defaultWriterFeatures |= feature.mask;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            JSONFactory.defaultWriterFeatures &amp;= ~feature.mask;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Check if the default writer enables the specified feature
&nbsp;     *
&nbsp;     * @param feature the specified feature
&nbsp;     * @since 2.0.6
&nbsp;     */
&nbsp;    static boolean isEnabled(JSONWriter.Feature feature) {
<b class="nc">&nbsp;        return (JSONFactory.defaultWriterFeatures &amp; feature.mask) != 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * use ObjectWriter and ObjectReader copy java object
&nbsp;     *
&nbsp;     * @param object the object to be copy
&nbsp;     * @param features the specified features
&nbsp;     * @since 2.0.12
&nbsp;     */
&nbsp;    static &lt;T&gt; T copy(T object, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        if (object == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        Class&lt;?&gt; objectClass = object.getClass();</b>
<b class="nc">&nbsp;        if (ObjectWriterProvider.isPrimitiveOrEnum(objectClass)) {</b>
<b class="nc">&nbsp;            return object;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        boolean fieldBased = false, beanToArray = false;</b>
<b class="nc">&nbsp;        long featuresValue = 0;</b>
<b class="nc">&nbsp;        for (JSONWriter.Feature feature : features) {</b>
<b class="nc">&nbsp;            featuresValue |= feature.mask;</b>
<b class="nc">&nbsp;            if (feature == JSONWriter.Feature.FieldBased) {</b>
<b class="nc">&nbsp;                fieldBased = true;</b>
<b class="nc">&nbsp;            } else if (feature == JSONWriter.Feature.BeanToArray) {</b>
<b class="nc">&nbsp;                beanToArray = true;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        ObjectWriter objectWriter = defaultObjectWriterProvider.getObjectWriter(objectClass, objectClass, fieldBased);</b>
<b class="nc">&nbsp;        ObjectReader objectReader = defaultObjectReaderProvider.getObjectReader(objectClass, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;        if (objectWriter instanceof ObjectWriterAdapter &amp;&amp; objectReader instanceof ObjectReaderBean) {</b>
<b class="nc">&nbsp;            List&lt;FieldWriter&gt; fieldWriters = objectWriter.getFieldWriters();</b>
&nbsp;
<b class="nc">&nbsp;            if (objectReader instanceof ObjectReaderNoneDefaultConstructor) {</b>
<b class="nc">&nbsp;                Map&lt;String, Object&gt; map = new HashMap(fieldWriters.size());</b>
<b class="nc">&nbsp;                for (FieldWriter fieldWriter : fieldWriters) {</b>
<b class="nc">&nbsp;                    Object fieldValue = fieldWriter.getFieldValue(object);</b>
<b class="nc">&nbsp;                    map.put(fieldWriter.fieldName, fieldValue);</b>
<b class="nc">&nbsp;                }</b>
&nbsp;
<b class="nc">&nbsp;                return (T) objectReader.createInstance(map, featuresValue);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            T instance = (T) objectReader.createInstance(featuresValue);</b>
<b class="nc">&nbsp;            for (FieldWriter fieldWriter : fieldWriters) {</b>
<b class="nc">&nbsp;                FieldReader fieldReader = objectReader.getFieldReader(fieldWriter.fieldName);</b>
<b class="nc">&nbsp;                if (fieldReader == null) {</b>
<b class="nc">&nbsp;                    continue;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Object fieldValue = fieldWriter.getFieldValue(object);</b>
<b class="nc">&nbsp;                Object fieldValueCopied = copy(fieldValue);</b>
<b class="nc">&nbsp;                fieldReader.accept(instance, fieldValueCopied);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            return instance;</b>
&nbsp;        }
&nbsp;
&nbsp;        byte[] jsonbBytes;
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofJSONB(features)) {</b>
<b class="nc">&nbsp;            writer.config(JSONWriter.Feature.WriteClassName);</b>
<b class="nc">&nbsp;            objectWriter.writeJSONB(writer, object, null, null, 0);</b>
<b class="nc">&nbsp;            jsonbBytes = writer.getBytes();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.ofJSONB(jsonbBytes, JSONReader.Feature.SupportAutoType, JSONReader.Feature.SupportClassForName)) {</b>
<b class="nc">&nbsp;            if (beanToArray) {</b>
<b class="nc">&nbsp;                jsonReader.context.config(JSONReader.Feature.SupportArrayToBean);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return (T) objectReader.readJSONBObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * use ObjectWriter and ObjectReader copy java object
&nbsp;     *
&nbsp;     * @param object the object to be copy
&nbsp;     * @param targetClass target class
&nbsp;     * @param features the specified features
&nbsp;     * @since 2.0.16
&nbsp;     */
&nbsp;    static &lt;T&gt; T copyTo(Object object, Class&lt;T&gt; targetClass, JSONWriter.Feature... features) {
<b class="nc">&nbsp;        if (object == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        Class&lt;?&gt; objectClass = object.getClass();</b>
&nbsp;
<b class="nc">&nbsp;        boolean fieldBased = false, beanToArray = false;</b>
<b class="nc">&nbsp;        long featuresValue = 0;</b>
<b class="nc">&nbsp;        for (JSONWriter.Feature feature : features) {</b>
<b class="nc">&nbsp;            featuresValue |= feature.mask;</b>
<b class="nc">&nbsp;            if (feature == JSONWriter.Feature.FieldBased) {</b>
<b class="nc">&nbsp;                fieldBased = true;</b>
<b class="nc">&nbsp;            } else if (feature == JSONWriter.Feature.BeanToArray) {</b>
<b class="nc">&nbsp;                beanToArray = true;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        ObjectWriter objectWriter = defaultObjectWriterProvider.getObjectWriter(objectClass, targetClass, fieldBased);</b>
<b class="nc">&nbsp;        ObjectReader objectReader = defaultObjectReaderProvider.getObjectReader(targetClass, fieldBased);</b>
&nbsp;
<b class="nc">&nbsp;        if (objectWriter instanceof ObjectWriterAdapter &amp;&amp; objectReader instanceof ObjectReaderBean) {</b>
<b class="nc">&nbsp;            List&lt;FieldWriter&gt; fieldWriters = objectWriter.getFieldWriters();</b>
&nbsp;
<b class="nc">&nbsp;            if (objectReader instanceof ObjectReaderNoneDefaultConstructor) {</b>
<b class="nc">&nbsp;                Map&lt;String, Object&gt; map = new HashMap(fieldWriters.size());</b>
<b class="nc">&nbsp;                for (FieldWriter fieldWriter : fieldWriters) {</b>
<b class="nc">&nbsp;                    Object fieldValue = fieldWriter.getFieldValue(object);</b>
<b class="nc">&nbsp;                    map.put(fieldWriter.fieldName, fieldValue);</b>
<b class="nc">&nbsp;                }</b>
&nbsp;
<b class="nc">&nbsp;                return (T) objectReader.createInstance(map, featuresValue);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            T instance = (T) objectReader.createInstance(featuresValue);</b>
<b class="nc">&nbsp;            for (FieldWriter fieldWriter : fieldWriters) {</b>
<b class="nc">&nbsp;                FieldReader fieldReader = objectReader.getFieldReader(fieldWriter.fieldName);</b>
<b class="nc">&nbsp;                if (fieldReader == null) {</b>
<b class="nc">&nbsp;                    continue;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                Object fieldValue = fieldWriter.getFieldValue(object);</b>
<b class="nc">&nbsp;                Object fieldValueCopied = copy(fieldValue);</b>
<b class="nc">&nbsp;                fieldReader.accept(instance, fieldValueCopied);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            return instance;</b>
&nbsp;        }
&nbsp;
&nbsp;        byte[] jsonbBytes;
<b class="nc">&nbsp;        try (JSONWriter writer = JSONWriter.ofJSONB(features)) {</b>
<b class="nc">&nbsp;            writer.config(JSONWriter.Feature.WriteClassName);</b>
<b class="nc">&nbsp;            objectWriter.writeJSONB(writer, object, null, null, 0);</b>
<b class="nc">&nbsp;            jsonbBytes = writer.getBytes();</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
<b class="nc">&nbsp;        try (JSONReader jsonReader = JSONReader.ofJSONB(</b>
&nbsp;                jsonbBytes,
&nbsp;                JSONReader.Feature.SupportAutoType,
&nbsp;                JSONReader.Feature.SupportClassForName)
&nbsp;        ) {
<b class="nc">&nbsp;            if (beanToArray) {</b>
<b class="nc">&nbsp;                jsonReader.context.config(JSONReader.Feature.SupportArrayToBean);</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return (T) objectReader.readJSONBObject(jsonReader, null, null, 0);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-09 20:17</div>
</div>
</body>
</html>
