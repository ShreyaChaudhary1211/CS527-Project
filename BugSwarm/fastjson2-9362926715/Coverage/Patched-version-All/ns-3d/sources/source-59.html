


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > ObjectWriterBaseModule</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.alibaba.fastjson2.writer</a>
</div>

<h1>Coverage Summary for Class: ObjectWriterBaseModule (com.alibaba.fastjson2.writer)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ObjectWriterBaseModule</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (5/5)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    93.1%
  </span>
  <span class="absValue">
    (215/231)
  </span>
</td>
</tr>
  <tr>
    <td class="name">ObjectWriterBaseModule$PrimitiveImpl</td>
<td class="coverageStat">
  <span class="percent">
    66.7%
  </span>
  <span class="absValue">
    (2/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    66.7%
  </span>
  <span class="absValue">
    (2/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ObjectWriterBaseModule$VoidObjectWriter</td>
<td class="coverageStat">
  <span class="percent">
    66.7%
  </span>
  <span class="absValue">
    (2/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    66.7%
  </span>
  <span class="absValue">
    (2/3)
  </span>
</td>
  </tr>
  <tr>
    <td class="name">ObjectWriterBaseModule$WriterAnnotationProcessor</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (21/21)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    89.6%
  </span>
  <span class="absValue">
    (327/365)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    93.8%
  </span>
  <span class="absValue">
    (30/32)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    90.7%
  </span>
  <span class="absValue">
    (546/602)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.alibaba.fastjson2.writer;
&nbsp;
&nbsp;import com.alibaba.fastjson2.JSONFactory;
&nbsp;import com.alibaba.fastjson2.JSONWriter;
&nbsp;import com.alibaba.fastjson2.annotation.*;
&nbsp;import com.alibaba.fastjson2.codec.BeanInfo;
&nbsp;import com.alibaba.fastjson2.codec.FieldInfo;
&nbsp;import com.alibaba.fastjson2.filter.Filter;
&nbsp;import com.alibaba.fastjson2.modules.ObjectWriterAnnotationProcessor;
&nbsp;import com.alibaba.fastjson2.modules.ObjectWriterModule;
&nbsp;import com.alibaba.fastjson2.support.money.MoneySupport;
&nbsp;import com.alibaba.fastjson2.util.*;
&nbsp;
&nbsp;import java.io.File;
&nbsp;import java.lang.annotation.Annotation;
&nbsp;import java.lang.reflect.*;
&nbsp;import java.math.BigDecimal;
&nbsp;import java.math.BigInteger;
&nbsp;import java.net.URI;
&nbsp;import java.net.URL;
&nbsp;import java.nio.charset.Charset;
&nbsp;import java.time.*;
&nbsp;import java.util.*;
&nbsp;import java.util.concurrent.TimeUnit;
&nbsp;import java.util.concurrent.atomic.*;
&nbsp;
&nbsp;import static com.alibaba.fastjson2.codec.FieldInfo.JSON_AUTO_WIRED_ANNOTATED;
&nbsp;import static com.alibaba.fastjson2.util.AnnotationUtils.getAnnotations;
&nbsp;import static com.alibaba.fastjson2.util.BeanUtils.processJacksonJsonJsonIgnore;
&nbsp;
&nbsp;public class ObjectWriterBaseModule
&nbsp;        implements ObjectWriterModule {
&nbsp;    static ObjectWriterAdapter STACK_TRACE_ELEMENT_WRITER;
&nbsp;
&nbsp;    final ObjectWriterProvider provider;
&nbsp;    final WriterAnnotationProcessor annotationProcessor;
&nbsp;
<b class="fc">&nbsp;    public ObjectWriterBaseModule(ObjectWriterProvider provider) {</b>
<b class="fc">&nbsp;        this.provider = provider;</b>
<b class="fc">&nbsp;        this.annotationProcessor = new WriterAnnotationProcessor();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public ObjectWriterProvider getProvider() {
<b class="fc">&nbsp;        return provider;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public ObjectWriterAnnotationProcessor getAnnotationProcessor() {
<b class="fc">&nbsp;        return annotationProcessor;</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    public class WriterAnnotationProcessor</b>
&nbsp;            implements ObjectWriterAnnotationProcessor {
&nbsp;        @Override
&nbsp;        public void getBeanInfo(BeanInfo beanInfo, Class objectClass) {
<b class="fc">&nbsp;            Class superclass = objectClass.getSuperclass();</b>
<b class="fc">&nbsp;            if (superclass != Object.class &amp;&amp; superclass != null) {</b>
<b class="fc">&nbsp;                getBeanInfo(beanInfo, superclass);</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            Annotation jsonType1x = null;</b>
<b class="fc">&nbsp;            JSONType jsonType = null;</b>
<b class="fc">&nbsp;            Annotation[] annotations = getAnnotations(objectClass);</b>
<b class="fc">&nbsp;            for (Annotation annotation : annotations) {</b>
<b class="fc">&nbsp;                Class annotationType = annotation.annotationType();</b>
<b class="fc">&nbsp;                jsonType = AnnotationUtils.findAnnotation(annotation, JSONType.class);</b>
<b class="fc">&nbsp;                if (jsonType == annotation) {</b>
<b class="fc">&nbsp;                    continue;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (annotationType == JSONAutowired.class) {</b>
<b class="fc">&nbsp;                    beanInfo.writerFeatures |= JSON_AUTO_WIRED_ANNOTATED;</b>
&nbsp;
<b class="fc">&nbsp;                    JSONAutowired autowired = (JSONAutowired) annotation;</b>
<b class="fc">&nbsp;                    String fieldName = autowired.writer();</b>
<b class="fc">&nbsp;                    if (!fieldName.isEmpty()) {</b>
<b class="fc">&nbsp;                        beanInfo.objectWriterFieldName = fieldName;</b>
&nbsp;                    }
&nbsp;                    continue;
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                boolean useJacksonAnnotation = JSONFactory.isUseJacksonAnnotation();</b>
<b class="fc">&nbsp;                switch (annotationType.getName()) {</b>
&nbsp;                    case &quot;com.alibaba.fastjson.annotation.JSONType&quot;:
<b class="fc">&nbsp;                        jsonType1x = annotation;</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonIgnoreProperties&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            processJacksonJsonIgnoreProperties(beanInfo, annotation);</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonPropertyOrder&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            processJacksonJsonPropertyOrder(beanInfo, annotation);</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonTypeInfo&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            processJacksonJsonTypeInfo(beanInfo, annotation);</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonTypeName&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            processJacksonJsonTypeName(beanInfo, annotation);</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;kotlin.Metadata&quot;:
<b class="fc">&nbsp;                        beanInfo.kotlin = true;</b>
<b class="fc">&nbsp;                        BeanUtils.getKotlinConstructor(objectClass, beanInfo);</b>
<b class="fc">&nbsp;                        beanInfo.createParameterNames = BeanUtils.getKotlinConstructorParameters(objectClass);</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    default:
&nbsp;                        break;
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (jsonType == null) {</b>
<b class="fc">&nbsp;                Class mixInSource = provider.mixInCache.get(objectClass);</b>
&nbsp;
<b class="fc">&nbsp;                if (mixInSource != null) {</b>
<b class="fc">&nbsp;                    beanInfo.mixIn = true;</b>
&nbsp;
<b class="fc">&nbsp;                    Annotation[] mixInAnnotations = getAnnotations(mixInSource);</b>
<b class="fc">&nbsp;                    for (Annotation annotation : mixInAnnotations) {</b>
<b class="fc">&nbsp;                        Class&lt;? extends Annotation&gt; annotationType = annotation.annotationType();</b>
<b class="fc">&nbsp;                        jsonType = AnnotationUtils.findAnnotation(annotation, JSONType.class);</b>
<b class="fc">&nbsp;                        if (jsonType == annotation) {</b>
<b class="fc">&nbsp;                            continue;</b>
&nbsp;                        }
&nbsp;
<b class="fc">&nbsp;                        if (annotationType == JSONAutowired.class) {</b>
<b class="fc">&nbsp;                            beanInfo.writerFeatures |= JSON_AUTO_WIRED_ANNOTATED;</b>
&nbsp;
<b class="fc">&nbsp;                            JSONAutowired autowired = (JSONAutowired) annotation;</b>
<b class="fc">&nbsp;                            String fieldName = autowired.writer();</b>
<b class="fc">&nbsp;                            if (!fieldName.isEmpty()) {</b>
<b class="fc">&nbsp;                                beanInfo.objectWriterFieldName = fieldName;</b>
&nbsp;                            }
&nbsp;                            continue;
&nbsp;                        }
&nbsp;
<b class="fc">&nbsp;                        String annotationTypeName = annotationType.getName();</b>
<b class="fc">&nbsp;                        switch (annotationTypeName) {</b>
&nbsp;                            case &quot;com.alibaba.fastjson.annotation.JSONType&quot;:
<b class="fc">&nbsp;                                jsonType1x = annotation;</b>
<b class="fc">&nbsp;                                break;</b>
&nbsp;                            default:
&nbsp;                                break;
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (jsonType != null) {</b>
<b class="fc">&nbsp;                Class&lt;?&gt;[] classes = jsonType.seeAlso();</b>
<b class="fc">&nbsp;                if (classes.length != 0) {</b>
<b class="fc">&nbsp;                    beanInfo.seeAlso = classes;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                String typeKey = jsonType.typeKey();</b>
<b class="fc">&nbsp;                if (!typeKey.isEmpty()) {</b>
<b class="fc">&nbsp;                    beanInfo.typeKey = typeKey;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                String typeName = jsonType.typeName();</b>
<b class="fc">&nbsp;                if (!typeName.isEmpty()) {</b>
<b class="fc">&nbsp;                    beanInfo.typeName = typeName;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                for (JSONWriter.Feature feature : jsonType.serializeFeatures()) {</b>
<b class="fc">&nbsp;                    beanInfo.writerFeatures |= feature.mask;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                beanInfo.namingStrategy =</b>
<b class="fc">&nbsp;                        jsonType.naming().name();</b>
&nbsp;
<b class="fc">&nbsp;                String[] ignores = jsonType.ignores();</b>
<b class="fc">&nbsp;                if (ignores.length &gt; 0) {</b>
<b class="fc">&nbsp;                    beanInfo.ignores = ignores;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                String[] includes = jsonType.includes();</b>
<b class="fc">&nbsp;                if (includes.length &gt; 0) {</b>
<b class="fc">&nbsp;                    beanInfo.includes = includes;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                String[] orders = jsonType.orders();</b>
<b class="fc">&nbsp;                if (orders.length &gt; 0) {</b>
<b class="fc">&nbsp;                    beanInfo.orders = orders;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                Class&lt;?&gt; serializer = jsonType.serializer();</b>
<b class="fc">&nbsp;                if (ObjectWriter.class.isAssignableFrom(serializer)) {</b>
<b class="fc">&nbsp;                    beanInfo.serializer = serializer;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                Class&lt;? extends Filter&gt;[] serializeFilters = jsonType.serializeFilters();</b>
<b class="fc">&nbsp;                if (serializeFilters.length != 0) {</b>
<b class="fc">&nbsp;                    beanInfo.serializeFilters = serializeFilters;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                String format = jsonType.format();</b>
<b class="fc">&nbsp;                if (!format.isEmpty()) {</b>
<b class="fc">&nbsp;                    beanInfo.format = format;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                String locale = jsonType.locale();</b>
<b class="fc">&nbsp;                if (!locale.isEmpty()) {</b>
<b class="nc">&nbsp;                    String[] parts = locale.split(&quot;_&quot;);</b>
<b class="nc">&nbsp;                    if (parts.length == 2) {</b>
<b class="nc">&nbsp;                        beanInfo.locale = new Locale(parts[0], parts[1]);</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (!jsonType.alphabetic()) {</b>
<b class="fc">&nbsp;                    beanInfo.alphabetic = false;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (jsonType.writeEnumAsJavaBean()) {</b>
<b class="fc">&nbsp;                    beanInfo.writeEnumAsJavaBean = true;</b>
&nbsp;                }
<b class="fc">&nbsp;            } else if (jsonType1x != null) {</b>
<b class="fc">&nbsp;                final Annotation annotation = jsonType1x;</b>
<b class="fc">&nbsp;                BeanUtils.annotationMethods(jsonType1x.annotationType(), method -&gt; BeanUtils.processJSONType1x(beanInfo, annotation, method));</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (beanInfo.seeAlso != null &amp;&amp; beanInfo.seeAlso.length != 0) {</b>
<b class="fc">&nbsp;                for (Class seeAlsoClass : beanInfo.seeAlso) {</b>
<b class="fc">&nbsp;                    if (seeAlsoClass == objectClass) {</b>
<b class="fc">&nbsp;                        beanInfo.typeName = objectClass.getSimpleName();</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        @Override
&nbsp;        public void getFieldInfo(BeanInfo beanInfo, FieldInfo fieldInfo, Class objectType, Field field) {
<b class="fc">&nbsp;            Class mixInSource = provider.mixInCache.get(objectType);</b>
&nbsp;
<b class="fc">&nbsp;            if (mixInSource != null &amp;&amp; mixInSource != objectType) {</b>
<b class="fc">&nbsp;                Field mixInField = null;</b>
&nbsp;                try {
<b class="fc">&nbsp;                    mixInField = mixInSource.getDeclaredField(field.getName());</b>
<b class="fc">&nbsp;                } catch (Exception ignored) {</b>
<b class="fc">&nbsp;                }</b>
&nbsp;
<b class="fc">&nbsp;                if (mixInField != null) {</b>
<b class="fc">&nbsp;                    getFieldInfo(beanInfo, fieldInfo, mixInSource, mixInField);</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            Class fieldClassMixInSource = provider.mixInCache.get(field.getType());</b>
<b class="fc">&nbsp;            if (fieldClassMixInSource != null) {</b>
<b class="fc">&nbsp;                fieldInfo.fieldClassMixIn = true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            int modifiers = field.getModifiers();</b>
<b class="fc">&nbsp;            boolean isTransient = Modifier.isTransient(modifiers);</b>
<b class="fc">&nbsp;            if (isTransient) {</b>
<b class="fc">&nbsp;                fieldInfo.ignore = true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            JSONField jsonField = null;</b>
<b class="fc">&nbsp;            Annotation[] annotations = getAnnotations(field);</b>
<b class="fc">&nbsp;            for (Annotation annotation : annotations) {</b>
<b class="fc">&nbsp;                Class&lt;? extends Annotation&gt; annotationType = annotation.annotationType();</b>
<b class="fc">&nbsp;                if (jsonField == null) {</b>
<b class="fc">&nbsp;                    jsonField = AnnotationUtils.findAnnotation(annotation, JSONField.class);</b>
<b class="fc">&nbsp;                    if (jsonField == annotation) {</b>
<b class="fc">&nbsp;                        continue;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                String annotationTypeName = annotationType.getName();</b>
<b class="fc">&nbsp;                boolean useJacksonAnnotation = JSONFactory.isUseJacksonAnnotation();</b>
<b class="fc">&nbsp;                switch (annotationTypeName) {</b>
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonIgnore&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            processJacksonJsonJsonIgnore(fieldInfo, annotation);</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonAnyGetter&quot;:
<b class="nc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="nc">&nbsp;                            fieldInfo.features |= FieldInfo.UNWRAPPED_MASK;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonValue&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            fieldInfo.features |= FieldInfo.VALUE_MASK;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonRawValue&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            fieldInfo.features |= FieldInfo.RAW_VALUE_MASK;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.alibaba.fastjson.annotation.JSONField&quot;:
<b class="fc">&nbsp;                        processJSONField1x(fieldInfo, annotation);</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonProperty&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            processJacksonJsonProperty(fieldInfo, annotation);</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    default:
&nbsp;                        break;
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (jsonField == null) {</b>
&nbsp;                return;
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            loadFieldInfo(fieldInfo, jsonField);</b>
&nbsp;
<b class="fc">&nbsp;            Class writeUsing = jsonField.writeUsing();</b>
<b class="fc">&nbsp;            if (ObjectWriter.class.isAssignableFrom(writeUsing)) {</b>
<b class="fc">&nbsp;                fieldInfo.writeUsing = writeUsing;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            Class serializeUsing = jsonField.serializeUsing();</b>
<b class="fc">&nbsp;            if (ObjectWriter.class.isAssignableFrom(serializeUsing)) {</b>
<b class="fc">&nbsp;                fieldInfo.writeUsing = serializeUsing;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (jsonField.jsonDirect()) {</b>
<b class="fc">&nbsp;                fieldInfo.features |= FieldInfo.RAW_VALUE_MASK;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        private void processJacksonJsonTypeName(BeanInfo beanInfo, Annotation annotation) {
<b class="fc">&nbsp;            Class&lt;? extends Annotation&gt; annotationClass = annotation.getClass();</b>
<b class="fc">&nbsp;            BeanUtils.annotationMethods(annotationClass, m -&gt; {</b>
<b class="fc">&nbsp;                String name = m.getName();</b>
&nbsp;                try {
<b class="fc">&nbsp;                    Object result = m.invoke(annotation);</b>
<b class="fc">&nbsp;                    switch (name) {</b>
&nbsp;                        case &quot;value&quot;: {
<b class="fc">&nbsp;                            String value = (String) result;</b>
<b class="fc">&nbsp;                            if (!value.isEmpty()) {</b>
<b class="fc">&nbsp;                                beanInfo.typeName = value;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        default:
&nbsp;                            break;
&nbsp;                    }
<b class="nc">&nbsp;                } catch (Throwable ignored) {</b>
&nbsp;                    // ignored
<b class="fc">&nbsp;                }</b>
&nbsp;            });
&nbsp;        }
&nbsp;
&nbsp;        private void processJacksonJsonTypeInfo(BeanInfo beanInfo, Annotation annotation) {
<b class="fc">&nbsp;            Class&lt;? extends Annotation&gt; annotationClass = annotation.getClass();</b>
<b class="fc">&nbsp;            BeanUtils.annotationMethods(annotationClass, m -&gt; {</b>
<b class="fc">&nbsp;                String name = m.getName();</b>
&nbsp;                try {
<b class="fc">&nbsp;                    Object result = m.invoke(annotation);</b>
<b class="fc">&nbsp;                    switch (name) {</b>
&nbsp;                        case &quot;property&quot;: {
<b class="fc">&nbsp;                            String value = (String) result;</b>
<b class="fc">&nbsp;                            if (!value.isEmpty()) {</b>
<b class="fc">&nbsp;                                beanInfo.typeKey = value;</b>
<b class="fc">&nbsp;                                beanInfo.writerFeatures |= JSONWriter.Feature.WriteClassName.mask;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        default:
&nbsp;                            break;
&nbsp;                    }
<b class="nc">&nbsp;                } catch (Throwable ignored) {</b>
&nbsp;                    // ignored
<b class="fc">&nbsp;                }</b>
&nbsp;            });
&nbsp;        }
&nbsp;
&nbsp;        private void processJacksonJsonPropertyOrder(BeanInfo beanInfo, Annotation annotation) {
<b class="fc">&nbsp;            Class&lt;? extends Annotation&gt; annotationClass = annotation.getClass();</b>
<b class="fc">&nbsp;            BeanUtils.annotationMethods(annotationClass, m -&gt; {</b>
<b class="fc">&nbsp;                String name = m.getName();</b>
&nbsp;                try {
<b class="fc">&nbsp;                    Object result = m.invoke(annotation);</b>
<b class="fc">&nbsp;                    switch (name) {</b>
&nbsp;                        case &quot;value&quot;: {
<b class="fc">&nbsp;                            String[] value = (String[]) result;</b>
<b class="fc">&nbsp;                            if (value.length != 0) {</b>
<b class="fc">&nbsp;                                beanInfo.orders = value;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        default:
&nbsp;                            break;
&nbsp;                    }
<b class="nc">&nbsp;                } catch (Throwable ignored) {</b>
&nbsp;                    // ignored
<b class="fc">&nbsp;                }</b>
&nbsp;            });
&nbsp;        }
&nbsp;
&nbsp;        private void processJacksonJsonProperty(FieldInfo fieldInfo, Annotation annotation) {
<b class="fc">&nbsp;            Class&lt;? extends Annotation&gt; annotationClass = annotation.getClass();</b>
<b class="fc">&nbsp;            BeanUtils.annotationMethods(annotationClass, m -&gt; {</b>
<b class="fc">&nbsp;                String name = m.getName();</b>
&nbsp;                try {
<b class="fc">&nbsp;                    Object result = m.invoke(annotation);</b>
<b class="fc">&nbsp;                    switch (name) {</b>
&nbsp;                        case &quot;value&quot;:
<b class="fc">&nbsp;                            String value = (String) result;</b>
<b class="fc">&nbsp;                            if (!value.isEmpty()) {</b>
<b class="fc">&nbsp;                                fieldInfo.fieldName = value;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        case &quot;access&quot;: {
<b class="fc">&nbsp;                            String access = ((Enum) result).name();</b>
<b class="fc">&nbsp;                            switch (access) {</b>
&nbsp;                                case &quot;WRITE_ONLY&quot;:
<b class="fc">&nbsp;                                    fieldInfo.ignore = true;</b>
<b class="fc">&nbsp;                                    break;</b>
&nbsp;                                default:
&nbsp;                                    break;
&nbsp;                            }
<b class="fc">&nbsp;                            break;</b>
&nbsp;                        }
&nbsp;                        default:
&nbsp;                            break;
&nbsp;                    }
<b class="nc">&nbsp;                } catch (Throwable ignored) {</b>
&nbsp;                    // ignored
<b class="fc">&nbsp;                }</b>
&nbsp;            });
&nbsp;        }
&nbsp;
&nbsp;        private void processJacksonJsonIgnoreProperties(BeanInfo beanInfo, Annotation annotation) {
<b class="fc">&nbsp;            Class&lt;? extends Annotation&gt; annotationClass = annotation.getClass();</b>
<b class="fc">&nbsp;            BeanUtils.annotationMethods(annotationClass, m -&gt; {</b>
<b class="fc">&nbsp;                String name = m.getName();</b>
&nbsp;                try {
<b class="fc">&nbsp;                    Object result = m.invoke(annotation);</b>
<b class="fc">&nbsp;                    switch (name) {</b>
&nbsp;                        case &quot;value&quot;: {
<b class="fc">&nbsp;                            String[] value = (String[]) result;</b>
<b class="fc">&nbsp;                            if (value.length != 0) {</b>
<b class="fc">&nbsp;                                beanInfo.ignores = value;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        default:
&nbsp;                            break;
&nbsp;                    }
<b class="nc">&nbsp;                } catch (Throwable ignored) {</b>
&nbsp;                    // ignored
<b class="fc">&nbsp;                }</b>
&nbsp;            });
&nbsp;        }
&nbsp;
&nbsp;        private void processJSONField1x(FieldInfo fieldInfo, Annotation annotation) {
<b class="fc">&nbsp;            Class&lt;? extends Annotation&gt; annotationClass = annotation.getClass();</b>
<b class="fc">&nbsp;            BeanUtils.annotationMethods(annotationClass, m -&gt; {</b>
<b class="fc">&nbsp;                String name = m.getName();</b>
&nbsp;                try {
<b class="fc">&nbsp;                    Object result = m.invoke(annotation);</b>
<b class="fc">&nbsp;                    switch (name) {</b>
&nbsp;                        case &quot;name&quot;: {
<b class="fc">&nbsp;                            String value = (String) result;</b>
<b class="fc">&nbsp;                            if (!value.isEmpty()) {</b>
<b class="fc">&nbsp;                                fieldInfo.fieldName = value;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        case &quot;format&quot;: {
<b class="fc">&nbsp;                            loadJsonFieldFormat(fieldInfo, (String) result);</b>
<b class="fc">&nbsp;                            break;</b>
&nbsp;                        }
&nbsp;                        case &quot;label&quot;: {
<b class="fc">&nbsp;                            String value = (String) result;</b>
<b class="fc">&nbsp;                            if (!value.isEmpty()) {</b>
<b class="fc">&nbsp;                                fieldInfo.label = value;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        case &quot;defaultValue&quot;: {
<b class="fc">&nbsp;                            String value = (String) result;</b>
<b class="fc">&nbsp;                            if (!value.isEmpty()) {</b>
<b class="nc">&nbsp;                                fieldInfo.defaultValue = value;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        case &quot;ordinal&quot;: {
<b class="fc">&nbsp;                            Integer ordinal = (Integer) result;</b>
<b class="fc">&nbsp;                            if (ordinal.intValue() != 0) {</b>
<b class="fc">&nbsp;                                fieldInfo.ordinal = ordinal;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        case &quot;serialize&quot;: {
<b class="fc">&nbsp;                            Boolean serialize = (Boolean) result;</b>
<b class="fc">&nbsp;                            if (!serialize.booleanValue()) {</b>
<b class="fc">&nbsp;                                fieldInfo.ignore = true;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        case &quot;unwrapped&quot;: {
<b class="fc">&nbsp;                            Boolean unwrapped = (Boolean) result;</b>
<b class="fc">&nbsp;                            if (unwrapped.booleanValue()) {</b>
<b class="fc">&nbsp;                                fieldInfo.features |= FieldInfo.UNWRAPPED_MASK;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        case &quot;serialzeFeatures&quot;: {
<b class="fc">&nbsp;                            Enum[] features = (Enum[]) result;</b>
<b class="fc">&nbsp;                            applyFeatures(fieldInfo, features);</b>
<b class="fc">&nbsp;                            break;</b>
&nbsp;                        }
&nbsp;                        case &quot;serializeUsing&quot;: {
<b class="fc">&nbsp;                            Class writeUsing = (Class) result;</b>
<b class="fc">&nbsp;                            if (ObjectWriter.class.isAssignableFrom(writeUsing)) {</b>
<b class="nc">&nbsp;                                fieldInfo.writeUsing = writeUsing;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        case &quot;jsonDirect&quot;: {
<b class="fc">&nbsp;                            Boolean jsonDirect = (Boolean) result;</b>
<b class="fc">&nbsp;                            if (jsonDirect) {</b>
<b class="fc">&nbsp;                                fieldInfo.features |= FieldInfo.RAW_VALUE_MASK;</b>
&nbsp;                            }
&nbsp;                            break;
&nbsp;                        }
&nbsp;                        default:
&nbsp;                            break;
&nbsp;                    }
<b class="nc">&nbsp;                } catch (Throwable ignored) {</b>
&nbsp;                    // ignored
<b class="fc">&nbsp;                }</b>
&nbsp;            });
&nbsp;        }
&nbsp;
&nbsp;        private void applyFeatures(FieldInfo fieldInfo, Enum[] features) {
<b class="fc">&nbsp;            for (Enum feature : features) {</b>
<b class="fc">&nbsp;                switch (feature.name()) {</b>
&nbsp;                    case &quot;UseISO8601DateFormat&quot;:
<b class="nc">&nbsp;                        fieldInfo.format = &quot;iso8601&quot;;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;WriteMapNullValue&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.WriteNulls.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;WriteNullListAsEmpty&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.WriteNullListAsEmpty.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;WriteNullStringAsEmpty&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.WriteNullStringAsEmpty.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;WriteNullNumberAsZero&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.WriteNullNumberAsZero.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;WriteNullBooleanAsFalse&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.WriteNullBooleanAsFalse.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;BrowserCompatible&quot;:
<b class="fc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.BrowserCompatible.mask;</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    case &quot;WriteClassName&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.WriteClassName.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;WriteNonStringValueAsString&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.WriteNonStringValueAsString.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;WriteEnumUsingToString&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.WriteEnumUsingToString.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;NotWriteRootClassName&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.NotWriteRootClassName.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;IgnoreErrorGetter&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.IgnoreErrorGetter.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    case &quot;WriteBigDecimalAsPlain&quot;:
<b class="nc">&nbsp;                        fieldInfo.features |= JSONWriter.Feature.WriteBigDecimalAsPlain.mask;</b>
<b class="nc">&nbsp;                        break;</b>
&nbsp;                    default:
&nbsp;                        break;
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        @Override
&nbsp;        public void getFieldInfo(BeanInfo beanInfo, FieldInfo fieldInfo, Class objectClass, Method method) {
<b class="fc">&nbsp;            Class mixInSource = provider.mixInCache.get(objectClass);</b>
<b class="fc">&nbsp;            String methodName = method.getName();</b>
&nbsp;
<b class="fc">&nbsp;            if (mixInSource != null &amp;&amp; mixInSource != objectClass) {</b>
<b class="fc">&nbsp;                Method mixInMethod = null;</b>
&nbsp;                try {
<b class="fc">&nbsp;                    mixInMethod = mixInSource.getDeclaredMethod(methodName, method.getParameterTypes());</b>
<b class="fc">&nbsp;                } catch (Exception ignored) {</b>
<b class="fc">&nbsp;                }</b>
&nbsp;
<b class="fc">&nbsp;                if (mixInMethod != null) {</b>
<b class="fc">&nbsp;                    getFieldInfo(beanInfo, fieldInfo, mixInSource, mixInMethod);</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            Class fieldClassMixInSource = provider.mixInCache.get(method.getReturnType());</b>
<b class="fc">&nbsp;            if (fieldClassMixInSource != null) {</b>
<b class="fc">&nbsp;                fieldInfo.fieldClassMixIn = true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (JDKUtils.CLASS_TRANSIENT != null &amp;&amp; method.getAnnotation(JDKUtils.CLASS_TRANSIENT) != null) {</b>
<b class="fc">&nbsp;                fieldInfo.ignore = true;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            Annotation[] annotations = getAnnotations(method);</b>
<b class="fc">&nbsp;            processAnnotations(fieldInfo, annotations);</b>
&nbsp;
<b class="fc">&nbsp;            if (!objectClass.getName().startsWith(&quot;java.lang&quot;) &amp;&amp; !BeanUtils.isRecord(objectClass)) {</b>
<b class="fc">&nbsp;                String fieldName = BeanUtils.getterName(method, null);</b>
&nbsp;
<b class="fc">&nbsp;                char firstChar = fieldName.charAt(0);</b>
&nbsp;                final String fieldName0;
<b class="fc">&nbsp;                if (firstChar &gt;= &#39;A&#39; &amp;&amp; firstChar &lt;= &#39;Z&#39;) {</b>
<b class="fc">&nbsp;                    char[] chars = fieldName.toCharArray();</b>
<b class="fc">&nbsp;                    chars[0] = (char) (firstChar + 32);</b>
<b class="fc">&nbsp;                    fieldName0 = new String(chars);</b>
<b class="fc">&nbsp;                } else if (firstChar &gt;= &#39;a&#39; &amp;&amp; firstChar &lt;= &#39;z&#39; &amp;&amp; fieldName.length() &gt; 2 &amp;&amp; fieldName.charAt(1) == &#39;_&#39;) {</b>
<b class="fc">&nbsp;                    char[] chars = fieldName.toCharArray();</b>
<b class="fc">&nbsp;                    chars[0] = (char) (firstChar - 32);</b>
<b class="fc">&nbsp;                    fieldName0 = new String(chars);</b>
<b class="fc">&nbsp;                } else {</b>
<b class="fc">&nbsp;                    fieldName0 = null;</b>
&nbsp;                }
<b class="fc">&nbsp;                BeanUtils.declaredFields(objectClass, field -&gt; {</b>
<b class="fc">&nbsp;                    String name = field.getName();</b>
<b class="fc">&nbsp;                    if (name.equals(fieldName) || (fieldName0 != null &amp;&amp; name.equals(fieldName0))) {</b>
<b class="fc">&nbsp;                        fieldInfo.features |= FieldInfo.FIELD_MASK;</b>
<b class="fc">&nbsp;                        int modifiers = field.getModifiers();</b>
<b class="fc">&nbsp;                        if ((!Modifier.isPublic(modifiers)) &amp;&amp; !Modifier.isStatic(modifiers)) {</b>
<b class="fc">&nbsp;                            getFieldInfo(beanInfo, fieldInfo, objectClass, field);</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                });
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (beanInfo.kotlin &amp;&amp; beanInfo.creatorConstructor != null &amp;&amp; beanInfo.createParameterNames != null) {</b>
<b class="fc">&nbsp;                String fieldName = BeanUtils.getterName(method, null);</b>
<b class="fc">&nbsp;                for (int i = 0; i &lt; beanInfo.createParameterNames.length; i++) {</b>
<b class="fc">&nbsp;                    if (fieldName.equals(beanInfo.createParameterNames[i])) {</b>
<b class="fc">&nbsp;                        Annotation[] parameterAnnotations = beanInfo.creatorConstructor.getParameterAnnotations()[i];</b>
<b class="fc">&nbsp;                        processAnnotations(fieldInfo, parameterAnnotations);</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        private void processAnnotations(FieldInfo fieldInfo, Annotation[] annotations) {
<b class="fc">&nbsp;            for (Annotation annotation : annotations) {</b>
<b class="fc">&nbsp;                Class&lt;? extends Annotation&gt; annotationType = annotation.annotationType();</b>
<b class="fc">&nbsp;                JSONField jsonField = AnnotationUtils.findAnnotation(annotation, JSONField.class);</b>
<b class="fc">&nbsp;                if (Objects.nonNull(jsonField)) {</b>
<b class="fc">&nbsp;                    loadFieldInfo(fieldInfo, jsonField);</b>
<b class="fc">&nbsp;                    continue;</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                boolean useJacksonAnnotation = JSONFactory.isUseJacksonAnnotation();</b>
<b class="fc">&nbsp;                String annotationTypeName = annotationType.getName();</b>
<b class="fc">&nbsp;                switch (annotationTypeName) {</b>
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonIgnore&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            processJacksonJsonJsonIgnore(fieldInfo, annotation);</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonAnyGetter&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            fieldInfo.features |= FieldInfo.UNWRAPPED_MASK;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.alibaba.fastjson.annotation.JSONField&quot;:
<b class="fc">&nbsp;                        processJSONField1x(fieldInfo, annotation);</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    case &quot;java.beans.Transient&quot;:
<b class="fc">&nbsp;                        fieldInfo.isTransient = true;</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonProperty&quot;: {
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            processJacksonJsonProperty(fieldInfo, annotation);</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    }
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonValue&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            fieldInfo.features |= FieldInfo.VALUE_MASK;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    case &quot;com.fasterxml.jackson.annotation.JsonRawValue&quot;:
<b class="fc">&nbsp;                        if (useJacksonAnnotation) {</b>
<b class="fc">&nbsp;                            fieldInfo.features |= FieldInfo.RAW_VALUE_MASK;</b>
&nbsp;                        }
&nbsp;                        break;
&nbsp;                    default:
&nbsp;                        break;
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        /**
&nbsp;         * load {@link JSONField} into {@link FieldInfo} params
&nbsp;         *
&nbsp;         * @param fieldInfo Java Field Info
&nbsp;         * @param jsonField {@link JSONField} JSON Field Info
&nbsp;         */
&nbsp;        private void loadFieldInfo(FieldInfo fieldInfo, JSONField jsonField) {
<b class="fc">&nbsp;            String jsonFieldName = jsonField.name();</b>
<b class="fc">&nbsp;            if (!jsonFieldName.isEmpty()) {</b>
<b class="fc">&nbsp;                fieldInfo.fieldName = jsonFieldName;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            String defaultValue = jsonField.defaultValue();</b>
<b class="fc">&nbsp;            if (!defaultValue.isEmpty()) {</b>
<b class="fc">&nbsp;                fieldInfo.defaultValue = defaultValue;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            loadJsonFieldFormat(fieldInfo, jsonField.format());</b>
&nbsp;
<b class="fc">&nbsp;            String label = jsonField.label();</b>
<b class="fc">&nbsp;            if (!label.isEmpty()) {</b>
<b class="fc">&nbsp;                fieldInfo.label = label;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (!fieldInfo.ignore) {</b>
<b class="fc">&nbsp;                fieldInfo.ignore = !jsonField.serialize();</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (jsonField.unwrapped()) {</b>
<b class="fc">&nbsp;                fieldInfo.features |= FieldInfo.UNWRAPPED_MASK;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            for (JSONWriter.Feature feature : jsonField.serializeFeatures()) {</b>
<b class="fc">&nbsp;                fieldInfo.features |= feature.mask;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            int ordinal = jsonField.ordinal();</b>
<b class="fc">&nbsp;            if (ordinal != 0) {</b>
<b class="fc">&nbsp;                fieldInfo.ordinal = ordinal;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (jsonField.value()) {</b>
<b class="fc">&nbsp;                fieldInfo.features |= FieldInfo.VALUE_MASK;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (jsonField.jsonDirect()) {</b>
<b class="fc">&nbsp;                fieldInfo.features |= FieldInfo.RAW_VALUE_MASK;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        /**
&nbsp;         * load {@link JSONField} format params into FieldInfo
&nbsp;         *
&nbsp;         * @param fieldInfo Java Field Info
&nbsp;         * @param jsonFieldFormat {@link JSONField} format params
&nbsp;         */
&nbsp;        private void loadJsonFieldFormat(FieldInfo fieldInfo, String jsonFieldFormat) {
<b class="fc">&nbsp;            if (!jsonFieldFormat.isEmpty()) {</b>
<b class="fc">&nbsp;                jsonFieldFormat = jsonFieldFormat.trim();</b>
&nbsp;
<b class="fc">&nbsp;                if (jsonFieldFormat.indexOf(&#39;T&#39;) != -1 &amp;&amp; !jsonFieldFormat.contains(&quot;&#39;T&#39;&quot;)) {</b>
<b class="nc">&nbsp;                    jsonFieldFormat = jsonFieldFormat.replaceAll(&quot;T&quot;, &quot;&#39;T&#39;&quot;);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                if (!jsonFieldFormat.isEmpty()) {</b>
<b class="fc">&nbsp;                    fieldInfo.format = jsonFieldFormat;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    ObjectWriter getExternalObjectWriter(String className, Class objectClass) {
<b class="fc">&nbsp;        switch (className) {</b>
&nbsp;            case &quot;java.sql.Time&quot;:
<b class="fc">&nbsp;                return JdbcSupport.createTimeWriter(null);</b>
&nbsp;            case &quot;java.sql.Timestamp&quot;:
<b class="fc">&nbsp;                return JdbcSupport.createTimestampWriter(objectClass, null);</b>
&nbsp;            case &quot;org.joda.time.chrono.GregorianChronology&quot;:
<b class="fc">&nbsp;                return JodaSupport.createGregorianChronologyWriter(objectClass);</b>
&nbsp;            case &quot;org.joda.time.chrono.ISOChronology&quot;:
<b class="fc">&nbsp;                return JodaSupport.createISOChronologyWriter(objectClass);</b>
&nbsp;            case &quot;org.joda.time.LocalDate&quot;:
<b class="fc">&nbsp;                return JodaSupport.createLocalDateWriter(objectClass, null);</b>
&nbsp;            case &quot;org.joda.time.LocalDateTime&quot;:
<b class="fc">&nbsp;                return JodaSupport.createLocalDateTimeWriter(objectClass, null);</b>
&nbsp;            default:
<b class="fc">&nbsp;                if (JdbcSupport.isClob(objectClass)) {</b>
<b class="fc">&nbsp;                    return JdbcSupport.createClobWriter(objectClass);</b>
&nbsp;                }
<b class="fc">&nbsp;                return null;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public ObjectWriter getObjectWriter(Type objectType, Class objectClass) {
<b class="fc">&nbsp;        if (objectType == String.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplString.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectClass == null) {</b>
<b class="fc">&nbsp;            if (objectType instanceof Class) {</b>
<b class="fc">&nbsp;                objectClass = (Class) objectType;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                objectClass = TypeUtils.getMapping(objectType);</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        String className = objectClass.getName();</b>
<b class="fc">&nbsp;        ObjectWriter externalObjectWriter = getExternalObjectWriter(className, objectClass);</b>
<b class="fc">&nbsp;        if (externalObjectWriter != null) {</b>
<b class="fc">&nbsp;            return externalObjectWriter;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        switch (className) {</b>
&nbsp;            case &quot;com.google.common.collect.AbstractMapBasedMultimap$RandomAccessWrappedList&quot;:
&nbsp;            case &quot;com.google.common.collect.AbstractMapBasedMultimap$WrappedSet&quot;:
<b class="fc">&nbsp;                return null;</b>
&nbsp;            case &quot;org.javamoney.moneta.internal.JDKCurrencyAdapter&quot;:
<b class="fc">&nbsp;                return ObjectWriterImplToString.INSTANCE;</b>
&nbsp;            case &quot;org.javamoney.moneta.Money&quot;:
<b class="fc">&nbsp;                return MoneySupport.createMonetaryAmountWriter();</b>
&nbsp;            case &quot;org.javamoney.moneta.spi.DefaultNumberValue&quot;:
<b class="fc">&nbsp;                return MoneySupport.createNumberValueWriter();</b>
&nbsp;            case &quot;net.sf.json.JSONNull&quot;:
&nbsp;            case &quot;java.net.Inet4Address&quot;:
&nbsp;            case &quot;java.net.Inet6Address&quot;:
&nbsp;            case &quot;java.net.InetSocketAddress&quot;:
&nbsp;            case &quot;java.text.SimpleDateFormat&quot;:
<b class="fc">&nbsp;                return ObjectWriterMisc.INSTANCE;</b>
&nbsp;            case &quot;org.apache.commons.lang3.tuple.Pair&quot;:
&nbsp;            case &quot;org.apache.commons.lang3.tuple.MutablePair&quot;:
&nbsp;            case &quot;org.apache.commons.lang3.tuple.ImmutablePair&quot;:
<b class="fc">&nbsp;                return new ApacheLang3Support.PairWriter(objectClass);</b>
&nbsp;            default:
&nbsp;                break;
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType instanceof ParameterizedType) {</b>
<b class="fc">&nbsp;            ParameterizedType parameterizedType = (ParameterizedType) objectType;</b>
<b class="fc">&nbsp;            Type rawType = parameterizedType.getRawType();</b>
<b class="fc">&nbsp;            Type[] actualTypeArguments = parameterizedType.getActualTypeArguments();</b>
&nbsp;
<b class="fc">&nbsp;            if (rawType == List.class || rawType == ArrayList.class) {</b>
<b class="fc">&nbsp;                if (actualTypeArguments.length == 1</b>
&nbsp;                        &amp;&amp; actualTypeArguments[0] == String.class) {
<b class="fc">&nbsp;                    return ObjectWriterImplListStr.INSTANCE;</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                objectType = rawType;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == LinkedList.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplList.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == ArrayList.class</b>
&nbsp;                || objectType == List.class
<b class="fc">&nbsp;                || List.class.isAssignableFrom(objectClass)) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplList.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (Collection.class.isAssignableFrom(objectClass)) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplCollection.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (Map.class.isAssignableFrom(objectClass)) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplMap.of(objectClass);</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (Map.Entry.class.isAssignableFrom(objectClass)) {</b>
<b class="fc">&nbsp;            String objectClassName = objectClass.getName();</b>
<b class="fc">&nbsp;            if (!&quot;org.apache.commons.lang3.tuple.ImmutablePair&quot;.equals(objectClassName)</b>
<b class="fc">&nbsp;                    &amp;&amp; !&quot;org.apache.commons.lang3.tuple.MutablePair&quot;.equals(objectClassName)</b>
&nbsp;            ) {
<b class="fc">&nbsp;                return ObjectWriterImplMapEntry.INSTANCE;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == Integer.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplInt32.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == AtomicInteger.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplAtomicInteger.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == Byte.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplInt8.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == Short.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplInt16.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == Long.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplInt64.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == AtomicLong.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplAtomicLong.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == AtomicReference.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplAtomicReference.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == Float.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplFloat.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == Double.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplDouble.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == BigInteger.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterBigInteger.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == BigDecimal.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplBigDecimal.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == BitSet.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplBitSet.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == OptionalInt.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplOptionalInt.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == OptionalLong.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplOptionalLong.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == OptionalDouble.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplOptionalDouble.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == Optional.class) {</b>
<b class="nc">&nbsp;            return ObjectWriterImplOptional.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == Boolean.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplBoolean.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == AtomicBoolean.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplAtomicBoolean.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == AtomicIntegerArray.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplAtomicIntegerArray.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == AtomicLongArray.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplAtomicLongArray.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType == Character.class) {</b>
<b class="fc">&nbsp;            return ObjectWriterImplCharacter.INSTANCE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if (objectType instanceof Class) {</b>
<b class="fc">&nbsp;            Class clazz = (Class) objectType;</b>
&nbsp;
<b class="fc">&nbsp;            if (clazz.isEnum()) {</b>
<b class="fc">&nbsp;                Member valueField = BeanUtils.getEnumValueField(clazz, provider);</b>
<b class="fc">&nbsp;                if (valueField == null) {</b>
<b class="fc">&nbsp;                    Class mixInSource = provider.mixInCache.get(objectClass);</b>
<b class="fc">&nbsp;                    Member mixedValueField = BeanUtils.getEnumValueField(mixInSource, provider);</b>
<b class="fc">&nbsp;                    if (mixedValueField instanceof Field) {</b>
&nbsp;                        try {
<b class="nc">&nbsp;                            valueField = clazz.getField(mixedValueField.getName());</b>
<b class="nc">&nbsp;                        } catch (NoSuchFieldException ignored) {</b>
<b class="nc">&nbsp;                        }</b>
<b class="fc">&nbsp;                    } else if (mixedValueField instanceof Method) {</b>
&nbsp;                        try {
<b class="fc">&nbsp;                            valueField = clazz.getMethod(mixedValueField.getName());</b>
<b class="nc">&nbsp;                        } catch (NoSuchMethodException ignored) {</b>
<b class="fc">&nbsp;                        }</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                BeanInfo beanInfo = new BeanInfo();</b>
<b class="fc">&nbsp;                annotationProcessor.getBeanInfo(beanInfo, clazz);</b>
<b class="fc">&nbsp;                if (!beanInfo.writeEnumAsJavaBean) {</b>
<b class="fc">&nbsp;                    return new ObjectWriterImplEnum(null, clazz, valueField, 0);</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (TimeUnit.class.isAssignableFrom(clazz)) {</b>
<b class="fc">&nbsp;                return new ObjectWriterImplEnum(null, TimeUnit.class, null, 0);</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == boolean[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplBoolValueArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == char[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplCharValueArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == StringBuffer.class || clazz == StringBuilder.class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplToString.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == byte[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplInt8ValueArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == short[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplInt16ValueArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == int[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplInt32ValueArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == long[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplInt64ValueArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == float[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplFloatValueArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == double[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplDoubleValueArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == Byte[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplInt8Array.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == Integer[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplInt32Array.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == Long[].class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplInt64Array.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == AtomicLongArray.class) {</b>
<b class="nc">&nbsp;                return ObjectWriterImplAtomicLongArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (String[].class == clazz) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplStringArray.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (Object[].class.isAssignableFrom(clazz)) {</b>
<b class="fc">&nbsp;                if (clazz == Object[].class) {</b>
<b class="fc">&nbsp;                    return ObjectWriterArray.INSTANCE;</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    return new ObjectWriterArray(clazz.getComponentType());</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == UUID.class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplUUID.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == Locale.class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplLocale.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == Currency.class) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplCurrency.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (TimeZone.class.isAssignableFrom(clazz)) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplTimeZone.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (clazz == URI.class</b>
&nbsp;                    || clazz == URL.class
&nbsp;                    || clazz == File.class
<b class="fc">&nbsp;                    || ZoneId.class.isAssignableFrom(clazz)</b>
<b class="fc">&nbsp;                    || Charset.class.isAssignableFrom(clazz)) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplToString.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            externalObjectWriter = getExternalObjectWriter(clazz.getName(), clazz);</b>
<b class="fc">&nbsp;            if (externalObjectWriter != null) {</b>
<b class="nc">&nbsp;                return externalObjectWriter;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            BeanInfo beanInfo = new BeanInfo();</b>
<b class="fc">&nbsp;            Class mixIn = provider.getMixIn(clazz);</b>
<b class="fc">&nbsp;            if (mixIn != null) {</b>
<b class="fc">&nbsp;                annotationProcessor.getBeanInfo(beanInfo, mixIn);</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (Date.class.isAssignableFrom(clazz)) {</b>
<b class="fc">&nbsp;                if (beanInfo.format != null || beanInfo.locale != null) {</b>
<b class="fc">&nbsp;                    return new ObjectWriterImplDate(beanInfo.format, beanInfo.locale);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                return ObjectWriterImplDate.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (Calendar.class.isAssignableFrom(clazz)) {</b>
<b class="fc">&nbsp;                if (beanInfo.format != null || beanInfo.locale != null) {</b>
<b class="nc">&nbsp;                    return new ObjectWriterImplCalendar(beanInfo.format, beanInfo.locale);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                return ObjectWriterImplCalendar.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (ZonedDateTime.class == clazz) {</b>
<b class="fc">&nbsp;                if (beanInfo.format != null || beanInfo.locale != null) {</b>
<b class="nc">&nbsp;                    return new ObjectWriterImplZonedDateTime(beanInfo.format, beanInfo.locale);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                return ObjectWriterImplZonedDateTime.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (OffsetDateTime.class == clazz) {</b>
<b class="fc">&nbsp;                if (beanInfo.format != null || beanInfo.locale != null) {</b>
<b class="nc">&nbsp;                    return new ObjectWriterImplOffsetDateTime(beanInfo.format, beanInfo.locale);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                return ObjectWriterImplOffsetDateTime.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (LocalDateTime.class == clazz) {</b>
<b class="fc">&nbsp;                if (beanInfo.format != null || beanInfo.locale != null) {</b>
<b class="fc">&nbsp;                    return new ObjectWriterImplLocalDateTime(beanInfo.format, beanInfo.locale);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                return ObjectWriterImplLocalDateTime.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (LocalDate.class == clazz) {</b>
<b class="fc">&nbsp;                if (beanInfo.format != null || beanInfo.locale != null) {</b>
<b class="fc">&nbsp;                    return new ObjectWriterImplLocalDate(beanInfo.format, beanInfo.locale);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                return ObjectWriterImplLocalDate.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (LocalTime.class == clazz) {</b>
<b class="fc">&nbsp;                if (beanInfo.format != null || beanInfo.locale != null) {</b>
<b class="fc">&nbsp;                    return new ObjectWriterImplLocalTime(beanInfo.format, beanInfo.locale);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                return ObjectWriterImplLocalTime.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (OffsetTime.class == clazz) {</b>
<b class="fc">&nbsp;                if (beanInfo.format != null || beanInfo.locale != null) {</b>
<b class="nc">&nbsp;                    return new ObjectWriterImplOffsetTime(beanInfo.format, beanInfo.locale);</b>
&nbsp;                }
&nbsp;
<b class="fc">&nbsp;                return ObjectWriterImplOffsetTime.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (Instant.class == clazz) {</b>
<b class="nc">&nbsp;                if (beanInfo.format != null || beanInfo.locale != null) {</b>
<b class="nc">&nbsp;                    return new ObjectWriterImplInstant(beanInfo.format, beanInfo.locale);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                return ObjectWriterImplInstant.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (StackTraceElement.class == clazz) {</b>
<b class="fc">&nbsp;                if (STACK_TRACE_ELEMENT_WRITER == null) {</b>
<b class="fc">&nbsp;                    STACK_TRACE_ELEMENT_WRITER = new ObjectWriterAdapter(StackTraceElement.class, Arrays.asList(</b>
&nbsp;                            new FieldWriter[]{
<b class="fc">&nbsp;                                    ObjectWriters.fieldWriter(&quot;fileName&quot;, String.class, StackTraceElement::getFileName),</b>
<b class="fc">&nbsp;                                    ObjectWriters.fieldWriter(&quot;lineNumber&quot;, StackTraceElement::getLineNumber),</b>
<b class="fc">&nbsp;                                    ObjectWriters.fieldWriter(&quot;className&quot;, String.class, StackTraceElement::getClassName),</b>
<b class="fc">&nbsp;                                    ObjectWriters.fieldWriter(&quot;methodName&quot;, String.class, StackTraceElement::getMethodName),</b>
&nbsp;                            }
&nbsp;                    ));
&nbsp;                }
<b class="fc">&nbsp;                return STACK_TRACE_ELEMENT_WRITER;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (Class.class == clazz) {</b>
<b class="fc">&nbsp;                return ObjectWriterImplClass.INSTANCE;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (Method.class == clazz) {</b>
<b class="fc">&nbsp;                return new ObjectWriterAdapter&lt;&gt;(</b>
&nbsp;                        Method.class,
<b class="fc">&nbsp;                        Arrays.asList(</b>
<b class="fc">&nbsp;                                ObjectWriters.fieldWriter(&quot;declaringClass&quot;, Class.class, Method::getDeclaringClass),</b>
<b class="fc">&nbsp;                                ObjectWriters.fieldWriter(&quot;name&quot;, String.class, Method::getName),</b>
<b class="fc">&nbsp;                                ObjectWriters.fieldWriter(&quot;parameterTypes&quot;, Class[].class, Method::getParameterTypes)</b>
&nbsp;                        )
&nbsp;                );
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (Field.class == clazz) {</b>
<b class="fc">&nbsp;                return new ObjectWriterAdapter&lt;&gt;(</b>
&nbsp;                        Method.class,
<b class="fc">&nbsp;                        Arrays.asList(</b>
<b class="fc">&nbsp;                                ObjectWriters.fieldWriter(&quot;declaringClass&quot;, Class.class, Field::getDeclaringClass),</b>
<b class="fc">&nbsp;                                ObjectWriters.fieldWriter(&quot;name&quot;, String.class, Field::getName)</b>
&nbsp;                        )
&nbsp;                );
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            if (ParameterizedType.class.isAssignableFrom(clazz)) {</b>
<b class="fc">&nbsp;                return ObjectWriters.objectWriter(</b>
&nbsp;                        ParameterizedType.class,
<b class="fc">&nbsp;                        ObjectWriters.fieldWriter(&quot;actualTypeArguments&quot;, Type[].class, ParameterizedType::getActualTypeArguments),</b>
<b class="fc">&nbsp;                        ObjectWriters.fieldWriter(&quot;ownerType&quot;, Type.class, ParameterizedType::getOwnerType),</b>
<b class="fc">&nbsp;                        ObjectWriters.fieldWriter(&quot;rawType&quot;, Type.class, ParameterizedType::getRawType)</b>
&nbsp;                );
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    abstract static class PrimitiveImpl&lt;T&gt;</b>
&nbsp;            implements ObjectWriter&lt;T&gt; {
&nbsp;        @Override
&nbsp;        public void writeArrayMappingJSONB(JSONWriter jsonWriter,
&nbsp;                                           Object object,
&nbsp;                                           Object fieldName,
&nbsp;                                           Type fieldType,
&nbsp;                                           long features) {
<b class="fc">&nbsp;            writeJSONB(jsonWriter, object, null, null, 0);</b>
&nbsp;        }
&nbsp;
&nbsp;        @Override
&nbsp;        public void writeArrayMapping(JSONWriter jsonWriter,
&nbsp;                                      Object object,
&nbsp;                                      Object fieldName,
&nbsp;                                      Type fieldType,
&nbsp;                                      long features) {
<b class="nc">&nbsp;            write(jsonWriter, object, null, null, 0);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    static class VoidObjectWriter</b>
&nbsp;            implements ObjectWriter {
<b class="fc">&nbsp;        public static final VoidObjectWriter INSTANCE = new VoidObjectWriter();</b>
&nbsp;
&nbsp;        @Override
&nbsp;        public void write(JSONWriter jsonWriter, Object object, Object fieldName, Type fieldType, long features) {
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-04-09 21:52</div>
</div>
</body>
</html>
